<html>
  <body>
    <div class="clinic-home">
      <div class="container">
        <!-- Pending Appointments -->
        <div class="column pending bottom-border-orange">
          <div class="label">Pending appointments</div>
          <div class="content">
            <mat-icon class="icon">schedule</mat-icon>
            <span class="number">{{ pendingAppointmentsCount }}</span>
            <svg class="donut-chart" viewBox="0 0 32 32">
              <circle class="donut-ring" cx="16" cy="16" r="14" fill="transparent" stroke="#ccc" stroke-width="4"></circle>
              <circle class="donut-segment" cx="16" cy="16" r="14" fill="transparent" stroke="#FFA500" stroke-width="4"
                [attr.stroke-dasharray]="(pendingAppointmentsCount / getTotalAppointmentsCount() * 88) + ' 88'"></circle>
              <text class="donut-text" x="50%" y="50%" fill="#FFA500" text-anchor="middle"
                alignment-baseline="middle">{{ (pendingAppointmentsCount / getTotalAppointmentsCount() * 100) | number:'1.0-0' }}%</text>
            </svg>
          </div>
        </div>
    
        <!-- Accepted Appointments -->
        <div class="column accepted bottom-border-blue">
          <div class="label">Accepted appointments</div>
          <div class="content">
            <mat-icon class="icon">check_circle</mat-icon>
            <span class="number">{{ acceptedAppointmentsCount }}</span>
            <svg class="donut-chart" viewBox="0 0 32 32">
              <circle class="donut-ring" cx="16" cy="16" r="14" fill="transparent" stroke="#ccc" stroke-width="4"></circle>
              <circle class="donut-segment" cx="16" cy="16" r="14" fill="transparent" stroke="#007bff" stroke-width="4"
                [attr.stroke-dasharray]="(acceptedAppointmentsCount / getTotalAppointmentsCount() * 88) + ' 88'"></circle>
              <text class="donut-text" x="50%" y="50%" fill="#007bff" text-anchor="middle"
                alignment-baseline="middle">{{ (acceptedAppointmentsCount / getTotalAppointmentsCount() * 100) | number:'1.0-0' }}%</text>
            </svg>
          </div>
        </div>
    
        <!-- Rejected Appointments -->
        <div class="column rejected bottom-border-red">
          <div class="label">Rejected appointments</div>
          <div class="content">
            <mat-icon class="icon">cancel</mat-icon>
            <span class="number">{{ rejectedAppointmentsCount }}</span>
            <svg class="donut-chart" viewBox="0 0 32 32">
              <circle class="donut-ring" cx="16" cy="16" r="14" fill="transparent" stroke="#ccc" stroke-width="4"></circle>
              <circle class="donut-segment" cx="16" cy="16" r="14" fill="transparent" stroke="#dc3545" stroke-width="4"
                [attr.stroke-dasharray]="(rejectedAppointmentsCount / getTotalAppointmentsCount() * 88) + ' 88'"></circle>
              <text class="donut-text" x="50%" y="50%" fill="#dc3545" text-anchor="middle"
                alignment-baseline="middle">{{ (rejectedAppointmentsCount / getTotalAppointmentsCount() * 100) | number:'1.0-0' }}%</text>
            </svg>
          </div>
        </div>
    
        <!-- Concluded Appointments -->
        <div class="column concluded bottom-border-green">
          <div class="label">Concluded appointments</div>
          <div class="content">
            <mat-icon class="icon">done_all</mat-icon>
            <span class="number">{{ concludedAppointmentsCount }}</span>
            <svg class="donut-chart" viewBox="0 0 32 32">
              <circle class="donut-ring" cx="16" cy="16" r="14" fill="transparent" stroke="#ccc" stroke-width="4"></circle>
              <circle class="donut-segment" cx="16" cy="16" r="14" fill="transparent" stroke="#28a745" stroke-width="4"
                [attr.stroke-dasharray]="(concludedAppointmentsCount / getTotalAppointmentsCount() * 88) + ' 88'"></circle>
              <text class="donut-text" x="50%" y="50%" fill="#28a745" text-anchor="middle"
                alignment-baseline="middle">{{ (concludedAppointmentsCount / getTotalAppointmentsCount() * 100) | number:'1.0-0' }}%</text>
            </svg>
          </div>
        </div>
      </div>
    
      <div class="summary-container">
        <div class="pie-container">
          <h1><b>Appointments</b></h1>
          <div class="pie-chart">
            <canvas id="appointmentPieChart" width="200" height="200"></canvas>
          </div>
        </div>
    
        <div class="total-container">
          <h2>Total Appointments per Month</h2>
          <label for="yearFilter">Filter by Year: </label>
          <mat-form-field appearance="outline" class="year-select">
            <mat-label>Year</mat-label>
            <mat-select [(value)]="selectedYear" (selectionChange)="filterAppointmentsByYear($event)">
              <mat-option *ngFor="let year of years" [value]="year">{{ year }}</mat-option>
            </mat-select>
          </mat-form-field>
          <table>
            <thead>
              <tr>
                <th>Month</th>
                <th>Total Appointments</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let month of totalAppointmentsPerMonth">
                <td>{{ month.name }}</td>
                <td>{{ month.count }}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </body>
</html>