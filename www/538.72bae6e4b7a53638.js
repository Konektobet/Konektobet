"use strict";(self.webpackChunkKonektobet=self.webpackChunkKonektobet||[]).push([[538],{538:(L,p,s)=>{s.r(p),s.d(p,{ClinicModule:()=>U});var d=s(6814),g=s(1896),C=s(5861),t=s(5879),x=s(7344),y=s(7700),_=s(9850),h=s(5195),m=s(617),u=s(9157),v=s(8525),P=s(3680);function O(c,f){1&c&&(t.TgZ(0,"div",20)(1,"mat-icon"),t._uU(2,"arrow_forward_ios"),t.qZA(),t.TgZ(3,"label")(4,"strong"),t._uU(5,"See more"),t.qZA()()())}function M(c,f){if(1&c&&(t.TgZ(0,"div")(1,"p"),t._uU(2,"Service Rating: "),t.TgZ(3,"span",21),t._uU(4),t.qZA()(),t.TgZ(5,"p"),t._uU(6,"Facility Rating: "),t.TgZ(7,"span",22),t._uU(8),t.qZA()(),t.TgZ(9,"p"),t._uU(10,"Price Rating: "),t.TgZ(11,"span",23),t._uU(12),t.qZA()()()),2&c){const i=t.oxw().$implicit,e=t.oxw();t.xp6(4),t.AsE("",e.getAverageRating(i.id).service," ",e.generateStarRating(e.getAverageRating(i.id).service),""),t.xp6(4),t.AsE("",e.getAverageRating(i.id).facility," ",e.generateStarRating(e.getAverageRating(i.id).facility),""),t.xp6(4),t.AsE("",e.getAverageRating(i.id).price," ",e.generateStarRating(e.getAverageRating(i.id).price),"")}}const Z=function(c){return["/new-details",c]};function w(c,f){if(1&c&&(t.TgZ(0,"a",11)(1,"mat-card",12)(2,"mat-card-content")(3,"div",13),t._UZ(4,"img",14)(5,"div",15),t.qZA(),t.YNc(6,O,6,0,"div",16),t.TgZ(7,"div",17)(8,"div",18)(9,"h2"),t._uU(10),t.qZA(),t.TgZ(11,"h2"),t._uU(12),t.qZA(),t.YNc(13,M,13,6,"div",19),t.qZA()()()()()),2&c){const i=f.$implicit,e=t.oxw();t.Q6J("routerLink",t.VKq(6,Z,i.id)),t.xp6(4),t.Q6J("src",i.profile||"assets/logo.png",t.LSH),t.xp6(2),t.Q6J("ngIf",e.isHovered),t.xp6(4),t.Oqu(i.cName),t.xp6(2),t.Oqu(i.cAddress),t.xp6(1),t.Q6J("ngIf",e.getAverageRating(i.id))}}const A=[{path:"",component:(()=>{class c{constructor(i,e,n,o,r){this.supabaseService=i,this.dialog=e,this.cdr=n,this.initialRecommendService=o,this.router=r,this.clinics=[],this.reviews=[],this.clinicsFound=!1,this.selectedServiceSort="highest",this.selectedFacilitySort="highest",this.selectedPriceSort="highest",this.isHovered=!1}ngOnInit(){this.loadClinics(),this.loadReviews(),this.fetchClinicLogo(),this.initialRecommendService.matchedClinics$.subscribe(i=>{this.clinics=i.map(e=>({...e,similarity:void 0})),this.clinicsFound=i.length>0,this.sortClinics(),this.cdr.detectChanges()})}onMouseEnter(){this.isHovered=!0}onMouseLeave(){this.isHovered=!1}loadClinics(){this.supabaseService.getSupabase().from("clinic_tbl").select("*").then(({data:i,error:e})=>{e?console.error("Error fetching clinics:",e):(this.clinics=i,this.sortClinics(),this.fetchClinicLogo())})}loadReviews(){this.supabaseService.getSupabase().from("ratesReviews_tbl").select("*").then(({data:i,error:e})=>{e?console.error("Error fetching reviews:",e):this.reviews=i})}getAverageRating(i){const e=this.reviews.filter(a=>a.rrClinic_id===i),n=e.length;if(0===n)return{service:0,facility:0,price:0};const o=e.reduce((a,l)=>a+l.serviceRating,0),r=e.reduce((a,l)=>a+l.facilityRating,0),F=e.reduce((a,l)=>a+l.priceRating,0);return{service:parseFloat((o/n).toFixed(1)),facility:parseFloat((r/n).toFixed(1)),price:parseFloat((F/n).toFixed(1))}}sortClinics(i){switch(i){case"service":this.clinics.sort((e,n)=>{const o=this.getAverageRating(e.id).service,r=this.getAverageRating(n.id).service;return"highest"===this.selectedServiceSort?r-o:o-r});break;case"facility":this.clinics.sort((e,n)=>{const o=this.getAverageRating(e.id).facility,r=this.getAverageRating(n.id).facility;return"highest"===this.selectedFacilitySort?r-o:o-r});break;case"price":this.clinics.sort((e,n)=>{const o=this.getAverageRating(e.id).price,r=this.getAverageRating(n.id).price;return"highest"===this.selectedPriceSort?r-o:o-r});break;default:this.clinics.sort((e,n)=>{const o=this.getAverageRating(e.id).service,r=this.getAverageRating(n.id).service;return"highest"===this.selectedServiceSort?r-o:o-r})}}generateStarRating(i){const e=Math.round(i);return"\u2605".repeat(e)+"\u2606".repeat(5-e)}popSeeMoreDetails(i){this.router.navigate(["/new-details",i.id])}fetchClinicLogo(){var i=this;return(0,C.Z)(function*(){for(const e of i.clinics){const n=`${e.cName}_clinicLogo`;try{const{data:o,error:r}=yield i.supabaseService.getSupabase().storage.from("clinicLogo").download(n);e.profile=r?"assets/logo.png":URL.createObjectURL(o)}catch{e.profile="assets/logo.png"}}})()}static#t=this.\u0275fac=function(e){return new(e||c)(t.Y36(x.T),t.Y36(y.uw),t.Y36(t.sBO),t.Y36(_.h),t.Y36(g.F0))};static#e=this.\u0275cmp=t.Xpm({type:c,selectors:[["app-clinic"]],decls:35,vars:4,consts:[[1,"outer-clinic-container"],[1,"clinics"],[1,"filter"],[1,"status-filter"],["appearance","outline"],[3,"value","valueChange","selectionChange"],["value","highest"],["value","lowest"],[1,"inner-clinic-container"],[1,"clinic-card-container"],["style","text-decoration: none;",3,"routerLink",4,"ngFor","ngForOf"],[2,"text-decoration","none",3,"routerLink"],[1,"clinic-card",2,"background-image","url('assets/bg.png')"],[1,"clinic-logo"],["alt","Profile Image",3,"src"],[1,"clinic-txt"],["class","see-more1",4,"ngIf"],[1,"bot-part-container"],[1,"see-more"],[4,"ngIf"],[1,"see-more1"],[1,"rating1"],[1,"rating2"],[1,"rating3"]],template:function(e,n){1&e&&(t.TgZ(0,"body")(1,"div",0)(2,"h1",1),t._uU(3,"Clinics"),t.qZA(),t.TgZ(4,"div",2)(5,"div",3)(6,"mat-form-field",4)(7,"mat-label"),t._uU(8,"Sort by Service Rating:"),t.qZA(),t.TgZ(9,"mat-select",5),t.NdJ("valueChange",function(r){return n.selectedServiceSort=r})("selectionChange",function(){return n.sortClinics("service")}),t.TgZ(10,"mat-option",6),t._uU(11,"Highest to Lowest"),t.qZA(),t.TgZ(12,"mat-option",7),t._uU(13,"Lowest to Highest"),t.qZA()()()(),t.TgZ(14,"div",3)(15,"mat-form-field",4)(16,"mat-label"),t._uU(17,"Sort by Facility Rating:"),t.qZA(),t.TgZ(18,"mat-select",5),t.NdJ("valueChange",function(r){return n.selectedFacilitySort=r})("selectionChange",function(){return n.sortClinics("facility")}),t.TgZ(19,"mat-option",6),t._uU(20,"Highest to Lowest"),t.qZA(),t.TgZ(21,"mat-option",7),t._uU(22,"Lowest to Highest"),t.qZA()()()(),t.TgZ(23,"div",3)(24,"mat-form-field",4)(25,"mat-label"),t._uU(26,"Sort by Price Rating:"),t.qZA(),t.TgZ(27,"mat-select",5),t.NdJ("valueChange",function(r){return n.selectedPriceSort=r})("selectionChange",function(){return n.sortClinics("price")}),t.TgZ(28,"mat-option",6),t._uU(29,"Highest to Lowest"),t.qZA(),t.TgZ(30,"mat-option",7),t._uU(31,"Lowest to Highest"),t.qZA()()()()(),t.TgZ(32,"div",8)(33,"div",9),t.YNc(34,w,14,8,"a",10),t.qZA()()()()),2&e&&(t.xp6(9),t.Q6J("value",n.selectedServiceSort),t.xp6(9),t.Q6J("value",n.selectedFacilitySort),t.xp6(9),t.Q6J("value",n.selectedPriceSort),t.xp6(7),t.Q6J("ngForOf",n.clinics))},dependencies:[d.sg,d.O5,g.rH,h.a8,h.dn,m.Hw,u.KE,u.hX,v.gD,P.ey],styles:["body[_ngcontent-%COMP%]{background-color:#fafafa;height:100%;margin:0}.clinics[_ngcontent-%COMP%]{text-align:center;font-size:30px;font-weight:700;margin-top:30px}.inner-clinic-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.clinic-card-container[_ngcontent-%COMP%]{width:100%;display:flex;flex-wrap:wrap;justify-content:space-evenly;align-items:center;margin:3% 5% 0}.clinic-card[_ngcontent-%COMP%]{width:400px;height:300px;margin-bottom:30px;overflow:absolute;border-top-left-radius:10px;border-top-right-radius:10px}.clinic-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:0;display:flex;width:auto;flex-wrap:nowrap;align-items:baseline;flex-direction:column}.clinic-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:auto;display:flex;align-items:center;justify-content:flex-start;padding:20px}.clinic-logo[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column;flex-wrap:wrap;width:100%}.clinic-txt[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:flex-start;flex-direction:column;flex-wrap:wrap;color:#fff;text-align:center}.clinic-txt[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{width:100%;font-size:1rem}.clinic-txt[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1rem;width:100%}@media screen and (max-width: 769px){.clinic-cards[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;width:350px}.clinic-card[_ngcontent-%COMP%]{width:350px;height:150px;margin-bottom:100px;overflow:absolute;border-top-left-radius:10px;border-top-right-radius:10px}.clinic-txt[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:16px}.clinic-txt[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:15px}}.see-more[_ngcontent-%COMP%]{width:100%;height:auto;display:flex;justify-content:center;overflow:relative;color:#fff;flex-direction:column}.see-more[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{width:100%;font-size:1rem;display:flex;justify-content:center;align-items:center;margin:0}.see-more[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:10px;margin-left:10%}.rating1[_ngcontent-%COMP%]{margin-left:20px}.rating2[_ngcontent-%COMP%]{margin-left:23px}.rating3[_ngcontent-%COMP%]{margin-left:35px}.see-more1[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:24px;color:#000}.see-more1[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;background-color:#fffc;opacity:0;transition:opacity .3s ease}.see-more1[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{cursor:pointer;margin-bottom:8px;color:#000}.clinic-card[_ngcontent-%COMP%]:hover   .see-more1[_ngcontent-%COMP%]{opacity:1}.see-more[_ngcontent-%COMP%]   mat-raised-button[_ngcontent-%COMP%]{order:1;width:auto}.bot-part-container[_ngcontent-%COMP%]{height:170px;width:100%;display:flex;align-items:center;justify-content:row;background-color:#fff;border-top-left-radius:10px;border-top-right-radius:10px;overflow:relative;box-shadow:2px 2px 10px #00000013;background-color:#3f51b5}.filter[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:5rem}"]})}return c})()}];let S=(()=>{class c{static#t=this.\u0275fac=function(e){return new(e||c)};static#e=this.\u0275mod=t.oAB({type:c});static#i=this.\u0275inj=t.cJS({imports:[g.Bz.forChild(A),g.Bz]})}return c})();var R=s(6223),b=s(2296),T=s(6385);let U=(()=>{class c{static#t=this.\u0275fac=function(e){return new(e||c)};static#e=this.\u0275mod=t.oAB({type:c});static#i=this.\u0275inj=t.cJS({imports:[d.ez,S,R.u5,h.QW,m.Ps,b.ot,T.t,v.LD]})}return c})()}}]);