"use strict";(self.webpackChunkKonektobet=self.webpackChunkKonektobet||[]).push([[5462],{5462:(K,h,s)=>{s.r(h),s.d(h,{ClinicFindModule:()=>$});var g=s(6814),m=s(1896),u=s(5861),b=s(1653),y=s(3519),T=s.n(y),t=s(5879),S=s(7344),U=s(7700),M=s(617),f=s(9157),O=s(8525),q=s(3680);function F(o,l){if(1&o&&(t.TgZ(0,"mat-option",12),t._uU(1),t.qZA()),2&o){const n=l.$implicit;t.Q6J("value",n),t.xp6(1),t.Oqu(n)}}function D(o,l){if(1&o&&(t.TgZ(0,"mat-option",12),t._uU(1),t.qZA()),2&o){const n=l.$implicit;t.Q6J("value",n),t.xp6(1),t.Oqu(n)}}function k(o,l){if(1&o&&(t.TgZ(0,"mat-option",12),t._uU(1),t.qZA()),2&o){const n=l.$implicit;t.Q6J("value",n),t.xp6(1),t.Oqu(n)}}function Y(o,l){if(1&o){const n=t.EpF();t.TgZ(0,"div",14)(1,"div",15)(2,"div",16)(3,"h1"),t._uU(4),t.qZA()(),t.TgZ(5,"div",17)(6,"div",18)(7,"div",19),t._UZ(8,"img",20),t.qZA(),t.TgZ(9,"div",21)(10,"div",22)(11,"h1"),t._uU(12),t.qZA()(),t.TgZ(13,"div",22)(14,"mat-icon"),t._uU(15,"person"),t.qZA(),t.TgZ(16,"h2"),t._uU(17),t.qZA()(),t.TgZ(18,"div",22)(19,"mat-icon"),t._uU(20," sentiment_satisfied_alt"),t.qZA(),t.TgZ(21,"h2"),t._uU(22),t.qZA()(),t.TgZ(23,"div",22)(24,"mat-icon"),t._uU(25,"schedule"),t.qZA(),t.TgZ(26,"h1"),t._uU(27),t.qZA()(),t.TgZ(28,"div",22)(29,"mat-icon"),t._uU(30,"date_range"),t.qZA(),t.TgZ(31,"h2"),t._uU(32),t.qZA()(),t.TgZ(33,"div",22)(34,"mat-icon"),t._uU(35,"today"),t.qZA(),t.TgZ(36,"h2",23),t._uU(37),t.qZA()(),t.TgZ(38,"button",24),t.NdJ("click",function(){const a=t.CHM(n).$implicit,c=t.oxw(2);return t.KtG(c.popSeeMoreDetails(a.id))}),t.TgZ(39,"span"),t._uU(40,"Update Appointment"),t.qZA(),t.O4$(),t.TgZ(41,"svg",25),t._UZ(42,"path",26),t.qZA()()()()()()()}if(2&o){const n=l.$implicit,e=t.oxw(2);t.xp6(4),t.hij("",n.aName," Appointment"),t.xp6(8),t.Oqu(n.aName),t.xp6(5),t.AsE("",n.firstname," ",n.lastname,""),t.xp6(5),t.Oqu(n.aService),t.xp6(5),t.Oqu(n.aTime),t.xp6(5),t.AsE("",e.formatDate(n.aDate)," - ",n.aSchedule,""),t.xp6(4),t.Q6J("ngClass",e.getStatusColorClass(n.status)),t.xp6(1),t.Oqu(n.status)}}function w(o,l){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,Y,43,10,"div",13),t.qZA()),2&o){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",n.filteredAppointments)}}function N(o,l){1&o&&(t.TgZ(0,"div")(1,"div",27),t._UZ(2,"img",28),t.qZA(),t.TgZ(3,"div",29)(4,"h1"),t._uU(5,"No appointments found"),t.qZA(),t.TgZ(6,"h2"),t._uU(7,"Select a status from the dropdown to filter appointments."),t.qZA()()())}const J=[{path:"",component:(()=>{class o{constructor(n,e,i){this.supabaseService=n,this.router=e,this.dialog=i,this.appointments=[],this.filteredAppointments=[],this.selectedStatus="all",this.selectedMonth="all",this.selectedDay="all",this.selectedYear="all",this.uniqueMonths=[],this.uniqueDays=[],this.uniqueYears=[],this.redirectionPerformed=!1}ngOnInit(){var n=this;return(0,u.Z)(function*(){yield n.fetchAppointments(),n.initializeDates(),n.filterAppointments(),n.loadAcceptedClinic()})()}loadAcceptedClinic(){var n=this;return(0,u.Z)(function*(){try{const e=n.supabaseService.getClinicAuthStateSnapshot();if(e){const{data:i,error:a}=yield n.supabaseService.getSupabase().from("clinic_users_tbl").select("*").eq("email",e.email);if(a)console.error("Error fetching user data:",a);else if(i&&i.length>0){const c=i[0].id,{data:r,error:p}=yield n.supabaseService.getSupabase().from("admin_clinic_tbl").select("*").eq("adUsers_id",c),{data:d,error:C}=yield n.supabaseService.getSupabase().from("clinic_tbl").select("*").eq("cUsers_id",c);!p&&r&&0===r.length&&!C&&d&&0===d.length?(n.router.navigate(["/clinic/onboarding"]),console.log("Clinic data found:",d),console.log("Admin data found:",r)):(console.log("Clinic data found:",d),console.log("Admin data found:",r)),n.redirectionPerformed=!0}else console.error("No user data found for the logged-in user.")}else console.error("No logged-in user found.")}catch(e){console.error("Error:",e),T().fire({icon:"error",title:"Error",text:"An error occurred while loading the clinic. Please try again."})}})()}fetchAppointments(){var n=this;return(0,u.Z)(function*(){try{const e=n.supabaseService.getClinicAuthStateSnapshot();if(e){const{data:i,error:a}=yield n.supabaseService.getSupabase().from("clinic_users_tbl").select("id").eq("email",e.email);if(a)console.error("Error fetching clinic user data:",a);else if(i&&i.length>0){const c=i[0].id,{data:r,error:p}=yield n.supabaseService.getSupabase().from("clinic_tbl").select("id").eq("cUsers_id",c);if(p)console.error("Error fetching clinics data:",p);else for(const d of r){const C=d.id,{data:P,error:v}=yield n.supabaseService.getSupabase().from("appointment_tbl").select("*").eq("aClinic_id",C);if(v)console.error("Error fetching clinic appointments:",v);else{for(const _ of P||[]){const A=_.aUsers_id,{data:R,error:Z}=yield n.supabaseService.getSupabase().from("users_tbl").select("firstname").eq("id",A),{data:B,error:x}=yield n.supabaseService.getSupabase().from("users_tbl").select("lastname").eq("id",A);Z||x?console.error("Error fetching user data:",Z||x):(_.firstname=R[0]?.firstname,_.lastname=B[0]?.lastname)}n.appointments=n.appointments.concat(P||[])}}}else console.error("No clinic user data found for the logged-in clinic user.")}else console.warn("No logged-in clinic user found.")}catch(e){console.error("Error:",e)}})()}initializeDates(){this.uniqueMonths=Array.from({length:12},(n,e)=>new Date(2022,e+1-1,1).toLocaleString("en-US",{month:"long"})),this.uniqueDays=Array.from({length:31},(n,e)=>(e+1).toString()),this.uniqueYears=Array.from({length:28},(n,e)=>(2023+e).toString())}filterAppointments(){console.log("Selected Status:",this.selectedStatus),console.log("Selected Date:",this.selectedMonth,this.selectedDay,this.selectedYear),this.filteredAppointments=this.appointments.filter(n=>{let e=!0,i=!0;if("all"!==this.selectedStatus)switch(this.selectedStatus){case"pending":e="Your appointment status is pending"===n.status;break;case"accepted":e="Your Appointment has been Approved"===n.status;break;case"rejected":e="Your appointment has been Rejected"===n.status;break;default:e=!0}if("all"!==this.selectedMonth||"all"!==this.selectedDay||"all"!==this.selectedYear){const a=new Date(n.aDate),c="all"!==this.selectedMonth?new Date(this.selectedMonth+" 1, 2000").getMonth():void 0,r="all"!==this.selectedDay?parseInt(this.selectedDay):void 0,p="all"!==this.selectedYear?parseInt(this.selectedYear):void 0;void 0!==c&&a.getMonth()!==c&&(i=!1),void 0!==r&&a.getDate()!==r&&(i=!1),void 0!==p&&a.getFullYear()!==p&&(i=!1)}return e&&i})}getStatusColorClass(n){switch(n){case"Your appointment status is pending":return"yellow-status";case"Your Appointment has been approved":return"green-status";case"Your Appointment is Cancelled":return"red-status";default:return""}}popSeeMoreDetails(n){this.dialog.open(b.v,{width:"500px",height:"auto",data:{clinic:n}}).afterClosed().subscribe(i=>{})}formatDate(n){const e=new Date(n);return`${e.getFullYear()}-${("0"+(e.getMonth()+1)).slice(-2)}-${("0"+e.getDate()).slice(-2)}`}static#t=this.\u0275fac=function(e){return new(e||o)(t.Y36(S.T),t.Y36(m.F0),t.Y36(U.uw))};static#n=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-clinic-find"]],decls:41,vars:9,consts:[[1,"appointments"],[1,"filtering"],[1,"status-filter"],["appearance","outline"],[3,"value","valueChange","selectionChange"],["value","all"],["value","Your appointment status is pending"],["value","Your Appointment has been approved"],["value","Your Appointment is Cancelled"],[1,"filter"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"value"],["class","appointment-list",4,"ngFor","ngForOf"],[1,"appointment-list"],[1,"make-appointment-container"],[1,"title",2,"background-color","#3f51b5"],[1,"clinic-details",2,"background-image","url('assets/bg.png')"],[1,"details-container"],[1,"details-logo-container"],["src","assets/logo.png","alt","logo.png"],[1,"details-txt-container"],[1,"icons"],[3,"ngClass"],[3,"click"],["viewBox","-5 -5 110 110","preserveAspectRatio","none","aria-hidden","true"],["d","M0,0 C0,0 100,0 100,0 C100,0 100,100 100,100 C100,100 0,100 0,100 C0,100 0,0 0,0"],[1,"no-data"],["src","assets/appointment.svg","alt",""],[1,"no-data-txt"]],template:function(e,i){1&e&&(t.TgZ(0,"body")(1,"h1",0),t._uU(2,"Clinic Appointments"),t.qZA(),t.TgZ(3,"div",1)(4,"div",2)(5,"mat-form-field",3)(6,"mat-label"),t._uU(7,"Filter by Status"),t.qZA(),t.TgZ(8,"mat-select",4),t.NdJ("valueChange",function(c){return i.selectedStatus=c})("selectionChange",function(){return i.filterAppointments()}),t.TgZ(9,"mat-option",5),t._uU(10,"All"),t.qZA(),t.TgZ(11,"mat-option",6),t._uU(12,"Pending"),t.qZA(),t.TgZ(13,"mat-option",7),t._uU(14,"Accepted"),t.qZA(),t.TgZ(15,"mat-option",8),t._uU(16,"Rejected"),t.qZA()()()(),t.TgZ(17,"div",9)(18,"mat-form-field",3)(19,"mat-label"),t._uU(20,"Filter by Month"),t.qZA(),t.TgZ(21,"mat-select",4),t.NdJ("valueChange",function(c){return i.selectedMonth=c})("selectionChange",function(){return i.filterAppointments()}),t.TgZ(22,"mat-option",5),t._uU(23,"All"),t.qZA(),t.YNc(24,F,2,2,"mat-option",10),t.qZA()(),t.TgZ(25,"mat-form-field",3)(26,"mat-label"),t._uU(27,"Filter by Day"),t.qZA(),t.TgZ(28,"mat-select",4),t.NdJ("valueChange",function(c){return i.selectedDay=c})("selectionChange",function(){return i.filterAppointments()}),t.TgZ(29,"mat-option",5),t._uU(30,"All"),t.qZA(),t.YNc(31,D,2,2,"mat-option",10),t.qZA()(),t.TgZ(32,"mat-form-field",3)(33,"mat-label"),t._uU(34,"Filter by Year"),t.qZA(),t.TgZ(35,"mat-select",4),t.NdJ("valueChange",function(c){return i.selectedYear=c})("selectionChange",function(){return i.filterAppointments()}),t.TgZ(36,"mat-option",5),t._uU(37,"All"),t.qZA(),t.YNc(38,k,2,2,"mat-option",10),t.qZA()()()(),t.YNc(39,w,2,1,"div",11),t.YNc(40,N,8,0,"div",11),t.qZA()),2&e&&(t.xp6(8),t.Q6J("value",i.selectedStatus),t.xp6(13),t.Q6J("value",i.selectedMonth),t.xp6(3),t.Q6J("ngForOf",i.uniqueMonths),t.xp6(4),t.Q6J("value",i.selectedDay),t.xp6(3),t.Q6J("ngForOf",i.uniqueDays),t.xp6(4),t.Q6J("value",i.selectedYear),t.xp6(3),t.Q6J("ngForOf",i.uniqueYears),t.xp6(1),t.Q6J("ngIf",i.filteredAppointments&&i.filteredAppointments.length>0),t.xp6(1),t.Q6J("ngIf",!i.filteredAppointments||0===i.filteredAppointments.length))},dependencies:[g.mk,g.sg,g.O5,M.Hw,f.KE,f.hX,O.gD,q.ey],styles:["body[_ngcontent-%COMP%]{background-color:#fafafa;height:100%;margin:0}.appointments[_ngcontent-%COMP%]{text-align:center;font-size:30px;font-weight:700;margin-top:30px}.filtering[_ngcontent-%COMP%]{display:flex;justify-content:center}.status-filter[_ngcontent-%COMP%]{margin-right:5rem}.filter[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:20px}.appointment-list[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:3%}.appointment-list[_ngcontent-%COMP%]   .make-appointment-container[_ngcontent-%COMP%]{width:60%;border:1px solid #ddd;border-radius:8px;overflow:hidden;box-shadow:0 4px 8px #0000001a;margin-bottom:16px;position:relative}.appointment-list[_ngcontent-%COMP%]   .make-appointment-container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{background-color:#f2f2f2;padding:12px}.appointment-list[_ngcontent-%COMP%]   .make-appointment-container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;color:#fff}.appointment-list[_ngcontent-%COMP%]   .make-appointment-container[_ngcontent-%COMP%]   .clinic-details[_ngcontent-%COMP%]   .details-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;justify-content:center}.appointment-list[_ngcontent-%COMP%]   .make-appointment-container[_ngcontent-%COMP%]   .clinic-details[_ngcontent-%COMP%]   .details-logo-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:120px;height:auto;margin-right:30px}.appointment-list[_ngcontent-%COMP%]   .make-appointment-container[_ngcontent-%COMP%]   .clinic-details[_ngcontent-%COMP%]   .details-txt-container[_ngcontent-%COMP%]{width:60%;padding:12px;margin-bottom:3em}.appointment-list[_ngcontent-%COMP%]   .make-appointment-container[_ngcontent-%COMP%]   .clinic-details[_ngcontent-%COMP%]   .details-txt-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:12px;font-size:1.2rem;color:#fff}.appointment-list[_ngcontent-%COMP%]   .make-appointment-container[_ngcontent-%COMP%]   .clinic-details[_ngcontent-%COMP%]   .details-txt-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:12px 0;font-size:1rem;color:#fff}.appointment-list[_ngcontent-%COMP%]   .make-appointment-container[_ngcontent-%COMP%]   .clinic-details[_ngcontent-%COMP%]   .details-txt-container[_ngcontent-%COMP%]   p.yellow-status[_ngcontent-%COMP%], .appointment-list[_ngcontent-%COMP%]   .make-appointment-container[_ngcontent-%COMP%]   .clinic-details[_ngcontent-%COMP%]   .details-txt-container[_ngcontent-%COMP%]   p.green-status[_ngcontent-%COMP%], .appointment-list[_ngcontent-%COMP%]   .make-appointment-container[_ngcontent-%COMP%]   .clinic-details[_ngcontent-%COMP%]   .details-txt-container[_ngcontent-%COMP%]   p.red-status[_ngcontent-%COMP%]{font-weight:700;font-size:1.5rem}.appointment-list[_ngcontent-%COMP%]   .make-appointment-container[_ngcontent-%COMP%]   .clinic-details[_ngcontent-%COMP%]   .details-txt-container[_ngcontent-%COMP%]   p.yellow-status[_ngcontent-%COMP%]{color:#ff0}.appointment-list[_ngcontent-%COMP%]   .make-appointment-container[_ngcontent-%COMP%]   .clinic-details[_ngcontent-%COMP%]   .details-txt-container[_ngcontent-%COMP%]   p.green-status[_ngcontent-%COMP%]{color:green}.appointment-list[_ngcontent-%COMP%]   .make-appointment-container[_ngcontent-%COMP%]   .clinic-details[_ngcontent-%COMP%]   .details-txt-container[_ngcontent-%COMP%]   p.red-status[_ngcontent-%COMP%]{color:red}.appointment-list[_ngcontent-%COMP%]   .make-appointment-container[_ngcontent-%COMP%]   .clinic-details[_ngcontent-%COMP%]   .details-txt-container[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]{display:flex;color:#fff}.appointment-list[_ngcontent-%COMP%]   .make-appointment-container[_ngcontent-%COMP%]   .clinic-details[_ngcontent-%COMP%]   .details-txt-container[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin:5px 5px 5px 0}.appointment-list[_ngcontent-%COMP%]   .make-appointment-container[_ngcontent-%COMP%]   .clinic-details[_ngcontent-%COMP%]   .details-txt-container[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:3px}.appointment-list[_ngcontent-%COMP%]   .make-appointment-container[_ngcontent-%COMP%]   .clinic-details[_ngcontent-%COMP%]   .update-btn[_ngcontent-%COMP%]{background-color:#3f51b5;color:#fff;display:flex}.appointment-list[_ngcontent-%COMP%]   .make-appointment-container[_ngcontent-%COMP%]   .clinic-details[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{appearance:none;background:transparent;border:0;color:#fff;cursor:pointer;font:inherit;font-weight:500;line-height:1;padding:1em 1.5em;position:absolute;bottom:1em;left:50%;border-radius:10px;transform:translate(-50%);transition:filter var(--motion-duration),transform var(--motion-duration) var(--motion-ease)}.appointment-list[_ngcontent-%COMP%]   .make-appointment-container[_ngcontent-%COMP%]   .clinic-details[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{filter:brightness(1.1);transform:translate(-50%) scale(1.05)}.appointment-list[_ngcontent-%COMP%]   .make-appointment-container[_ngcontent-%COMP%]   .clinic-details[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{filter:brightness(.9);transform:translate(-50%) scale(.95)}.appointment-list[_ngcontent-%COMP%]   .make-appointment-container[_ngcontent-%COMP%]   .clinic-details[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{display:block;position:relative;z-index:1;transition:transform var(--motion-duration) var(--motion-ease)}.appointment-list[_ngcontent-%COMP%]   .make-appointment-container[_ngcontent-%COMP%]   .clinic-details[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] > svg[_ngcontent-%COMP%]{fill:#3f51b5;position:absolute;top:-5%;left:-5%;width:110%;height:110%;transition:var(--motion-duration) var(--motion-ease)}.appointment-list[_ngcontent-%COMP%]   .make-appointment-container[_ngcontent-%COMP%]   .clinic-details[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] > svg[_ngcontent-%COMP%] > path[_ngcontent-%COMP%]{transition:var(--motion-duration) var(--motion-ease)}@media screen and (max-width: 600px){.appointment-list[_ngcontent-%COMP%]   .make-appointment-container[_ngcontent-%COMP%]{width:90%}.appointment-list[_ngcontent-%COMP%]   .make-appointment-container[_ngcontent-%COMP%]   .details-logo-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px;margin-right:0}.appointment-list[_ngcontent-%COMP%]   .make-appointment-container[_ngcontent-%COMP%]   .details-txt-container[_ngcontent-%COMP%]{width:100%;margin-top:20px}}.no-data[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center}.no-data[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40%;height:auto}.no-data-txt[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-top:20px}@media screen and (max-width: 769px){.no-data[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:90%;height:auto}.no-data-txt[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px}.no-data-txt[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:14px}}"]})}return o})()}];let E=(()=>{class o{static#t=this.\u0275fac=function(e){return new(e||o)};static#n=this.\u0275mod=t.oAB({type:o});static#e=this.\u0275inj=t.cJS({imports:[m.Bz.forChild(J),m.Bz]})}return o})();var Q=s(2296),z=s(5195),j=s(8034),I=s(6223);let $=(()=>{class o{static#t=this.\u0275fac=function(e){return new(e||o)};static#n=this.\u0275mod=t.oAB({type:o});static#e=this.\u0275inj=t.cJS({imports:[g.ez,E,M.Ps,Q.ot,z.QW,O.LD,f.lN,j.FA,I.u5]})}return o})()}}]);