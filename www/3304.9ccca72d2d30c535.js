"use strict";(self.webpackChunkKonektobet=self.webpackChunkKonektobet||[]).push([[3304],{3304:(x,v,i)=>{i.d(v,{X:()=>w});var t=i(5861),o=i(6223),h=i(3519),P=i.n(h),b=i(5505),_=i(2157),O=i(9632),e=i(5879),c=i(7344),l=i(7700),d=i(6814),p=i(9157),g=i(2296),M=i(2032),T=i(8525),Z=i(3680),I=i(617);function A(y,S){1&y&&(e.TgZ(0,"mat-error"),e._uU(1," Please enter a valid weight. "),e.qZA())}function D(y,S){1&y&&(e.TgZ(0,"mat-error"),e._uU(1," Please enter a valid height. "),e.qZA())}let w=(()=>{class y{constructor(r,n,a,s,u){this.formBuilder=r,this.supabaseService=n,this.dialogRef=a,this.dialog=s,this.datePipe=u,this.images=[],this.currentImageIndex=0,this.url="",this.showChooseFile=!1,this.isEmailEditable=!1,this.profilePicture=null,this.coverPicture=null,this.vaxPicture=null,this.pets=[]}ngOnInit(){this.petForm=this.formBuilder.group({petName:["",o.kI.required],petAge:["",[o.kI.required,o.kI.pattern("^[0-9]+$")]],petSex:["",o.kI.required],petBreed:["",o.kI.required],petType:["",o.kI.required],petBday:["",o.kI.required],petWeight:["",[o.kI.required,o.kI.pattern("^[0-9]+$")]],petHeight:["",[o.kI.required,o.kI.pattern("^[0-9]+$")]]}),this.petForm.get("petBday").valueChanges.subscribe(r=>{this.calculateAge(r)}),this.loadPets()}onClose(){this.dialogRef.close()}loadPets(){var r=this;return(0,t.Z)(function*(){try{const n=r.supabaseService.getAuthStateSnapshot();if(n){const{data:a,error:s}=yield r.supabaseService.getSupabase().from("users_tbl").select("id").eq("email",n.email);if(s)console.error("Error fetching user data:",s);else if(a&&a.length>0){const u=a[0].id,{data:m,error:f}=yield r.supabaseService.getSupabase().from("pets_tbl").select("*").eq("pUsers_id",u);f?console.error("Error fetching pet data:",f):r.pets=m||[]}else console.error("No user data found for the logged-in user.")}else console.error("No logged-in user found.")}catch(n){console.error("Error:",n)}})()}addPet(){var r=this;return(0,t.Z)(function*(){if(r.petForm.valid)try{const n=r.supabaseService.getAuthStateSnapshot();if(n){const{data:a,error:s}=yield r.supabaseService.getSupabase().from("users_tbl").select("id").eq("email",n.email);if(s)console.error("Error fetching user data:",s);else if(a&&a.length>0){const u={...r.petForm.value,pUsers_id:a[0].id,petBday:r.formatDate(r.petForm.value.petBday)},{data:m,error:f}=yield r.supabaseService.getSupabase().from("pets_tbl").insert([u]);yield r.loadPets(),f?(console.error("Error inserting pet:",f),P().fire({icon:"error",title:"Error",text:"An error occurred while adding the pet. Please try again."})):(console.log("Pet added successfully:",m),P().fire({icon:"success",title:"Pet Added!",text:"Creating your pet profile success"}),r.dialogRef.close(u))}else console.error("No user data found for the logged-in user.")}else console.error("No logged-in user found.")}catch(n){console.error("Error:",n),P().fire({icon:"error",title:"Error",text:"An error occurred while adding the pet. Please try again."})}})()}formatDate(r){const[n,a,s]=r.split("-");return`${n}/${a}/${s}`}uploadImage(){var r=this;return(0,t.Z)(function*(){r.dialog.open(b.I,{width:"45%",height:"auto"}).afterClosed().subscribe(a=>{a&&(r.vaxPicture=a)})})()}uploadProfile(){this.dialog.open(_.c,{width:"45%",height:"auto"}).afterClosed().subscribe(n=>{n&&(this.profilePicture=n)})}uploadCover(){var r=this;return(0,t.Z)(function*(){r.dialog.open(O.d,{width:"45%",height:"auto"}).afterClosed().subscribe(a=>{a&&r.addPetCover(a).then(()=>{r.coverPicture=URL.createObjectURL(a)}).catch(s=>{console.error("Error uploading cover picture:",s)})})})()}calculateAge(r){if(!r)return void this.petForm.get("petAge").setValue("");const n=new Date,a=new Date(r);let s=n.getFullYear()-a.getFullYear();const u=n.getMonth()-a.getMonth();(u<0||0===u&&n.getDate()<a.getDate())&&s--,this.petForm.get("petAge").setValue(s)}addVaxCard(r){var n=this;return(0,t.Z)(function*(){if(r){const a=n.supabaseService.getAuthStateSnapshot();if(a){const{data:s,error:u}=yield n.supabaseService.getSupabase().from("users_tbl").select("id").eq("email",a.email).single();if(u)return void console.error("Error fetching user data:",u);if(s){const m=s.id,f=n.petForm.get("petName")?.value,E=`${m}_${f}_${Date.now()}_vaxCard`,{data:U,error:C}=yield n.supabaseService.getSupabase().storage.from("vaxCard").upload(E,r,{cacheControl:"3600",upsert:!0});if(C)return void console.error("Error uploading new image:",C);console.log("Pet Vax Card uploaded successfully:",U)}}}else console.error("No file provided.")})()}addPetProfile(r){var n=this;return(0,t.Z)(function*(){if(r){const a=n.supabaseService.getAuthStateSnapshot();if(a){const{data:s,error:u}=yield n.supabaseService.getSupabase().from("users_tbl").select("id").eq("email",a.email).single();if(u)return void console.error("Error fetching user data:",u);if(s){const m=s.id,f=n.petForm.get("petName")?.value,E=`${m}_${f}_${Date.now()}_petProfile`,{data:U,error:C}=yield n.supabaseService.getSupabase().storage.from("petProfile").upload(E,r,{cacheControl:"3600",upsert:!0});if(C)return void console.error("Error uploading new image:",C);console.log("Pet Profile uploaded successfully:",U)}}}else console.error("No file provided.")})()}addPetCover(r){var n=this;return(0,t.Z)(function*(){if(r){const a=n.supabaseService.getAuthStateSnapshot();if(a){const{data:s,error:u}=yield n.supabaseService.getSupabase().from("users_tbl").select("id").eq("email",a.email).single();if(u)return void console.error("Error fetching user data:",u);if(s){const m=s.id,f=n.petForm.get("petName")?.value,E=`${m}_${f}_${Date.now()}_petCover`,{data:U,error:C}=yield n.supabaseService.getSupabase().storage.from("petCover").upload(E,r,{cacheControl:"3600",upsert:!0});if(C)return void console.error("Error uploading new image:",C);console.log("Pet Cover uploaded successfully:",U)}}}else console.error("No file provided.")})()}getImageUrl(r){if(r instanceof Blob){const n=new FileReader;n.readAsDataURL(r),n.onload=()=>n.result}return null}onSelectProfile(r){var n=this;return(0,t.Z)(function*(){if(r.target.files){n.file=r.target.files[0];const a=n.supabaseService.getAuthStateSnapshot();if(a)try{const{data:s,error:u}=yield n.supabaseService.getSupabase().from("users_tbl").select("id").eq("email",a.email).single();if(u)throw new Error("Error fetching user data");if(!s)throw new Error("User data not found");const m=s.id,f=n.petForm.get("petName")?.value,E=`${m}_${f}_petProfile_${Date.now()}`,{error:C}=yield n.supabaseService.getSupabase().storage.from("petProfile").list();if(C)throw new Error("Error fetching current image");const{data:R,error:N}=yield n.supabaseService.getSupabase().storage.from("petProfile").upload(E,n.file,{cacheControl:"3600",upsert:!1});if(N)throw new Error("Error uploading new image");console.log("Pet profile uploaded successfully:",R),n.fetchAllImages()}catch(s){console.error("Error uploading pet profile picture:",s)}}})()}fetchAllImages(){var r=this;return(0,t.Z)(function*(){if(r.supabaseService.getAuthStateSnapshot())try{const{data:a,error:s}=yield r.supabaseService.getSupabase().storage.from("petProfile").list();if(s)throw new Error("Error fetching images");r.images=a.sort((u,m)=>m.created_at.localeCompare(u.created_at)).map(u=>u.name),yield r.displayCurrentImage()}catch(a){console.error("Error fetching images:",a)}})()}fetchImage(r){var n=this;return(0,t.Z)(function*(){console.log("Fetching image:",r);try{const{data:a,error:s}=yield n.supabaseService.getSupabase().storage.from("petProfile").download(r);if(s)throw new Error("Error fetching image");a?n.url=URL.createObjectURL(a):(console.error("Image not found:",r),n.url="assets/addPhoto.png")}catch(a){console.error("Error fetching image:",a),n.url="assets/addPhoto.png"}})()}displayCurrentImage(){var r=this;return(0,t.Z)(function*(){const n=r.supabaseService.getAuthStateSnapshot();if(n)try{const{data:a,error:s}=yield r.supabaseService.getSupabase().from("users_tbl").select("id").eq("email",n.email).single();if(s)throw new Error("Error fetching user data");if(!a)throw new Error("User data not found");const u=a.id,m=r.petForm.get("petName")?.value,f=`${u}_${m}_petProfile_${Date.now()}`;try{yield r.fetchImage(f)}catch(E){console.error("Error fetching profile picture:",E),r.url="assets/addPhoto.png"}}catch(a){console.error("Error fetching user data:",a)}})()}extractTimestamp(r){const n=r.match(/_(\d+)_/);return n?parseInt(n[1],10):0}static#e=this.\u0275fac=function(n){return new(n||y)(e.Y36(o.qu),e.Y36(c.T),e.Y36(l.so),e.Y36(l.uw),e.Y36(d.uU))};static#t=this.\u0275cmp=e.Xpm({type:y,selectors:[["app-add-pet"]],decls:69,vars:4,consts:[[1,"outer-container"],[1,"form-container",3,"formGroup","ngSubmit"],[1,"inner-container"],[1,"title"],["mat-dialog-title","",1,"add-title"],["mat-icon-button","",1,"close-icon",3,"click"],["mat-dialog-content","",1,"details-container"],[1,"row1"],[1,"name"],["appearance","outline"],["matInput","","formControlName","petName"],[1,"bday"],["type","date","matInput","","formControlName","petBday"],[1,"age"],["matInput","","formControlName","petAge",3,"readonly"],[1,"sex"],["disableRipple","","formControlName","petSex"],["value","Male"],["value","Female"],[1,"breed"],["matInput","","formControlName","petBreed"],[1,"type"],["disableRipple","","formControlName","petType"],["value","Dog"],["value","Cat"],[1,"weight"],["matInput","","formControlName","petWeight","type","number"],[4,"ngIf"],[1,"height"],["matInput","","formControlName","petHeight","type","number"],[1,"add-pet-btn"],["mat-raised-button","","type","submit","color","primary",1,"submit"],["mat-raised-button","","color","primary",3,"click"]],template:function(n,a){if(1&n&&(e.TgZ(0,"div",0)(1,"form",1),e.NdJ("ngSubmit",function(){return a.addPet()}),e.TgZ(2,"div",2)(3,"div",3)(4,"h1",4),e._uU(5,"Pet Registration"),e.qZA(),e.TgZ(6,"button",5),e.NdJ("click",function(){return a.onClose()}),e.TgZ(7,"mat-icon"),e._uU(8,"close"),e.qZA()()(),e.TgZ(9,"div",6)(10,"div",7)(11,"div",8)(12,"mat-form-field",9)(13,"mat-label"),e._uU(14,"Name"),e.qZA(),e._UZ(15,"input",10),e.qZA()(),e.TgZ(16,"div",11)(17,"mat-form-field",9)(18,"mat-label"),e._uU(19,"Birthdate"),e.qZA(),e._UZ(20,"input",12),e.qZA()()(),e.TgZ(21,"div",7)(22,"div",13)(23,"mat-form-field",9)(24,"mat-label"),e._uU(25,"Age"),e.qZA(),e._UZ(26,"input",14),e.qZA()(),e.TgZ(27,"div",15)(28,"mat-form-field",9)(29,"mat-label"),e._uU(30,"Sex"),e.qZA(),e.TgZ(31,"mat-select",16)(32,"mat-option",17),e._uU(33,"Male"),e.qZA(),e.TgZ(34,"mat-option",18),e._uU(35,"Female"),e.qZA()()()()(),e.TgZ(36,"div",7)(37,"div",19)(38,"mat-form-field",9)(39,"mat-label"),e._uU(40,"Breed"),e.qZA(),e._UZ(41,"input",20),e.qZA()(),e.TgZ(42,"div",21)(43,"mat-form-field",9)(44,"mat-label"),e._uU(45,"Type"),e.qZA(),e.TgZ(46,"mat-select",22)(47,"mat-option",23),e._uU(48,"Dog"),e.qZA(),e.TgZ(49,"mat-option",24),e._uU(50,"Cat"),e.qZA()()()()(),e.TgZ(51,"div",7)(52,"div",25)(53,"mat-form-field",9)(54,"mat-label"),e._uU(55,"Weight(kg)"),e.qZA(),e._UZ(56,"input",26),e.YNc(57,A,2,0,"mat-error",27),e.qZA()(),e.TgZ(58,"div",28)(59,"mat-form-field",9)(60,"mat-label"),e._uU(61,"Height(m)"),e.qZA(),e._UZ(62,"input",29),e.YNc(63,D,2,0,"mat-error",27),e.qZA()()(),e.TgZ(64,"div",30)(65,"button",31),e._uU(66,"Submit"),e.qZA(),e.TgZ(67,"button",32),e.NdJ("click",function(){return a.onClose()}),e._uU(68,"Cancel"),e.qZA()()()()()()),2&n){let s,u;e.xp6(1),e.Q6J("formGroup",a.petForm),e.xp6(25),e.Q6J("readonly",!a.isEmailEditable),e.xp6(31),e.Q6J("ngIf",null==(s=a.petForm.get("petWeight"))?null:s.invalid),e.xp6(6),e.Q6J("ngIf",null==(u=a.petForm.get("petHeight"))?null:u.invalid)}},dependencies:[d.O5,o._Y,o.Fj,o.wV,o.JJ,o.JL,o.sg,o.u,p.KE,p.hX,p.TO,g.lW,g.RK,M.Nt,T.gD,Z.ey,I.Hw],styles:[".outer-container[_ngcontent-%COMP%]{width:100%}.add-title[_ngcontent-%COMP%]{font-weight:500}.title[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.title[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:-20px}.inner-container[_ngcontent-%COMP%]{padding:30px}.form-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;flex-direction:column}.form-container1[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;flex-direction:column;width:70%}.details-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.add-clinic-btn[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:0 0 30px}.containers[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:space-around}.service-container[_ngcontent-%COMP%], .healthcare-container[_ngcontent-%COMP%], .sched-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:center;margin-top:35px;padding:0 24px 9px}.container-title[_ngcontent-%COMP%]{display:flex;justify-content:center}.box[_ngcontent-%COMP%]{display:flex;width:300px;height:70%;border:1px solid #f5f5f5;background-color:#f5f5f5;border-radius:20px;box-sizing:border-box;margin:0 0 90px;flex-wrap:wrap;flex-direction:column}.add-pet-btn[_ngcontent-%COMP%]{display:flex;justify-content:flex-start}.add-pet-btn[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]{margin-right:30px}.row1[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;width:100%;gap:20px}.vaccination-container[_ngcontent-%COMP%]{width:100%;height:200px;background-color:#f5f5f5;display:flex;justify-content:center;align-items:center;cursor:pointer;overflow:hidden}.addPhoto[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:200px;display:block}.addPhoto[_ngcontent-%COMP%]{width:100%;height:200px;position:relative;display:flex;align-items:center;justify-content:center}.pet-profile[_ngcontent-%COMP%]{width:120px;height:120px;background-color:#f5f5f5;display:flex;justify-content:center;align-items:center;border-radius:50%;border:3px solid #3f51bf;margin:-10% 0 30px;cursor:pointer;overflow:hidden;z-index:1}.addProfile[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;display:block}.addProfile[_ngcontent-%COMP%]{width:100%;height:100%;position:relative}.pet-cover[_ngcontent-%COMP%]{width:100%;height:200px;background-color:#f5f5f5;display:flex;justify-content:center;align-items:center;cursor:pointer;overflow:hidden}.addCover[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;display:block}.addCover[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;display:flex;align-items:center;justify-content:center}"]})}return y})()},9632:(x,v,i)=>{i.d(v,{d:()=>b});var t=i(5879),o=i(7700),h=i(2296),P=i(617);let b=(()=>{class _{constructor(e,c){this.dialogRef=e,this.dialog=c,this.selectedImage=null}onClose(){this.dialogRef.close()}onFileSelected(e){const c=e.target.files[0];if(c){if(c.size>2097152)return void alert("File size exceeds the limit of 2MB.");const l=new FileReader;l.onload=d=>{this.selectedImage=d.target?.result},l.readAsDataURL(c)}}submitCover(){this.dialogRef.close(this.selectedImage)}static#e=this.\u0275fac=function(c){return new(c||_)(t.Y36(o.so),t.Y36(o.uw))};static#t=this.\u0275cmp=t.Xpm({type:_,selectors:[["app-upload-cover"]],decls:23,vars:1,consts:[[1,"outer-container"],[1,"inner-container"],[1,"title"],["mat-dialog-title",""],["mat-icon-button","",1,"close-icon",3,"click"],["mat-dialog-content","",1,"upload-container"],["alt","Uploaded Image",2,"max-width","100%","max-height","200px",3,"src"],["type","file","accept","image/*",2,"display","none",3,"change"],["fileInput",""],["mat-raised-button","","color","primary",3,"click"],[1,"buttons"]],template:function(c,l){if(1&c){const d=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3)(4,"strong"),t._uU(5,"Upload Cover Photo"),t.qZA()(),t.TgZ(6,"button",4),t.NdJ("click",function(){return l.onClose()}),t.TgZ(7,"mat-icon"),t._uU(8,"close"),t.qZA()()(),t.TgZ(9,"div",5),t._UZ(10,"img",6),t.TgZ(11,"input",7,8),t.NdJ("change",function(g){return l.onFileSelected(g)}),t.qZA(),t.TgZ(13,"button",9),t.NdJ("click",function(){t.CHM(d);const g=t.MAs(12);return t.KtG(g.click())}),t._uU(14,"Select Image"),t.qZA(),t.TgZ(15,"p")(16,"strong"),t._uU(17,"Maximum size of 2mb"),t.qZA()()(),t.TgZ(18,"div",10)(19,"button",9),t.NdJ("click",function(){return l.submitCover()}),t._uU(20,"Submit"),t.qZA(),t.TgZ(21,"button",9),t.NdJ("click",function(){return l.onClose()}),t._uU(22,"Cancel"),t.qZA()()()()}2&c&&(t.xp6(10),t.Q6J("src",l.selectedImage?l.selectedImage:"assets/upload.png",t.LSH))},dependencies:[h.lW,h.RK,P.Hw],styles:[".inner-container[_ngcontent-%COMP%]{padding:0 30px 30px}.title[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-top:20px}.title[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:-20px}.upload-container[_ngcontent-%COMP%]{border:4px solid #3f51bf;border-style:dashed;width:100%;height:300px;display:flex;align-items:center;justify-content:center;flex-direction:column}.upload-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:150px;height:auto}.upload-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:10px;color:red}.buttons[_ngcontent-%COMP%]{margin-top:20px;width:25%;display:flex;justify-content:space-between}"]})}return _})()},5505:(x,v,i)=>{i.d(v,{I:()=>b});var t=i(5879),o=i(7700),h=i(2296),P=i(617);let b=(()=>{class _{constructor(e,c){this.dialogRef=e,this.dialog=c,this.selectedImage=null}onClose(){this.dialogRef.close()}onFileSelected(e){const c=e.target.files[0];if(c){if(c.size>2097152)return void alert("File size exceeds the limit of 2MB.");const l=new FileReader;l.onload=d=>{this.selectedImage=d.target?.result},l.readAsDataURL(c)}}submitVax(){this.dialogRef.close(this.selectedImage)}static#e=this.\u0275fac=function(c){return new(c||_)(t.Y36(o.so),t.Y36(o.uw))};static#t=this.\u0275cmp=t.Xpm({type:_,selectors:[["app-upload-image"]],decls:23,vars:1,consts:[[1,"outer-container"],[1,"inner-container"],[1,"title"],["mat-dialog-title",""],["mat-icon-button","",1,"close-icon",3,"click"],["mat-dialog-content","",1,"upload-container"],["alt","Uploaded Image",2,"max-width","100%","max-height","200px",3,"src"],["type","file","accept","image/*",2,"display","none",3,"change"],["fileInput",""],["mat-raised-button","","color","primary",3,"click"],[1,"buttons"]],template:function(c,l){if(1&c){const d=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3)(4,"strong"),t._uU(5,"Upload Vaccination Card"),t.qZA()(),t.TgZ(6,"button",4),t.NdJ("click",function(){return l.onClose()}),t.TgZ(7,"mat-icon"),t._uU(8,"close"),t.qZA()()(),t.TgZ(9,"div",5),t._UZ(10,"img",6),t.TgZ(11,"input",7,8),t.NdJ("change",function(g){return l.onFileSelected(g)}),t.qZA(),t.TgZ(13,"button",9),t.NdJ("click",function(){t.CHM(d);const g=t.MAs(12);return t.KtG(g.click())}),t._uU(14,"Select Image"),t.qZA(),t.TgZ(15,"p")(16,"strong"),t._uU(17,"Maximum size of 2mb"),t.qZA()()(),t.TgZ(18,"div",10)(19,"button",9),t.NdJ("click",function(){return l.submitVax()}),t._uU(20,"Submit"),t.qZA(),t.TgZ(21,"button",9),t.NdJ("click",function(){return l.onClose()}),t._uU(22,"Cancel"),t.qZA()()()()}2&c&&(t.xp6(10),t.Q6J("src",l.selectedImage?l.selectedImage:"assets/upload.png",t.LSH))},dependencies:[h.lW,h.RK,P.Hw],styles:[".inner-container[_ngcontent-%COMP%]{padding:0 30px 30px}.title[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-top:20px}.title[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:-20px}.upload-container[_ngcontent-%COMP%]{border:4px solid #3f51bf;border-style:dashed;width:100%;height:300px;display:flex;align-items:center;justify-content:center;flex-direction:column}.upload-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:150px;height:auto}.upload-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:10px;color:red}.buttons[_ngcontent-%COMP%]{margin-top:20px;width:25%;display:flex;justify-content:space-between}"]})}return _})()},2157:(x,v,i)=>{i.d(v,{c:()=>_});var t=i(9602),o=i(5879),h=i(7700),P=i(2296),b=i(617);let _=(()=>{class O{constructor(c,l){this.dialogRef=c,this.dialog=l,this.selectedImage=null}onClose(){this.dialogRef.close()}onFileSelected(c){const l=c.target.files[0];if(l){if(l.size>2097152)return void alert("File size exceeds the limit of 2MB.");const d=new FileReader;d.onload=p=>{const g=p.target?.result;this.convertDataUrlToFile(g,l.name,l.type).then(M=>{this.selectedImage=M}).catch(M=>{console.error("Error converting data URL to file:",M)})},d.readAsDataURL(l)}}convertDataUrlToFile(c,l,d){return fetch(c).then(p=>p.blob()).then(p=>new File([p],l,{type:d}))}openProfilePreviewModal(){this.dialog.open(t.s,{width:"40%",height:"auto",data:{image:this.selectedImage}}).afterClosed().subscribe(l=>{console.log("The profile preview modal was closed")})}submitProfile(){this.dialogRef.close(this.selectedImage)}static#e=this.\u0275fac=function(l){return new(l||O)(o.Y36(h.so),o.Y36(h.uw))};static#t=this.\u0275cmp=o.Xpm({type:O,selectors:[["app-upload-profile"]],decls:28,vars:1,consts:[[1,"outer-container"],[1,"inner-container"],[1,"title"],["mat-dialog-title",""],["mat-icon-button","",1,"close-icon",3,"click"],["mat-dialog-content","",1,"upload-container"],["alt","Uploaded Image",2,"max-width","100%","max-height","200px",3,"src"],["type","file","accept","image/*",2,"display","none",3,"change"],["fileInput",""],["mat-raised-button","","color","primary",3,"click"],["href","https://redketchup.io/image-resizer","target","_blank"],[1,"buttons"]],template:function(l,d){if(1&l){const p=o.EpF();o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3)(4,"strong"),o._uU(5,"Upload Profile Photo"),o.qZA()(),o.TgZ(6,"button",4),o.NdJ("click",function(){return d.onClose()}),o.TgZ(7,"mat-icon"),o._uU(8,"close"),o.qZA()()(),o.TgZ(9,"div",5),o._UZ(10,"img",6),o.TgZ(11,"input",7,8),o.NdJ("change",function(M){return d.onFileSelected(M)}),o.qZA(),o.TgZ(13,"button",9),o.NdJ("click",function(){o.CHM(p);const M=o.MAs(12);return o.KtG(M.click())}),o._uU(14,"Select Image"),o.qZA(),o.TgZ(15,"p")(16,"strong"),o._uU(17,"Maximum size of 2mb"),o.qZA()(),o.TgZ(18,"p")(19,"i"),o._uU(20,"Preferred aspect ratio is 1:1 or square. Crop your image "),o.TgZ(21,"a",10),o._uU(22,"here"),o.qZA()()()(),o.TgZ(23,"div",11)(24,"button",9),o.NdJ("click",function(){return d.submitProfile()}),o._uU(25,"Submit"),o.qZA(),o.TgZ(26,"button",9),o.NdJ("click",function(){return d.onClose()}),o._uU(27,"Cancel"),o.qZA()()()()}2&l&&(o.xp6(10),o.Q6J("src",d.selectedImage?d.selectedImage:"assets/upload.png",o.LSH))},dependencies:[P.lW,P.RK,b.Hw],styles:[".inner-container[_ngcontent-%COMP%]{padding:0 30px 30px}.title[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-top:20px}.title[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:-20px}.upload-container[_ngcontent-%COMP%]{border:4px solid #3f51bf;border-style:dashed;width:100%;height:300px;display:flex;align-items:center;justify-content:center;flex-direction:column}.upload-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:150px;height:auto}.upload-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:10px;color:red}.buttons[_ngcontent-%COMP%]{margin-top:20px;width:25%;display:flex;justify-content:space-between}"]})}return O})()},9602:(x,v,i)=>{i.d(v,{s:()=>O});var t=i(7700),o=i(5879),h=i(6814),P=i(2296),b=i(617);function _(e,c){if(1&e&&o._UZ(0,"img",7),2&e){const l=o.oxw();o.Q6J("src",l.selectedImage,o.LSH)}}let O=(()=>{class e{constructor(l,d){this.dialogRef=l,this.data=d,this.selectedImage=d.image}onClose(){this.dialogRef.close()}static#e=this.\u0275fac=function(d){return new(d||e)(o.Y36(t.so),o.Y36(t.WI))};static#t=this.\u0275cmp=o.Xpm({type:e,selectors:[["app-profile-preview"]],decls:11,vars:1,consts:[[1,"outer-container"],[1,"inner-container"],[1,"title"],["mat-dialog-title",""],["mat-icon-button","",1,"close-icon",3,"click"],["mat-dialog-content","",1,"image-preview-container"],["alt","Profile Image",3,"src",4,"ngIf"],["alt","Profile Image",3,"src"]],template:function(d,p){1&d&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3)(4,"strong"),o._uU(5,"Resize Image"),o.qZA()(),o.TgZ(6,"button",4),o.NdJ("click",function(){return p.onClose()}),o.TgZ(7,"mat-icon"),o._uU(8,"close"),o.qZA()()(),o.TgZ(9,"div",5),o.YNc(10,_,1,1,"img",6),o.qZA()()()),2&d&&(o.xp6(10),o.Q6J("ngIf",p.selectedImage))},dependencies:[h.O5,P.RK,b.Hw],styles:[".inner-container[_ngcontent-%COMP%]{padding:0 30px 30px}.title[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-top:20px}.title[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:-20px}.image-preview-container[_ngcontent-%COMP%]{border:4px solid #3f51bf;border-style:dashed;width:100%;height:300px;display:flex;align-items:center;justify-content:center;overflow:hidden}.image-preview-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;width:auto;height:auto}"]})}return e})()}}]);