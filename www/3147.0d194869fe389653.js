"use strict";(self.webpackChunkKonektobet=self.webpackChunkKonektobet||[]).push([[3147],{3147:(w,g,c)=>{c.r(g),c.d(g,{MakeMatchedAppointmentModule:()=>A});var r=c(6814),p=c(1896),_=c(5861),h=c(7700),O=c(3519),x=c.n(O),t=c(5879),P=c(7344),d=c(2557),u=c(617),m=c(2296);const M=function(i,l){return{selected:i,blue:l}};function S(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"mat-chip",13),t.NdJ("click",function(){const a=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.toggleSelectService(a))}),t._uU(1),t.qZA()}if(2&i){const e=l.$implicit,n=t.oxw();t.Q6J("ngClass",t.WLB(2,M,n.selectedServices.includes(e),n.selectedServices.includes(e))),t.xp6(1),t.hij(" ",e," ")}}function k(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"mat-chip",13),t.NdJ("click",function(){const a=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.toggleSelectSchedule(a))}),t._uU(1),t.qZA()}if(2&i){const e=l.$implicit,n=t.oxw();t.Q6J("ngClass",t.WLB(2,M,n.selectedSchedules.includes(e),n.selectedSchedules.includes(e))),t.xp6(1),t.hij(" ",e," ")}}const v=[{path:"",component:(()=>{class i{constructor(e,n,o,a){this.supabaseService=e,this.router=n,this.dialogRef=o,this.data=a,this.selectedServices=[],this.selectedSchedules=[],this.isFormValid=!1,this.clinic=a.clinic}onClose(){this.dialogRef.close()}onMakeAppointment(){var e=this;return(0,_.Z)(function*(){try{const n=e.supabaseService.getAuthStateSnapshot();if(n){const{data:o,error:a}=yield e.supabaseService.getSupabase().from("users_tbl").select("id").eq("email",n.email);if(a)console.error("Error fetching user data:",a);else if(o&&o.length>0){const{data:s,error:f}=yield e.supabaseService.getSupabase().from("matched_clinics_tbl").select("*").eq("id",e.clinic.id);if(f)return void console.error("Error fetching clinic details:",f);const y={aUsers_id:o[0].id,aClinic_id:s[0].id,aName:s[0].mName,aService:e.selectedServices.join(", "),aSchedule:e.selectedSchedules.join(", "),status:"Your appointment status is pending"},{data:Z,error:C}=yield e.supabaseService.getSupabase().from("appointment_tbl").insert([y]);C?console.error("Error inserting appointment:",C):(console.log("Appointment added successfully:",Z),x().fire({icon:"success",title:"Appointment Success!",text:"Kindly wait for the approval of your appointment."}),e.dialogRef.close())}else console.error("No user data found for the logged-in user.")}else e.router.navigate(["/login"]),e.dialogRef.close(),console.error("No logged-in user found.")}catch(n){console.error("Error:",n)}})()}toggleSelectService(e){const n=this.selectedServices.indexOf(e);-1!==n?(this.selectedServices.splice(n,1),console.log(`Service "${e}" is unselected`)):(this.selectedServices.push(e),console.log(`Service "${e}" is selected`)),this.updateFormValidity()}toggleSelectSchedule(e){const n=this.selectedSchedules.indexOf(e);-1!==n?(this.selectedSchedules.splice(n,1),console.log(`Schedule "${e}" is unselected`)):(this.selectedSchedules.push(e),console.log(`Schedule "${e}" is selected`)),this.updateFormValidity()}updateFormValidity(){this.isFormValid=this.selectedServices.length>0&&this.selectedSchedules.length>0}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(P.T),t.Y36(p.F0),t.Y36(h.so),t.Y36(h.WI))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-make-matched-appointment"]],decls:27,vars:5,consts:[[1,"make-appointment-container"],[1,"title"],["mat-dialog-title",""],["mat-icon-button","",1,"close-icon",3,"click"],["mat-dialog-content","",1,"clinic-details"],[1,"details-container"],[1,"details-logo-container"],["src","assets/logo.png","alt","logo.png"],[1,"details-txt-container"],[1,"chip-container"],[3,"ngClass","click",4,"ngFor","ngForOf"],[1,"make-appointment-btn-container"],["mat-raised-button","","color","primary",1,"make-appointment-btn",3,"disabled","click"],[3,"ngClass","click"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),t._uU(3),t.qZA(),t.TgZ(4,"button",3),t.NdJ("click",function(){return o.onClose()}),t.TgZ(5,"mat-icon"),t._uU(6,"close"),t.qZA()()(),t.TgZ(7,"div",4)(8,"div",5)(9,"div",6),t._UZ(10,"img",7),t.qZA(),t.TgZ(11,"div",8)(12,"h2"),t._uU(13),t.qZA(),t.TgZ(14,"div",9)(15,"label"),t._uU(16,"Select Service:"),t.qZA(),t.TgZ(17,"mat-chip-listbox"),t.YNc(18,S,2,5,"mat-chip",10),t.qZA()(),t.TgZ(19,"div",9)(20,"label"),t._uU(21,"Select Schedule:"),t.qZA(),t.TgZ(22,"mat-chip-listbox"),t.YNc(23,k,2,5,"mat-chip",10),t.qZA()()()()(),t.TgZ(24,"div",11)(25,"button",12),t.NdJ("click",function(){return o.onMakeAppointment()}),t._uU(26," Make Appointment "),t.qZA()()()),2&n&&(t.xp6(3),t.hij("",o.clinic.mName," Appointment"),t.xp6(10),t.Oqu(o.clinic.mName),t.xp6(5),t.Q6J("ngForOf",o.clinic.mService.split(",")),t.xp6(5),t.Q6J("ngForOf",o.clinic.mSchedule.split(",")),t.xp6(2),t.Q6J("disabled",!o.isFormValid))},dependencies:[r.mk,r.sg,d.HS,d.z2,u.Hw,m.lW,m.RK],styles:[".make-appointment-container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.make-appointment-container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0}.make-appointment-container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{margin-left:10px;cursor:pointer;font-size:1.5em}.make-appointment-container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{width:auto;min-width:130px;max-width:500px}.make-appointment-container[_ngcontent-%COMP%]   .make-appointment-details[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;flex-wrap:wrap}.make-appointment-container[_ngcontent-%COMP%]   .details-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;justify-content:center}.make-appointment-container[_ngcontent-%COMP%]   .details-logo-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:200px;height:auto;margin-right:30px}.make-appointment-container[_ngcontent-%COMP%]   .details-txt-container[_ngcontent-%COMP%]{width:60%}.make-appointment-container[_ngcontent-%COMP%]   .details-txt-container[_ngcontent-%COMP%]   .dropdown-container[_ngcontent-%COMP%]{margin-bottom:20px}.make-appointment-container[_ngcontent-%COMP%]   .details-txt-container[_ngcontent-%COMP%]   .dropdown-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-right:10px}.make-appointment-container[_ngcontent-%COMP%]   .details-txt-container[_ngcontent-%COMP%]   .dropdown-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:8px;border:1px solid #ccc;border-radius:4px;cursor:pointer}@media screen and (max-width: 600px){.make-appointment-container[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]{width:100%}.make-appointment-container[_ngcontent-%COMP%]   .details-logo-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;margin-right:0}.make-appointment-container[_ngcontent-%COMP%]   .details-txt-container[_ngcontent-%COMP%]{width:90%;margin-top:20px}}.make-appointment-btn-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:20px}.make-appointment-btn-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-bottom:20px;width:200px}.chip-container[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{color:#fff!important;--mdc-chip-label-text-color: #ffff}.chip-container[_ngcontent-%COMP%]   .pink[_ngcontent-%COMP%]{background-color:#ff4081}.chip-container[_ngcontent-%COMP%]   .blue[_ngcontent-%COMP%]{background-color:#3f51b5}.chip-container[_ngcontent-%COMP%]   .orange[_ngcontent-%COMP%]{background-color:#ff9800}.chip-container[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{width:auto;min-width:130px;max-width:500px}"]})}return i})()}];let b=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275mod=t.oAB({type:i});static#n=this.\u0275inj=t.cJS({imports:[p.Bz.forChild(v),p.Bz]})}return i})(),A=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275mod=t.oAB({type:i});static#n=this.\u0275inj=t.cJS({imports:[r.ez,b,d.Hi,u.Ps,m.ot]})}return i})()}}]);