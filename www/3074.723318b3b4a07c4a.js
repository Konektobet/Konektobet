"use strict";(self.webpackChunkKonektobet=self.webpackChunkKonektobet||[]).push([[3074],{3074:(L,g,i)=>{i.r(g),i.d(g,{AdminLoginModule:()=>U});var d=i(6814),r=i(6223),p=i(617),C=i(6385),m=i(2032),v=i(5940),u=i(2939),c=i(1896),f=i(5861),y=i(3519),P=i.n(y),n=i(5879),O=i(7344),M=i(3363),x=i(9157);function Z(t,h){1&t&&(n.TgZ(0,"mat-error"),n._uU(1," Email is required "),n.qZA())}function w(t,h){1&t&&(n.TgZ(0,"mat-error"),n._uU(1," Invalid email "),n.qZA())}function A(t,h){1&t&&(n.TgZ(0,"mat-error"),n._uU(1," Password is required "),n.qZA())}const T=[{path:"",component:(()=>{class t{constructor(o,a,e,s){this.router=o,this.supabaseService=a,this.snackBar=e,this.loginDialog=s,this.passwordControl=new r.NI("",r.kI.required),this.loginForm=new r.cw({email:new r.NI("",[r.kI.required,r.kI.email]),password:new r.NI("",r.kI.required)}),this.user=null,this.hide=!0,this.loading=!1}togglePasswordVisibility(){this.hide=!this.hide}redirectToSignup(){this.router.navigate(["admin/admin-signup"])}login(){var o=this;return(0,f.Z)(function*(){if(o.loginForm.valid&&!o.loading){const a=o.loginForm.value;o.loading=!0;try{const{data:e,error:s}=yield o.supabaseService.getSupabase().auth.signInWithPassword({email:a.email,password:a.password});if(s)console.error("Error signing in:",s.message),P().fire({icon:"error",title:"Login Failed",text:"Incorrect email or password"});else{console.log("Login success:",e);const b=yield o.supabaseService.getSupabase().from("admin_users_tbl").select("firstname, lastname").eq("email",e.user?.email),l=Array.isArray(b.data)?b.data[0]:null,I=l?l.firstname:"User";yield o.loginDialog.login(),o.showWelcomeToast(`Admin ${I}`),o.router.navigate(["admin/admin-home"])}}catch(e){console.error("Unexpected error:",e)}finally{o.loading=!1}}})()}signInWithGoogle(){var o=this;return(0,f.Z)(function*(){const{data:a,error:e}=yield o.supabaseService.getSupabase().auth.signInWithOAuth({provider:"google"});e?console.error("Google sign up error:",e.message):console.log("Google sign up success:",a)})()}showWelcomeToast(o){this.snackBar.open(`Welcome, ${o}!`,"",{duration:3e3,horizontalPosition:"center",verticalPosition:"bottom",panelClass:["centered-toast"]})}static#n=this.\u0275fac=function(a){return new(a||t)(n.Y36(c.F0),n.Y36(O.T),n.Y36(u.ux),n.Y36(M.e))};static#t=this.\u0275cmp=n.Xpm({type:t,selectors:[["app-admin-login"]],decls:31,vars:6,consts:[["lang","en"],["charset","UTF-8"],["http-equiv","X-UA-Compatible","content","IE=edge"],["name","viewport","content","width=device-width, initial-scale=1.0"],["type","text/css","rel","stylesheet","href","https://www.gstatic.com/firebasejs/ui/6.0.1/firebase-ui-auth.css"],[1,"form-container"],[1,"logo-place"],["src","assets/logo.png","alt","konektobetlogo",1,"logo"],[1,"title"],[1,"form",3,"formGroup"],[4,"ngIf"],[1,"input"],["formControlName","email","matInput","","type","text","placeholder","Email"],["formControlName","password","matInput","","placeholder","Password",3,"type"],["matSuffix","",3,"click"],[1,"form-btn",3,"click"],[1,"page-link"],[1,"sign-up-label"],[1,"sign-up-link",3,"click"]],template:function(a,e){1&a&&(n.TgZ(0,"html",0)(1,"head"),n._UZ(2,"meta",1)(3,"meta",2)(4,"meta",3),n.TgZ(5,"title"),n._uU(6,"Login Form"),n.qZA(),n._UZ(7,"link",4),n.qZA(),n.TgZ(8,"body")(9,"div",5)(10,"div",6),n._UZ(11,"img",7),n.qZA(),n.TgZ(12,"p",8),n._uU(13,"Admin Login"),n.qZA(),n.TgZ(14,"form",9),n.YNc(15,Z,2,0,"mat-error",10),n.YNc(16,w,2,0,"mat-error",10),n.TgZ(17,"div",11),n._UZ(18,"input",12),n.qZA(),n.YNc(19,A,2,0,"mat-error",10),n.TgZ(20,"div",11),n._UZ(21,"input",13),n.TgZ(22,"mat-icon",14),n.NdJ("click",function(){return e.togglePasswordVisibility()}),n._uU(23),n.qZA()(),n.TgZ(24,"button",15),n.NdJ("click",function(){return e.login()}),n._uU(25,"Log in"),n.qZA(),n._UZ(26,"p",16),n.qZA(),n.TgZ(27,"p",17),n._uU(28," Don't have an account? "),n.TgZ(29,"span",18),n.NdJ("click",function(){return e.redirectToSignup()}),n._uU(30,"Sign up"),n.qZA()()()()()),2&a&&(n.xp6(14),n.Q6J("formGroup",e.loginForm),n.xp6(1),n.Q6J("ngIf",e.loginForm.controls.email.hasError("required")),n.xp6(1),n.Q6J("ngIf",e.loginForm.controls.email.hasError("email")),n.xp6(3),n.Q6J("ngIf",e.loginForm.controls.password.hasError("required")),n.xp6(2),n.Q6J("type",e.hide?"password":"text"),n.xp6(2),n.Oqu(e.hide?"visibility_off":"visibility"))},dependencies:[d.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,m.Nt,x.TO,x.R9,p.Hw],styles:["body[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;margin:0;background-color:#f0f0f0}.form-container[_ngcontent-%COMP%]{width:350px;height:auto;background-color:#fff;box-shadow:#00000059 0 5px 15px;border-radius:10px;box-sizing:border-box;padding:20px 30px}.logo[_ngcontent-%COMP%]{width:40%;height:auto;margin-bottom:10px}.logo-place[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.title[_ngcontent-%COMP%]{text-align:center;margin:10px 0 30px;font-size:28px;font-weight:800;color:#12547e}.form[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;gap:18px;margin-bottom:15px}.container[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;justify-content:center;align-items:center}.line[_ngcontent-%COMP%]{flex:1}.text[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px;color:#999}.input[_ngcontent-%COMP%]{border-radius:20px;border:1px solid #c0c0c0;outline:0!important;box-sizing:border-box;padding:15px;display:flex;align-items:center}.input-pass[_ngcontent-%COMP%]{border-radius:20px;border:1px solid #c0c0c0;outline:0!important;box-sizing:border-box;padding:0 15px;display:flex;align-items:center}.input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;border:none;outline:none;background:transparent}.input-pass[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;border:none;outline:none;background:transparent;padding:0}.error[_ngcontent-%COMP%]{padding:-30px}.eye-pass[_ngcontent-%COMP%]{cursor:pointer;-webkit-user-select:none;user-select:none;font-size:20px;padding:0}.page-link[_ngcontent-%COMP%]{text-decoration:none;margin:0;text-align:end;color:#747474;text-decoration-color:#747474}.page-link-label[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;cursor:pointer;font-size:12px;font-weight:700;color:#12547e}.page-link-label[_ngcontent-%COMP%]:hover{color:#1979f5}.form-btn[_ngcontent-%COMP%]{padding:10px 15px;border-radius:20px;border:0!important;outline:0!important;background:#0165B2;color:#fff;cursor:pointer;box-shadow:#0000003d 0 3px 8px}.form-btn[_ngcontent-%COMP%]:active{box-shadow:none}.sign-up-label[_ngcontent-%COMP%]{margin:0;font-size:12px;color:#12547e}.sign-up-link[_ngcontent-%COMP%]{margin-left:1px;font-size:12px;text-decoration:none;text-decoration-color:#0165b2;color:#0165b2;cursor:pointer;font-weight:800}.sign-up-link[_ngcontent-%COMP%]:hover{color:#1979f5}.buttons-container[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;justify-content:flex-start;margin-top:20px;gap:15px}.facebook-login-button[_ngcontent-%COMP%], .google-login-button[_ngcontent-%COMP%]{border-radius:20px;box-sizing:border-box;padding:10px 15px;box-shadow:#1979f5 #0000000f 0 0 0 1px;cursor:pointer;display:flex;justify-content:center;align-items:center;font-size:11px;gap:5px}.facebook-login-button[_ngcontent-%COMP%]{background-color:#1979f5;color:#fff;border:2px solid #1979F5}.google-login-button[_ngcontent-%COMP%]{border:2px solid #747474}.apple-icon[_ngcontent-%COMP%], .google-icon[_ngcontent-%COMP%]{font-size:18px;margin-bottom:1px}.centered-toast[_ngcontent-%COMP%]{display:flex;justify-content:center}"]})}return t})()}];let k=(()=>{class t{static#n=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275mod=n.oAB({type:t});static#o=this.\u0275inj=n.cJS({imports:[c.Bz.forChild(T),c.Bz]})}return t})(),U=(()=>{class t{static#n=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275mod=n.oAB({type:t});static#o=this.\u0275inj=n.cJS({imports:[d.ez,k,r.UX,m.c,p.Ps,C.t,v.Cq,u.ZX]})}return t})()}}]);