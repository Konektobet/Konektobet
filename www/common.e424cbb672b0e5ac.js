"use strict";(self.webpackChunkKonektobet=self.webpackChunkKonektobet||[]).push([[8592],{8056:(Z,O,c)=>{c.d(O,{c:()=>E});var m=c(1896),h=c(7630),e=c(5879),p=c(7344),t=c(7700),f=c(9850),x=c(6814),g=c(5195),u=c(617);function v(l,S){1&l&&(e.TgZ(0,"div",13)(1,"mat-icon"),e._uU(2,"arrow_forward_ios"),e.qZA(),e.TgZ(3,"label")(4,"strong"),e._uU(5,"See more"),e.qZA()()())}const b=function(l){return["/admin-cdetails",l]};function A(l,S){if(1&l){const r=e.EpF();e.TgZ(0,"a",5)(1,"mat-card",6),e.NdJ("mouseenter",function(){e.CHM(r);const s=e.oxw();return e.KtG(s.onMouseEnter())})("mouseleave",function(){e.CHM(r);const s=e.oxw();return e.KtG(s.onMouseLeave())}),e.TgZ(2,"mat-card-content")(3,"div",7),e._UZ(4,"img",8)(5,"div",9),e.qZA(),e.YNc(6,v,6,0,"div",10),e.TgZ(7,"div",11)(8,"div",12)(9,"h2"),e._uU(10),e.qZA(),e.TgZ(11,"h2"),e._uU(12),e.qZA()()()()()()}if(2&l){const r=S.$implicit,o=e.oxw();e.Q6J("routerLink",e.VKq(5,b,r.id)),e.xp6(4),e.Q6J("src",r.logo||"assets/logo.png",e.LSH),e.xp6(2),e.Q6J("ngIf",o.isHovered),e.xp6(4),e.Oqu(r.adName),e.xp6(2),e.Oqu(r.adAddress)}}const w=[{path:"",component:(()=>{class l{constructor(r,o,s,n,i){this.supabaseService=r,this.dialog=o,this.cdr=s,this.initialRecommendService=n,this.router=i,this.clinics=[],this.clinicsFound=!1,this.isHovered=!1}ngOnInit(){this.loadClinics(),this.initialRecommendService.matchedClinics$.subscribe(r=>{this.dialog.openDialogs.some(s=>s.componentInstance instanceof h.H&&s.componentInstance.addedToFavorites)||(this.clinics=r.map(s=>({...s,similarity:void 0})),this.clinicsFound=r.length>0,this.cdr.detectChanges())})}onMouseEnter(){this.isHovered=!0}onMouseLeave(){this.isHovered=!1}loadClinics(){this.supabaseService.getSupabase().from("admin_clinic_tbl").select("*").then(({data:r,error:o})=>{o?console.error("Error fetching clinics:",o):this.clinics=r})}popSeeMoreDetails(r){this.router.navigate(["/new-details",r.id])}static#t=this.\u0275fac=function(o){return new(o||l)(e.Y36(p.T),e.Y36(t.uw),e.Y36(e.sBO),e.Y36(f.h),e.Y36(m.F0))};static#e=this.\u0275cmp=e.Xpm({type:l,selectors:[["app-admin"]],decls:7,vars:1,consts:[[1,"outer-clinic-container"],[1,"clinics"],[1,"inner-clinic-container"],[1,"clinic-card-container"],["style","text-decoration: none;",3,"routerLink",4,"ngFor","ngForOf"],[2,"text-decoration","none",3,"routerLink"],[1,"clinic-card",2,"background-image","url('assets/bg.png')",3,"mouseenter","mouseleave"],[1,"clinic-logo"],["alt","Profile Image",3,"src"],[1,"clinic-txt"],["class","see-more1",4,"ngIf"],[1,"bot-part-container"],[1,"see-more"],[1,"see-more1"]],template:function(o,s){1&o&&(e.TgZ(0,"body")(1,"div",0)(2,"h1",1),e._uU(3,"Pending Clinics"),e.qZA(),e.TgZ(4,"div",2)(5,"div",3),e.YNc(6,A,13,7,"a",4),e.qZA()()()()),2&o&&(e.xp6(6),e.Q6J("ngForOf",s.clinics))},dependencies:[x.sg,x.O5,m.rH,g.a8,g.dn,u.Hw],styles:["body[_ngcontent-%COMP%]{background-color:#fafafa;height:93vh;margin:0}.clinics[_ngcontent-%COMP%]{text-align:center;font-size:30px;font-weight:700;margin-top:30px}.inner-clinic-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.clinic-card-container[_ngcontent-%COMP%]{width:100%;display:flex;flex-wrap:wrap;justify-content:space-evenly;align-items:center;margin:3% 5% 0}.clinic-card[_ngcontent-%COMP%]{width:400px;height:210px;margin-bottom:30px;overflow:absolute;border-top-left-radius:10px;border-top-right-radius:10px}.clinic-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:0;display:flex;width:auto;flex-wrap:nowrap;align-items:baseline;flex-direction:column}.clinic-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:auto;display:flex;align-items:center;justify-content:flex-start;padding:20px}.clinic-logo[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column;flex-wrap:wrap;width:100%}.clinic-txt[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:flex-start;flex-direction:column;flex-wrap:wrap;color:#fff;text-align:center}.clinic-txt[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{width:100%;font-size:1rem}.clinic-txt[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1rem;width:100%}@media screen and (max-width: 769px){.clinic-cards[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;width:350px}.clinic-card[_ngcontent-%COMP%]{width:350px;height:150px;margin-bottom:100px;overflow:absolute;border-top-left-radius:10px;border-top-right-radius:10px}.clinic-txt[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:16px}.clinic-txt[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:15px}}.see-more[_ngcontent-%COMP%]{width:100%;height:auto;display:flex;justify-content:center;overflow:relative;color:#fff;flex-direction:column}.see-more[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{width:100%;font-size:1rem;display:flex;justify-content:center;align-items:center;margin:0}.see-more1[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:24px;color:#000}.see-more1[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;background-color:#fffc;opacity:0;transition:opacity .3s ease}.see-more1[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{cursor:pointer;margin-bottom:8px;color:#000}.clinic-card[_ngcontent-%COMP%]:hover   .see-more1[_ngcontent-%COMP%]{opacity:1}.see-more[_ngcontent-%COMP%]   mat-raised-button[_ngcontent-%COMP%]{order:1;width:auto}.bot-part-container[_ngcontent-%COMP%]{height:70px;width:100%;display:flex;align-items:center;justify-content:row;background-color:#fff;border-top-left-radius:10px;border-top-right-radius:10px;overflow:relative;box-shadow:2px 2px 10px #00000013;background-color:#3f51b5}"]})}return l})()}];let E=(()=>{class l{static#t=this.\u0275fac=function(o){return new(o||l)};static#e=this.\u0275mod=e.oAB({type:l});static#n=this.\u0275inj=e.cJS({imports:[m.Bz.forChild(w),m.Bz]})}return l})()},5790:(Z,O,c)=>{c.d(O,{t:()=>r});var m=c(5861),h=c(7700),e=c(3519),p=c.n(e),t=c(5879),f=c(1896),x=c(7344),g=c(6814),u=c(6223),v=c(2296),b=c(2557),A=c(617);const y=function(o,s){return{selected:o,blue:s}};function w(o,s){if(1&o){const n=t.EpF();t.TgZ(0,"mat-chip",17),t.NdJ("click",function(){const d=t.CHM(n).$implicit,_=t.oxw(2);return t.KtG(_.toggleSelectService(d.trim()))}),t._uU(1),t.qZA()}if(2&o){const n=s.$implicit,i=t.oxw(2);t.Q6J("ngClass",t.WLB(2,y,i.selectedServices.includes(n.trim()),i.selectedServices.includes(n.trim()))),t.xp6(1),t.hij(" ",n.trim()," ")}}function E(o,s){if(1&o){const n=t.EpF();t.TgZ(0,"mat-chip",17),t.NdJ("click",function(){const d=t.CHM(n).$implicit,_=t.oxw(2);return t.KtG(_.toggleSelectSchedule(d.trim()))}),t._uU(1),t.qZA()}if(2&o){const n=s.$implicit,i=t.oxw(2);t.Q6J("ngClass",t.WLB(2,y,i.selectedSchedules.includes(n.trim()),i.selectedSchedules.includes(n.trim()))),t.xp6(1),t.hij(" ",n.trim()," ")}}function l(o,s){if(1&o&&(t.TgZ(0,"option",18),t._uU(1),t.qZA()),2&o){const n=s.$implicit;t.Q6J("value",n),t.xp6(1),t.Oqu(n)}}function S(o,s){if(1&o){const n=t.EpF();t.TgZ(0,"div",11)(1,"h2"),t._uU(2),t.qZA(),t.TgZ(3,"div",12)(4,"div",13)(5,"label"),t._uU(6,"Select Service:"),t.qZA(),t.TgZ(7,"mat-chip-listbox"),t.YNc(8,w,2,5,"mat-chip",14),t.qZA()(),t.TgZ(9,"div",13)(10,"label"),t._uU(11,"Select Schedule:"),t.qZA(),t.TgZ(12,"mat-chip-listbox"),t.YNc(13,E,2,5,"mat-chip",14),t.qZA()()(),t.TgZ(14,"p"),t._uU(15),t.ALo(16,"date"),t.qZA(),t.TgZ(17,"div",12)(18,"div",13)(19,"label"),t._uU(20,"Select Time Slot:"),t.qZA(),t._UZ(21,"br"),t.TgZ(22,"select",15),t.NdJ("ngModelChange",function(a){t.CHM(n);const d=t.oxw();return t.KtG(d.selectedTimeSlot=a)}),t.YNc(23,l,2,2,"option",16),t.qZA()()()()}if(2&o){const n=t.oxw();t.xp6(2),t.Oqu(n.clinic.cName),t.xp6(6),t.Q6J("ngForOf",n.clinic.cService.split(",")),t.xp6(5),t.Q6J("ngForOf",n.clinic.cSchedule.split(",")),t.xp6(2),t.hij("Appointment Date: ",t.lcZ(16,6,n.appointmentDate),""),t.xp6(7),t.Q6J("ngModel",n.selectedTimeSlot),t.xp6(1),t.Q6J("ngForOf",n.timeSlots)}}let r=(()=>{class o{constructor(n,i,a,d){this.router=n,this.supabaseService=i,this.dialogRef=a,this.data=d,this.selectedServices=[],this.selectedSchedules=[],this.isFormValid=!1,this.appointments=[],this.timeSlots=[],this.selectedTimeSlot="",this.fetchClinicDetails(d.appointmentId)}onClose(){this.dialogRef.close()}fetchClinicDetails(n){var i=this;return(0,m.Z)(function*(){try{const{data:a,error:d}=yield i.supabaseService.getSupabase().from("appointment_tbl").select("*").eq("id",n).single();if(d)console.error("Error fetching appointment details:",d);else if(a){a.aService&&(i.selectedServices=a.aService.split(",").map(C=>C.trim())),a.aSchedule&&(i.selectedSchedules=a.aSchedule.split(",").map(C=>C.trim()));const _=a.aClinic_id,{data:M,error:P}=yield i.supabaseService.getSupabase().from("clinic_tbl").select("*").eq("id",_).single();P?console.error("Error fetching clinic details:",P):M?(console.log("Fetched clinic data:",M),i.clinic=M,i.appointmentDate=new Date(a.aDate),i.generateTimeSlots()):console.error("No clinic data found for the appointment ID:",n)}else console.error("No appointment data found for the ID:",n)}catch(a){console.error("Error:",a)}})()}generateTimeSlots(){const n=this.clinic.cSTime,i=this.clinic.cETime,[a,d]=n.split(":").map(Number),[_,M]=i.split(":").map(Number),P=new Date;P.setHours(a,d,0,0);const C=new Date;C.setHours(_,M,0,0);let T=new Date(P);for(;T<=C;){const U=T.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});this.timeSlots.push(U),T.setHours(T.getHours()+1)}const D=new Date(this.appointmentDate);this.selectedTimeSlot=D.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}onUpdateAppointment(){p().fire({title:"Are you sure?",text:"You are about to update the appointment.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, update it!"}).then(n=>{n.isConfirmed&&this.updateAppointmentInDatabase()})}updateAppointmentInDatabase(){var n=this;return(0,m.Z)(function*(){try{const i={aService:n.selectedServices.join(", "),aSchedule:n.selectedSchedules.join(", "),aTime:n.selectedTimeSlot},{error:a}=yield n.supabaseService.getSupabase().from("appointment_tbl").update(i).eq("id",n.data.appointmentId);a?(console.error("Error updating appointment:",a),p().fire({icon:"error",title:"Oops...",text:"Failed to update the appointment. Please try again later."})):(p().fire({icon:"success",title:"Appointment Updated",text:"The appointment has been successfully updated."}),n.dialogRef.close(),n.fetchAppointments())}catch(i){console.error("Error:",i),p().fire({icon:"error",title:"Oops...",text:"An unexpected error occurred. Please try again later."})}})()}fetchAppointments(){var n=this;return(0,m.Z)(function*(){try{const{data:i,error:a}=yield n.supabaseService.getSupabase().from("appointment_tbl").select("*");a?console.error("Error fetching appointments:",a):n.appointments=i||[]}catch(i){console.error("Error:",i)}})()}toggleSelectService(n){const i=this.selectedServices.indexOf(n);-1!==i?this.selectedServices.splice(i,1):this.selectedServices.push(n),this.updateFormValidity()}toggleSelectSchedule(n){const i=this.selectedSchedules.indexOf(n);-1!==i?this.selectedSchedules.splice(i,1):this.selectedSchedules.push(n),this.updateFormValidity()}updateFormValidity(){this.isFormValid=this.selectedServices.length>0&&""!==this.selectedTimeSlot}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(f.F0),t.Y36(x.T),t.Y36(h.so),t.Y36(h.WI))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-appointment-update"]],decls:15,vars:2,consts:[[1,"appointment-update-container"],[1,"title"],["mat-dialog-title",""],["mat-icon-button","",3,"click"],["mat-dialog-content","",1,"appointment-update-details"],[1,"details-container"],[1,"details-logo-container"],["src","assets/logo.png","alt","logo.png"],["class","details-txt-container",4,"ngIf"],[1,"appointment-update-btn-container"],["mat-raised-button","","color","primary",1,"update-appointment-btn",3,"disabled","click"],[1,"details-txt-container"],[1,"chips"],[1,"chip-container"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"ngClass","click"],[3,"value"]],template:function(i,a){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),t._uU(3,"Update Appointment"),t.qZA(),t.TgZ(4,"button",3),t.NdJ("click",function(){return a.onClose()}),t.TgZ(5,"mat-icon"),t._uU(6,"close"),t.qZA()()(),t.TgZ(7,"div",4)(8,"div",5)(9,"div",6),t._UZ(10,"img",7),t.qZA(),t.YNc(11,S,24,8,"div",8),t.qZA()(),t.TgZ(12,"div",9)(13,"button",10),t.NdJ("click",function(){return a.onUpdateAppointment()}),t._uU(14," Update Appointment "),t.qZA()()()),2&i&&(t.xp6(11),t.Q6J("ngIf",a.clinic),t.xp6(2),t.Q6J("disabled",!a.isFormValid))},dependencies:[g.mk,g.sg,g.O5,u.YN,u.Kr,u.EJ,u.JJ,u.On,v.lW,v.RK,b.HS,b.z2,A.Hw,g.uU],styles:[".appointment-update-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.appointment-update-container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin:20px}.appointment-update-container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0}.appointment-update-container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{margin-left:10px;cursor:pointer;font-size:1.5em;border-radius:50%;width:40px;height:40px;display:flex;justify-content:center;align-items:center;background-color:#ddd}.appointment-update-container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{width:auto;min-width:130px;max-width:500px}.appointment-update-container[_ngcontent-%COMP%]   .details-txt-container[_ngcontent-%COMP%]{width:60%}.appointment-update-container[_ngcontent-%COMP%]   .details-txt-container[_ngcontent-%COMP%]   .dropdown-container[_ngcontent-%COMP%]{margin-bottom:20px}.appointment-update-container[_ngcontent-%COMP%]   .details-txt-container[_ngcontent-%COMP%]   .dropdown-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-right:10px}.appointment-update-container[_ngcontent-%COMP%]   .details-txt-container[_ngcontent-%COMP%]   .dropdown-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:8px;border:1px solid #ccc;border-radius:4px;cursor:pointer}@media screen and (max-width: 600px){.appointment-update-container[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]{width:100%}.appointment-update-container[_ngcontent-%COMP%]   .details-logo-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;margin-right:0}.appointment-update-container[_ngcontent-%COMP%]   .details-txt-container[_ngcontent-%COMP%]{width:90%;margin-top:20px}}.details-logo-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:150px;height:auto}.details-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;justify-content:center;flex-direction:column}.appointment-update-details[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;flex-wrap:wrap}.appointment-update-btn-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:20px}.appointment-update-btn-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-bottom:20px;width:200px}.chips[_ngcontent-%COMP%]{display:flex}.chip-container[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{color:#fff!important;--mdc-chip-label-text-color: #ffff}.chip-container[_ngcontent-%COMP%]   .pink[_ngcontent-%COMP%]{background-color:#ff4081}.chip-container[_ngcontent-%COMP%]   .blue[_ngcontent-%COMP%]{background-color:#3f51b5}.chip-container[_ngcontent-%COMP%]   .orange[_ngcontent-%COMP%]{background-color:#ff9800}.chip-container[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{width:auto;min-width:130px;max-width:500px}@media screen and (max-width: 769px){.title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px}}"]})}return o})()},3363:(Z,O,c)=>{c.d(O,{e:()=>e});var m=c(5619),h=c(5879);let e=(()=>{class p{hasLoggedInBefore(){return"true"===localStorage.getItem(this.hasLoggedInBeforeKey)}markAsLoggedIn(){localStorage.setItem(this.hasLoggedInBeforeKey,"true")}login(){return new Promise(f=>{this.markAsLoggedIn(),this.loginSuccessSubject.next(!0),f(!0)})}getLoginSuccessObservable(){return this.loginSuccessSubject.asObservable()}constructor(){this.hasLoggedInBeforeKey="hasLoggedInBefore",this.loginSuccessSubject=new m.X(!1)}static#t=this.\u0275fac=function(x){return new(x||p)};static#e=this.\u0275prov=h.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"})}return p})()}}]);