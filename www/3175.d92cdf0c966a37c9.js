"use strict";(self.webpackChunkKonektobet=self.webpackChunkKonektobet||[]).push([[3175],{3175:(L,u,r)=>{r.r(u),r.d(u,{ClinicLoginModule:()=>A});var m=r(6814),d=r(1896),f=r(5861),a=r(6223),y=r(3519),P=r.n(y),n=r(5879),O=r(7344),h=r(2939),x=r(2032),b=r(9157),C=r(617);function M(t,v){1&t&&(n.TgZ(0,"mat-error"),n._uU(1," Email is required "),n.qZA())}function Z(t,v){1&t&&(n.TgZ(0,"mat-error"),n._uU(1," Invalid email "),n.qZA())}function w(t,v){1&t&&(n.TgZ(0,"mat-error"),n._uU(1," Password is required "),n.qZA())}const T=[{path:"",component:(()=>{class t{constructor(e,i,o){this.router=e,this.supabaseService=i,this.snackBar=o,this.passwordControl=new a.NI("",a.kI.required),this.loginForm=new a.cw({email:new a.NI("",[a.kI.required,a.kI.email]),password:new a.NI("",a.kI.required)}),this.clinicUser=null,this.hide=!0,this.loading=!1}ngOnInit(){this.loadAcceptedClinic()}togglePasswordVisibility(){this.hide=!this.hide}redirectToSignup(){this.router.navigate(["clinic/clinic-signup"])}login(){var e=this;return(0,f.Z)(function*(){if(e.loginForm.valid&&!e.loading){const i=e.loginForm.value;e.loading=!0;try{const{data:o,error:l}=yield e.supabaseService.getSupabase().auth.signInWithPassword({email:i.email,password:i.password});if(l)console.error("Error signing in:",l.message);else{console.log("Login success:",o);const g=yield e.supabaseService.getSupabase().from("clinic_users_tbl").select("fname, lname").eq("email",o.user?.email),s=Array.isArray(g.data)?g.data[0]:null;e.showWelcomeToast(`${s?s.fname:"User"} ${s?s.lname:"User"}`),e.loadAcceptedClinic(),e.router.navigate(["clinic/clinic-home"])}}catch(o){console.error("Unexpected error:",o)}finally{e.loading=!1}}})()}showWelcomeToast(e){this.snackBar.open(`Welcome, ${e}!`,"",{duration:3e3,horizontalPosition:"center",verticalPosition:"bottom",panelClass:["centered-toast"]})}loadAcceptedClinic(){var e=this;return(0,f.Z)(function*(){try{const i=e.supabaseService.getClinicAuthStateSnapshot();if(i){const{data:o,error:l}=yield e.supabaseService.getSupabase().from("clinic_users_tbl").select("*").eq("email",i.email);if(l)console.error("Error fetching user data:",l);else if(o&&o.length>0){const g=o[0].id,{data:s,error:p}=yield e.supabaseService.getSupabase().from("admin_clinic_tbl").select("*").eq("adUsers_id",g),{data:c,error:S}=yield e.supabaseService.getSupabase().from("clinic_tbl").select("*").eq("cUsers_id",g);!p&&s&&0===s.length&&!S&&c&&0===c.length?(e.router.navigate(["/clinic/onboarding"]),console.log("Clinic data found:",c),console.log("Admin data found:",s)):(e.router.navigate(["/clinic/clinic-home"]),console.log("Clinic data found:",c),console.log("Admin data found:",s))}else console.error("No user data found for the logged-in user.")}else console.error("No logged-in user found.")}catch(i){console.error("Error:",i),P().fire({icon:"error",title:"Error",text:"An error occurred while loading the clinic. Please try again."})}})()}static#n=this.\u0275fac=function(i){return new(i||t)(n.Y36(d.F0),n.Y36(O.T),n.Y36(h.ux))};static#e=this.\u0275cmp=n.Xpm({type:t,selectors:[["app-clinic-login"]],decls:33,vars:6,consts:[["lang","en"],["charset","UTF-8"],["http-equiv","X-UA-Compatible","content","IE=edge"],["name","viewport","content","width=device-width, initial-scale=1.0"],["type","text/css","rel","stylesheet","href","https://www.gstatic.com/firebasejs/ui/6.0.1/firebase-ui-auth.css"],[1,"form-container"],[1,"logo-place"],["src","assets/logo.png","alt","konektobetlogo",1,"logo"],[1,"title"],[1,"form",3,"formGroup"],[4,"ngIf"],[1,"input"],["formControlName","email","matInput","","type","text","placeholder","Email"],["formControlName","password","matInput","","placeholder","Password",3,"type"],["matSuffix","",3,"click"],[1,"form-btn",3,"click"],[1,"page-link"],[1,"page-link-label"],[1,"sign-up-label"],[1,"sign-up-link",3,"click"]],template:function(i,o){1&i&&(n.TgZ(0,"html",0)(1,"head"),n._UZ(2,"meta",1)(3,"meta",2)(4,"meta",3),n.TgZ(5,"title"),n._uU(6,"Login Form"),n.qZA(),n._UZ(7,"link",4),n.qZA(),n.TgZ(8,"body")(9,"div",5)(10,"div",6),n._UZ(11,"img",7),n.qZA(),n.TgZ(12,"p",8),n._uU(13,"Clinic Login"),n.qZA(),n.TgZ(14,"form",9),n.YNc(15,M,2,0,"mat-error",10),n.YNc(16,Z,2,0,"mat-error",10),n.TgZ(17,"div",11),n._UZ(18,"input",12),n.qZA(),n.YNc(19,w,2,0,"mat-error",10),n.TgZ(20,"div",11),n._UZ(21,"input",13),n.TgZ(22,"mat-icon",14),n.NdJ("click",function(){return o.togglePasswordVisibility()}),n._uU(23),n.qZA()(),n.TgZ(24,"button",15),n.NdJ("click",function(){return o.login()}),n._uU(25,"Log in"),n.qZA(),n.TgZ(26,"p",16)(27,"span",17),n._uU(28,"Forgot Password?"),n.qZA()()(),n.TgZ(29,"p",18),n._uU(30," Don't have an account? "),n.TgZ(31,"span",19),n.NdJ("click",function(){return o.redirectToSignup()}),n._uU(32,"Sign up"),n.qZA()()()()()),2&i&&(n.xp6(14),n.Q6J("formGroup",o.loginForm),n.xp6(1),n.Q6J("ngIf",o.loginForm.controls.email.hasError("required")),n.xp6(1),n.Q6J("ngIf",o.loginForm.controls.email.hasError("email")),n.xp6(3),n.Q6J("ngIf",o.loginForm.controls.password.hasError("required")),n.xp6(2),n.Q6J("type",o.hide?"password":"text"),n.xp6(2),n.Oqu(o.hide?"visibility_off":"visibility"))},dependencies:[m.O5,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,x.Nt,b.TO,b.R9,C.Hw],styles:["body[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;margin:0;background-color:#f0f0f0}.form-container[_ngcontent-%COMP%]{width:350px;height:auto;background-color:#fff;box-shadow:#00000059 0 5px 15px;border-radius:10px;box-sizing:border-box;padding:20px 30px}.logo[_ngcontent-%COMP%]{width:40%;height:auto;margin-bottom:10px}.logo-place[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.title[_ngcontent-%COMP%]{text-align:center;margin:10px 0 30px;font-size:28px;font-weight:800;color:#12547e}.form[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;gap:18px;margin-bottom:15px}.container[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;justify-content:center;align-items:center}.line[_ngcontent-%COMP%]{flex:1}.text[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px;color:#999}.input[_ngcontent-%COMP%]{border-radius:20px;border:1px solid #c0c0c0;outline:0!important;box-sizing:border-box;padding:15px;display:flex;align-items:center}.input-pass[_ngcontent-%COMP%]{border-radius:20px;border:1px solid #c0c0c0;outline:0!important;box-sizing:border-box;padding:0 15px;display:flex;align-items:center}.input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;border:none;outline:none;background:transparent}.input-pass[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;border:none;outline:none;background:transparent;padding:0}.error[_ngcontent-%COMP%]{padding:-30px}.eye-pass[_ngcontent-%COMP%]{cursor:pointer;-webkit-user-select:none;user-select:none;font-size:20px;padding:0}.page-link[_ngcontent-%COMP%]{text-decoration:none;margin:0;text-align:end;color:#747474;text-decoration-color:#747474}.page-link-label[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;cursor:pointer;font-size:12px;font-weight:700;color:#12547e}.page-link-label[_ngcontent-%COMP%]:hover{color:#1979f5}.form-btn[_ngcontent-%COMP%]{padding:10px 15px;border-radius:20px;border:0!important;outline:0!important;background:#0165B2;color:#fff;cursor:pointer;box-shadow:#0000003d 0 3px 8px}.form-btn[_ngcontent-%COMP%]:active{box-shadow:none}.sign-up-label[_ngcontent-%COMP%]{margin:0;font-size:12px;color:#12547e}.sign-up-link[_ngcontent-%COMP%]{margin-left:1px;font-size:12px;text-decoration:none;text-decoration-color:#0165b2;color:#0165b2;cursor:pointer;font-weight:800}.sign-up-link[_ngcontent-%COMP%]:hover{color:#1979f5}.buttons-container[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;justify-content:flex-start;margin-top:20px;gap:15px}.facebook-login-button[_ngcontent-%COMP%], .google-login-button[_ngcontent-%COMP%]{border-radius:20px;box-sizing:border-box;padding:10px 15px;box-shadow:#1979f5 #0000000f 0 0 0 1px;cursor:pointer;display:flex;justify-content:center;align-items:center;font-size:11px;gap:5px}.facebook-login-button[_ngcontent-%COMP%]{background-color:#1979f5;color:#fff;border:2px solid #1979F5}.google-login-button[_ngcontent-%COMP%]{border:2px solid #747474}.apple-icon[_ngcontent-%COMP%], .google-icon[_ngcontent-%COMP%]{font-size:18px;margin-bottom:1px}.centered-toast[_ngcontent-%COMP%]{display:flex;justify-content:center}"]})}return t})()}];let _=(()=>{class t{static#n=this.\u0275fac=function(i){return new(i||t)};static#e=this.\u0275mod=n.oAB({type:t});static#t=this.\u0275inj=n.cJS({imports:[d.Bz.forChild(T),d.Bz]})}return t})();var k=r(6385),U=r(5940);let A=(()=>{class t{static#n=this.\u0275fac=function(i){return new(i||t)};static#e=this.\u0275mod=n.oAB({type:t});static#t=this.\u0275inj=n.cJS({imports:[m.ez,_,a.UX,x.c,C.Ps,k.t,U.Cq,h.ZX]})}return t})()}}]);