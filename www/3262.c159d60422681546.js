"use strict";(self.webpackChunkKonektobet=self.webpackChunkKonektobet||[]).push([[3262],{3262:(q,g,a)=>{a.r(g),a.d(g,{ClinicAppointmentModule:()=>w});var s=a(6814),r=a(1896),d=a(5861),C=a(7700),h=a(1653),t=a(5879),v=a(7344);function x(i,p){if(1&i){const n=t.EpF();t.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"h1"),t._uU(4),t.qZA()(),t.TgZ(5,"div",5)(6,"div",6)(7,"div",7),t._UZ(8,"img",8),t.qZA(),t.TgZ(9,"div",9)(10,"h2"),t._uU(11),t.qZA(),t.TgZ(12,"h2"),t._uU(13),t.qZA(),t.TgZ(14,"p")(15,"strong"),t._uU(16,"Service:"),t.qZA(),t._uU(17),t.qZA(),t.TgZ(18,"p")(19,"strong"),t._uU(20,"Schedule:"),t.qZA(),t._uU(21),t.qZA(),t.TgZ(22,"p",10)(23,"strong"),t._uU(24,"Status:"),t.qZA(),t._uU(25),t.qZA(),t.TgZ(26,"button",11),t.NdJ("click",function(){const c=t.CHM(n).$implicit,l=t.oxw(2);return t.KtG(l.popSeeMoreDetails(c.id))}),t.TgZ(27,"span"),t._uU(28,"Update Appointment"),t.qZA(),t.O4$(),t.TgZ(29,"svg",12),t._UZ(30,"path",13),t.qZA()()()()()()()}if(2&i){const n=p.$implicit,e=t.oxw(2);t.xp6(4),t.hij("",n.aName," Appointment"),t.xp6(7),t.hij("Clinic Name: ",n.aName,""),t.xp6(2),t.AsE("User Name: ",n.firstname," ",n.lastname,""),t.xp6(4),t.hij(" ",n.aService,""),t.xp6(4),t.hij(" ",n.aSchedule,""),t.xp6(1),t.Q6J("ngClass",e.getStatusColorClass(n.status)),t.xp6(3),t.hij(" ",n.status," ")}}function b(i,p){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,x,31,8,"div",1),t.qZA()),2&i){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",n.appointments)}}function A(i,p){1&i&&(t.TgZ(0,"div")(1,"div",2)(2,"div",3)(3,"div",4)(4,"h1"),t._uU(5,"No appointment yet"),t.qZA()(),t.TgZ(6,"div",5)(7,"div",6)(8,"div",7),t._UZ(9,"img",8),t.qZA(),t.TgZ(10,"div",9)(11,"h2"),t._uU(12,"Visit a clinic to make an appointment!"),t.qZA()()()()()()())}const Z=[{path:"",component:(()=>{class i{constructor(n,e,o){this.supabaseService=n,this.router=e,this.dialog=o,this.appointments=[]}ngOnInit(){var n=this;return(0,d.Z)(function*(){yield n.fetchAppointments()})()}fetchAppointments(){var n=this;return(0,d.Z)(function*(){try{const e=n.supabaseService.getClinicAuthStateSnapshot();if(e){const{data:o,error:c}=yield n.supabaseService.getSupabase().from("clinic_users_tbl").select("id").eq("email",e.email);if(c)console.error("Error fetching clinic user data:",c);else if(o&&o.length>0){const l=o[0].id,{data:S,error:u}=yield n.supabaseService.getSupabase().from("clinic_tbl").select("id").eq("cUsers_id",l);if(u)console.error("Error fetching clinics data:",u);else for(const y of S){const U=y.id,{data:_,error:M}=yield n.supabaseService.getSupabase().from("appointment_tbl").select("*").eq("aClinic_id",U);if(M)console.error("Error fetching clinic appointments:",M);else{for(const m of _||[]){const O=m.aUsers_id,{data:T,error:f}=yield n.supabaseService.getSupabase().from("users_tbl").select("firstname").eq("id",O),{data:N,error:P}=yield n.supabaseService.getSupabase().from("users_tbl").select("lastname").eq("id",O);f||P?console.error("Error fetching user data:",f||P):(m.firstname=T[0]?.firstname,m.lastname=N[0]?.lastname)}n.appointments=n.appointments.concat(_||[])}}}else console.error("No clinic user data found for the logged-in clinic user.")}else console.warn("No logged-in clinic user found.")}catch(e){console.error("Error:",e)}})()}getStatusColorClass(n){switch(n){case"Your appointment status is pending":return"yellow-status";case"Your Appointment has been approved":return"green-status";case"Your Appointment is Cancelled":return"red-status";default:return""}}popSeeMoreDetails(n){const e=new C.vA;e.width=window.innerWidth>768?"55%":"90%",e.height=window.innerHeight>768?"auto":"90%",e.data={clinic:n},this.dialog.open(h.v,e).afterClosed().subscribe(c=>{c&&c.appointmentId&&this.router.navigate(["clinic/update-appointment",c.appointmentId])})}static#t=this.\u0275fac=function(e){return new(e||i)(t.Y36(v.T),t.Y36(r.F0),t.Y36(C.uw))};static#n=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-clinic-appointment"]],decls:2,vars:2,consts:[[4,"ngIf"],["class","appointment-list",4,"ngFor","ngForOf"],[1,"appointment-list"],[1,"make-appointment-container"],[1,"title",2,"background-color","#1c4370"],[1,"clinic-details",2,"background-image","url('assets/bg.png')"],[1,"details-container"],[1,"details-logo-container"],["src","assets/logo.png","alt","logo.png"],[1,"details-txt-container"],[3,"ngClass"],[3,"click"],["viewBox","-5 -5 110 110","preserveAspectRatio","none","aria-hidden","true"],["d","M0,0 C0,0 100,0 100,0 C100,0 100,100 100,100 C100,100 0,100 0,100 C0,100 0,0 0,0"]],template:function(e,o){1&e&&(t.YNc(0,b,2,1,"div",0),t.YNc(1,A,13,0,"div",0)),2&e&&(t.Q6J("ngIf",o.appointments&&o.appointments.length>0),t.xp6(1),t.Q6J("ngIf",!o.appointments||0===o.appointments.length))},dependencies:[s.mk,s.sg,s.O5],styles:[".appointment-list[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:3%}.appointment-list[_ngcontent-%COMP%]   .make-appointment-container[_ngcontent-%COMP%]{width:60%;border:1px solid #ddd;border-radius:8px;overflow:hidden;box-shadow:0 4px 8px #0000001a;margin-bottom:16px;position:relative}.appointment-list[_ngcontent-%COMP%]   .make-appointment-container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{background-color:#f2f2f2;padding:12px;border-bottom:1px solid #ddd}.appointment-list[_ngcontent-%COMP%]   .make-appointment-container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;color:#fff}.appointment-list[_ngcontent-%COMP%]   .make-appointment-container[_ngcontent-%COMP%]   .clinic-details[_ngcontent-%COMP%]   .details-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;justify-content:center}.appointment-list[_ngcontent-%COMP%]   .make-appointment-container[_ngcontent-%COMP%]   .clinic-details[_ngcontent-%COMP%]   .details-logo-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:120px;height:auto;margin-right:30px}.appointment-list[_ngcontent-%COMP%]   .make-appointment-container[_ngcontent-%COMP%]   .clinic-details[_ngcontent-%COMP%]   .details-txt-container[_ngcontent-%COMP%]{width:60%;padding:12px;margin-bottom:3em}.appointment-list[_ngcontent-%COMP%]   .make-appointment-container[_ngcontent-%COMP%]   .clinic-details[_ngcontent-%COMP%]   .details-txt-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:12px;font-size:1.2rem;color:#fff}.appointment-list[_ngcontent-%COMP%]   .make-appointment-container[_ngcontent-%COMP%]   .clinic-details[_ngcontent-%COMP%]   .details-txt-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:12px 0;font-size:1rem;color:#fff}.appointment-list[_ngcontent-%COMP%]   .make-appointment-container[_ngcontent-%COMP%]   .clinic-details[_ngcontent-%COMP%]   .details-txt-container[_ngcontent-%COMP%]   p.yellow-status[_ngcontent-%COMP%], .appointment-list[_ngcontent-%COMP%]   .make-appointment-container[_ngcontent-%COMP%]   .clinic-details[_ngcontent-%COMP%]   .details-txt-container[_ngcontent-%COMP%]   p.green-status[_ngcontent-%COMP%], .appointment-list[_ngcontent-%COMP%]   .make-appointment-container[_ngcontent-%COMP%]   .clinic-details[_ngcontent-%COMP%]   .details-txt-container[_ngcontent-%COMP%]   p.red-status[_ngcontent-%COMP%]{font-weight:700;font-size:1.5rem}.appointment-list[_ngcontent-%COMP%]   .make-appointment-container[_ngcontent-%COMP%]   .clinic-details[_ngcontent-%COMP%]   .details-txt-container[_ngcontent-%COMP%]   p.yellow-status[_ngcontent-%COMP%]{color:#ff0}.appointment-list[_ngcontent-%COMP%]   .make-appointment-container[_ngcontent-%COMP%]   .clinic-details[_ngcontent-%COMP%]   .details-txt-container[_ngcontent-%COMP%]   p.green-status[_ngcontent-%COMP%]{color:green}.appointment-list[_ngcontent-%COMP%]   .make-appointment-container[_ngcontent-%COMP%]   .clinic-details[_ngcontent-%COMP%]   .details-txt-container[_ngcontent-%COMP%]   p.red-status[_ngcontent-%COMP%]{color:red}.appointment-list[_ngcontent-%COMP%]   .make-appointment-container[_ngcontent-%COMP%]   .clinic-details[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{appearance:none;background:transparent;border:0;color:#fff;cursor:pointer;font:inherit;font-weight:500;line-height:1;padding:1em 1.5em;position:absolute;bottom:1em;left:50%;transform:translate(-50%);transition:filter var(--motion-duration),transform var(--motion-duration) var(--motion-ease)}.appointment-list[_ngcontent-%COMP%]   .make-appointment-container[_ngcontent-%COMP%]   .clinic-details[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{filter:brightness(1.1);transform:translate(-50%) scale(1.05)}.appointment-list[_ngcontent-%COMP%]   .make-appointment-container[_ngcontent-%COMP%]   .clinic-details[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{filter:brightness(.9);transform:translate(-50%) scale(.95)}.appointment-list[_ngcontent-%COMP%]   .make-appointment-container[_ngcontent-%COMP%]   .clinic-details[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{display:block;position:relative;z-index:1;transition:transform var(--motion-duration) var(--motion-ease)}.appointment-list[_ngcontent-%COMP%]   .make-appointment-container[_ngcontent-%COMP%]   .clinic-details[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] > svg[_ngcontent-%COMP%]{fill:#1c4370;position:absolute;top:-5%;left:-5%;width:110%;height:110%;transition:var(--motion-duration) var(--motion-ease)}.appointment-list[_ngcontent-%COMP%]   .make-appointment-container[_ngcontent-%COMP%]   .clinic-details[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] > svg[_ngcontent-%COMP%] > path[_ngcontent-%COMP%]{transition:var(--motion-duration) var(--motion-ease)}@media screen and (max-width: 600px){.appointment-list[_ngcontent-%COMP%]   .make-appointment-container[_ngcontent-%COMP%]{width:90%}.appointment-list[_ngcontent-%COMP%]   .make-appointment-container[_ngcontent-%COMP%]   .details-logo-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px;margin-right:0}.appointment-list[_ngcontent-%COMP%]   .make-appointment-container[_ngcontent-%COMP%]   .details-txt-container[_ngcontent-%COMP%]{width:100%;margin-top:20px}}"]})}return i})()}];let k=(()=>{class i{static#t=this.\u0275fac=function(e){return new(e||i)};static#n=this.\u0275mod=t.oAB({type:i});static#e=this.\u0275inj=t.cJS({imports:[r.Bz.forChild(Z),r.Bz]})}return i})(),w=(()=>{class i{static#t=this.\u0275fac=function(e){return new(e||i)};static#n=this.\u0275mod=t.oAB({type:i});static#e=this.\u0275inj=t.cJS({imports:[s.ez,k]})}return i})()}}]);