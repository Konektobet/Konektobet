"use strict";(self.webpackChunkKonektobet=self.webpackChunkKonektobet||[]).push([[1653],{1653:(Z,m,c)=>{c.d(m,{v:()=>T});var p=c(5861),s=c(7700),g=c(3519),a=c.n(g),t=c(5879),f=c(7344),h=c(1896),C=c(6814),u=c(2296),x=c(617);function A(o,l){if(1&o&&(t.TgZ(0,"div")(1,"div",14)(2,"mat-icon"),t._uU(3,"pets"),t.qZA(),t.TgZ(4,"h1"),t._uU(5),t.qZA()(),t.TgZ(6,"div",14)(7,"mat-icon"),t._uU(8,"date_range"),t.qZA(),t.TgZ(9,"h2"),t._uU(10),t.qZA()(),t.TgZ(11,"div",14)(12,"mat-icon"),t._uU(13,"wc"),t.qZA(),t.TgZ(14,"h2"),t._uU(15),t.qZA()(),t.TgZ(16,"div",14)(17,"mat-icon"),t._uU(18,"layers"),t.qZA(),t.TgZ(19,"h2"),t._uU(20),t.qZA()()()),2&o){const n=t.oxw(2);t.xp6(5),t.Oqu(null==n.petDetails?null:n.petDetails.petName),t.xp6(5),t.hij("",null==n.petDetails?null:n.petDetails.petAge," year/s old"),t.xp6(5),t.Oqu(null==n.petDetails?null:n.petDetails.petSex),t.xp6(5),t.Oqu(null==n.petDetails?null:n.petDetails.petBreed)}}function O(o,l){if(1&o&&(t.TgZ(0,"div",11)(1,"h2"),t._uU(2),t.qZA(),t.TgZ(3,"div",12)(4,"div",13)(5,"div",14)(6,"h1"),t._uU(7),t.qZA()(),t.TgZ(8,"div",14)(9,"mat-icon"),t._uU(10,"person"),t.qZA(),t.TgZ(11,"h2"),t._uU(12),t.qZA()(),t.TgZ(13,"div",14)(14,"mat-icon"),t._uU(15,"sentiment_satisfied_alt"),t.qZA(),t.TgZ(16,"h2"),t._uU(17),t.qZA()(),t.TgZ(18,"div",14)(19,"mat-icon"),t._uU(20,"schedule"),t.qZA(),t.TgZ(21,"h1"),t._uU(22),t.qZA()(),t.YNc(23,A,21,4,"div",15),t.TgZ(24,"div",14)(25,"mat-icon"),t._uU(26,"today"),t.qZA(),t.TgZ(27,"h2"),t._uU(28),t.qZA()()()()()),2&o){const n=t.oxw();t.xp6(2),t.Oqu(n.clinic.cName),t.xp6(5),t.Oqu(null==n.clinic?null:n.clinic.cName),t.xp6(5),t.AsE("",null==n.clinic?null:n.clinic.firstname," ",null==n.clinic?null:n.clinic.lastname,""),t.xp6(5),t.Oqu(null==n.clinic?null:n.clinic.aService),t.xp6(5),t.Oqu(null==n.clinic?null:n.clinic.aTime),t.xp6(1),t.Q6J("ngIf",n.petDetails),t.xp6(5),t.Oqu(null==n.clinic?null:n.clinic.status)}}function P(o,l){if(1&o){const n=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){t.CHM(n);const e=t.oxw(2);return t.KtG(e.acceptAppointment())}),t._uU(1,"Accept"),t.qZA()}}function M(o,l){if(1&o){const n=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(n);const e=t.oxw(2);return t.KtG(e.rejectAppointment())}),t._uU(1,"Reject"),t.qZA()}}function b(o,l){if(1&o&&(t.TgZ(0,"div",14),t.YNc(1,P,2,0,"button",16),t.YNc(2,M,2,0,"button",17),t.qZA()),2&o){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",!n.isAppointmentAcceptedOrRejected()),t.xp6(1),t.Q6J("ngIf",!n.isAppointmentAcceptedOrRejected())}}function v(o,l){if(1&o){const n=t.EpF();t.TgZ(0,"div",14)(1,"button",20),t.NdJ("click",function(){t.CHM(n);const e=t.oxw();return t.KtG(e.concludeAppointment())}),t._uU(2,"Concluded"),t.qZA()()}if(2&o){const n=t.oxw();t.xp6(1),t.Q6J("disabled",n.isConcluded())}}let T=(()=>{class o{constructor(n,i,e,r){this.dialogRef=n,this.data=i,this.supabaseService=e,this.router=r,this.fetchClinicDetails(i.clinic)}ngOnInit(){this.fetchAppointmentDetails()}onClose(){this.dialogRef.close()}fetchClinicDetails(n){var i=this;return(0,p.Z)(function*(){try{const{data:e,error:r}=yield i.supabaseService.getSupabase().from("appointment_tbl").select("*").eq("id",n).single();if(r)console.error("Error fetching clinic details:",r);else{i.clinic=e;const{data:d,error:_}=yield i.supabaseService.getSupabase().from("pets_tbl").select("*").eq("id",i.clinic.aPet_id).single();_?console.error("Error fetching pet details:",_):i.petDetails=d}}catch(e){console.error("Error:",e)}})()}updateAppointment(){}getStatusColorClass(n){switch(n){case"Your appointment status is pending":return"yellow-status";case"Your Appointment has been approved":return"green-status";case"Your Appointment is Cancelled":return"red-status";default:return""}}rejectAppointment(){var n=this;return(0,p.Z)(function*(){if((yield a().fire({icon:"warning",title:"Reject Appointment",text:"Are you sure you want to reject this appointment?",showCancelButton:!0,confirmButtonColor:"#ff4081",cancelButtonColor:"#6c757d",confirmButtonText:"Reject",cancelButtonText:"Cancel"})).isConfirmed)try{yield n.supabaseService.getSupabase().from("appointment_tbl").update({status:"Your appointment has been Rejected"}).eq("id",n.clinic.id),a().fire({icon:"success",title:"Appointment Rejected",text:"The appointment has been rejected!",showConfirmButton:!1,timer:1500}),window.location.reload(),n.router.navigateByUrl("clinic/clinic-find")}catch(e){console.error("Error rejecting appointment:",e),a().fire({icon:"error",title:"Oops...",text:"An error occurred while rejecting the appointment. Please try again later."})}})()}acceptAppointment(){var n=this;return(0,p.Z)(function*(){if((yield a().fire({icon:"warning",title:"Accept Appointment",text:"Are you sure you want to accept this appointment?",showCancelButton:!0,confirmButtonColor:"#3f51b5",cancelButtonColor:"#6c757d",confirmButtonText:"Accept",cancelButtonText:"Cancel"})).isConfirmed)try{yield n.supabaseService.getSupabase().from("appointment_tbl").update({status:"Your Appointment has been Approved"}).eq("id",n.clinic.id),a().fire({icon:"success",title:"Appointment Accepted",text:"The appointment has been accepted!",showConfirmButton:!1,timer:1500}),window.location.reload(),n.router.navigateByUrl("clinic/clinic-find")}catch(e){console.error("Error accepting appointment:",e),a().fire({icon:"error",title:"Oops...",text:"An error occurred while accepting the appointment. Please try again later."})}})()}concludeAppointment(){var n=this;return(0,p.Z)(function*(){if((yield a().fire({icon:"warning",title:"Conclude Appointment",text:"Are you sure you want to conclude this appointment?",showCancelButton:!0,confirmButtonColor:"#28a745",cancelButtonColor:"#6c757d",confirmButtonText:"Conclude",cancelButtonText:"Cancel"})).isConfirmed)try{yield n.supabaseService.getSupabase().from("appointment_tbl").update({status:"Appointment is Concluded"}).eq("id",n.clinic.id),a().fire({icon:"success",title:"Appointment Concluded",text:"The appointment has been concluded!",showConfirmButton:!1,timer:1500}),window.location.reload(),n.router.navigateByUrl("clinic/clinic-find")}catch(e){console.error("Error concluding appointment:",e),a().fire({icon:"error",title:"Oops...",text:"An error occurred while concluding the appointment. Please try again later."})}})()}isAppointmentAcceptedOrRejected(){return this.clinic&&("Your Appointment has been Approved"===this.clinic.status||"Your appointment has been Rejected"===this.clinic.status)}isAppointmentApproved(){return this.clinic&&"Your Appointment has been Approved"===this.clinic.status}isConcluded(){return this.clinic&&"Appointment is Concluded"===this.clinic.status}fetchAppointmentDetails(){var n=this;return(0,p.Z)(function*(){try{const{data:i,error:e}=yield n.supabaseService.getSupabase().from("users_tbl").select("firstname").eq("id",n.clinic.aUsers_id),{data:r,error:d}=yield n.supabaseService.getSupabase().from("users_tbl").select("lastname").eq("id",n.clinic.aUsers_id);e||d?console.error("Error fetching user data:",e||d):(n.clinic.firstname=i[0]?.firstname,n.clinic.lastname=r[0]?.lastname)}catch(i){console.error("Error fetching appointment details:",i)}})()}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(s.so),t.Y36(s.WI),t.Y36(f.T),t.Y36(h.F0))};static#n=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-update-appointment"]],decls:15,vars:3,consts:[[1,"appointment-update-container"],[1,"title"],["mat-dialog-title",""],["mat-icon-button","",3,"click"],["mat-dialog-content","",1,"appointment-update-details"],[1,"details-container"],[1,"details-logo-container"],["src","assets/logo.png","alt","logo.png"],["class","details-txt-container",4,"ngIf"],[1,"appointment-update-btn-container"],["class","icons",4,"ngIf"],[1,"details-txt-container"],[1,"chips"],[1,"chip-container"],[1,"icons"],[4,"ngIf"],["mat-raised-button","","class","accept-btn",3,"click",4,"ngIf"],["mat-raised-button","","class","reject-btn",3,"click",4,"ngIf"],["mat-raised-button","",1,"accept-btn",3,"click"],["mat-raised-button","",1,"reject-btn",3,"click"],["mat-raised-button","",1,"conclude-btn",3,"disabled","click"]],template:function(i,e){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),t._uU(3,"Update Appointment"),t.qZA(),t.TgZ(4,"button",3),t.NdJ("click",function(){return e.onClose()}),t.TgZ(5,"mat-icon"),t._uU(6,"close"),t.qZA()()(),t.TgZ(7,"div",4)(8,"div",5)(9,"div",6),t._UZ(10,"img",7),t.qZA(),t.YNc(11,O,29,8,"div",8),t.qZA()(),t.TgZ(12,"div",9),t.YNc(13,b,3,2,"div",10),t.YNc(14,v,3,1,"div",10),t.qZA()()),2&i&&(t.xp6(11),t.Q6J("ngIf",e.clinic),t.xp6(2),t.Q6J("ngIf",!e.isAppointmentAcceptedOrRejected()),t.xp6(1),t.Q6J("ngIf",e.isAppointmentApproved()))},dependencies:[C.O5,s.uh,s.xY,u.lW,u.RK,x.Hw],styles:[".appointment-update-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.appointment-update-container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin:20px}.appointment-update-container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0}.appointment-update-container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{margin-left:10px;cursor:pointer;font-size:1.5em;border-radius:50%;width:40px;height:40px;display:flex;justify-content:center;align-items:center;background-color:#ddd}.appointment-update-container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{width:auto;min-width:130px;max-width:500px}.appointment-update-container[_ngcontent-%COMP%]   .details-txt-container[_ngcontent-%COMP%]{width:60%}.appointment-update-container[_ngcontent-%COMP%]   .details-txt-container[_ngcontent-%COMP%]   .dropdown-container[_ngcontent-%COMP%]{margin-bottom:20px}.appointment-update-container[_ngcontent-%COMP%]   .details-txt-container[_ngcontent-%COMP%]   .dropdown-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-right:10px}.appointment-update-container[_ngcontent-%COMP%]   .details-txt-container[_ngcontent-%COMP%]   .dropdown-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:8px;border:1px solid #ccc;border-radius:4px;cursor:pointer}@media screen and (max-width: 600px){.appointment-update-container[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]{width:100%}.appointment-update-container[_ngcontent-%COMP%]   .details-logo-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;margin-right:0}.appointment-update-container[_ngcontent-%COMP%]   .details-txt-container[_ngcontent-%COMP%]{width:90%;margin-top:20px}}.details-logo-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:150px;height:auto}.details-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;justify-content:center;flex-direction:column}.appointment-update-details[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;flex-wrap:wrap}.appointment-update-btn-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:20px}.appointment-update-btn-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-bottom:20px;width:200px}.chips[_ngcontent-%COMP%]{display:flex}.chip-container[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{color:#fff!important;--mdc-chip-label-text-color: #ffff}.chip-container[_ngcontent-%COMP%]   .pink[_ngcontent-%COMP%]{background-color:#ff4081}.chip-container[_ngcontent-%COMP%]   .blue[_ngcontent-%COMP%]{background-color:#3f51b5}.chip-container[_ngcontent-%COMP%]   .orange[_ngcontent-%COMP%]{background-color:#ff9800}.chip-container[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{width:auto;min-width:130px;max-width:500px}@media screen and (max-width: 769px){.title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px}}.icons[_ngcontent-%COMP%]{display:flex;margin-top:20px}.icons[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-left:10px}.icons[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin:3px}"]})}return o})()}}]);