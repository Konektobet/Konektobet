"use strict";(self.webpackChunkKonektobet=self.webpackChunkKonektobet||[]).push([[6466],{6466:(q,Z,r)=>{r.d(Z,{F:()=>L});var E=r(5861),e=r(5879),o=r(6223),p=r(6028),y=r(3519),d=r.n(y),f=r(5619),h=r(7921),g=r(7398),m=r(7700),P=r(7344),C=r(6814),v=r(9157),O=r(3680),b=r(617),M=r(2032),x=r(2296),S=r(4630),u=r(2557);function U(a,s){if(1&a&&(e.TgZ(0,"mat-option",28),e._uU(1),e.qZA()),2&a){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function D(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"mat-chip",29),e.NdJ("removed",function(){const l=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.removeService(l))}),e._uU(1),e.TgZ(2,"mat-icon",30),e._uU(3,"cancel"),e.qZA()()}if(2&a){const t=s.$implicit;e.xp6(1),e.hij(" ",t," ")}}function I(a,s){if(1&a&&(e.TgZ(0,"mat-option",28),e._uU(1),e.qZA()),2&a){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function N(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"mat-chip",29),e.NdJ("removed",function(){const l=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.removeSchedule(l))}),e._uU(1),e.TgZ(2,"mat-icon",30),e._uU(3,"cancel"),e.qZA()()}if(2&a){const t=s.$implicit;e.xp6(1),e.hij(" ",t," ")}}let L=(()=>{class a{constructor(t,i,n){this.formBuilder=t,this.dialogRef=i,this.supabaseService=n,this.serviceControl=new o.NI,this.scheduleControl=new o.NI,this.user=null,this.separatorKeysCodes=[p.K5,p.OC],this.selectedServices=[],this.selectedSchedules=[],this.servicesSubject=new f.X(["Confinement","Boarding","Grooming","Pet Supply","Home Service","Deworming","CBC","Blood Chemistry","PCR Test","Treatment","Vaccination","Surgery","Teeth Cleaning","Lab Tests","Ultrasound","Digital Xray"]),this.schedulesSubject=new f.X(["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"]),this.services$=this.servicesSubject.asObservable(),this.schedule$=this.schedulesSubject.asObservable(),this.services=["Confinement","Boarding","Grooming","Pet Supply","Home Service","Deworming","CBC","Blood Chemistry","PCR Test","Treatment","Vaccination","Surgery","Teeth Cleaning","Lab Tests","Ultrasound","Digital Xray"],this.schedules=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],this.clinicAdded=new e.vpe}ngOnInit(){this.clinicForm=this.formBuilder.group({adName:["",o.kI.required],adAddress:["",o.kI.required],adNumber:["",o.kI.required],adEmail:["",o.kI.required],adLink:["",o.kI.required],adGrmPrice:["",o.kI.required],adLabPrice:["",o.kI.required],adSrgPrice:["",o.kI.required],adSTime:["",o.kI.required],adETime:["",o.kI.required],adService:[""],adSchedule:[""]}),this.filteredServices=this.serviceControl.valueChanges.pipe((0,h.O)(""),(0,g.U)(t=>this.filterServices(t||""))),this.filteredSchedules=this.scheduleControl.valueChanges.pipe((0,h.O)(""),(0,g.U)(t=>this.filterSchedules(t||"")))}addClinic(){var t=this;return(0,E.Z)(function*(){if(t.clinicForm.valid)try{const i=t.supabaseService.getClinicAuthStateSnapshot();if(i){const{data:n,error:l}=yield t.supabaseService.getSupabase().from("clinic_users_tbl").select("id").eq("email",i.email);if(console.log("session id: ",i.id),l)console.error("Error fetching user data:",l);else if(n&&n.length>0){const c=parseInt(t.clinicForm.value.adSTime.split(":")[0]),j=t.clinicForm.value.adSTime.split(":")[1],A=parseInt(t.clinicForm.value.adETime.split(":")[0]),B=t.clinicForm.value.adETime.split(":")[1],F=`${t.formatHour(c)}:${j} ${c>=12?"pm":"am"} to ${t.formatHour(A)}:${B} ${A>=12?"pm":"am"}`,_={...t.clinicForm.value,adUsers_id:n[0].id,adService:t.selectedServices.join(", "),adTime:F,adSchedule:t.selectedSchedules.join(", ")};console.log(t.clinicForm.value);const{data:K,error:T}=yield t.supabaseService.getSupabase().from("admin_clinic_tbl").insert([_]);console.log(_),T?(d().fire({icon:"error",title:"Error",text:"An error occurred while adding the clinic. Please try again."}),console.error("Error inserting clinic:",T)):(console.log("Clinic added successfully:",K),d().fire({icon:"success",title:"Clinic Added!",text:"Kindly wait for the verification and approval of your clinic."}),t.clearNewClinic(),t.dialogRef.close(_))}else console.error("No user data found for the logged-in user.")}else console.error("No logged-in user found.")}catch(i){console.error("Error:",i),d().fire({icon:"error",title:"Error",text:"An error occurred while adding the clinic. Please try again."})}})()}formatHour(t){return 0===t?"12":t>12?(t-12).toString():t.toString()}addService(t){const i=t.option.viewValue;this.selectedServices.push(i),this.serviceControl.setValue(""),this.servicesSubject.next(this.servicesSubject.value.filter(n=>n!==i))}removeService(t){const i=this.selectedServices.indexOf(t);i>=0&&(this.servicesSubject.next([...this.servicesSubject.value,t]),this.selectedServices.splice(i,1))}filterServices(t){const i=this.normalizeValue(t);return this.servicesSubject.value.filter(n=>this.normalizeValue(n).includes(i))}addSchedule(t){const i=t.option.viewValue;this.selectedSchedules.push(i),this.scheduleControl.setValue(""),this.schedulesSubject.next(this.schedulesSubject.value.filter(n=>n!==i))}removeSchedule(t){const i=this.selectedSchedules.indexOf(t);i>=0&&(this.schedulesSubject.next([...this.schedulesSubject.value,t]),this.selectedSchedules.splice(i,1))}filterSchedules(t){const i=this.normalizeValue(t);return this.schedulesSubject.value.filter(n=>this.normalizeValue(n).includes(i))}normalizeValue(t){return t.toLowerCase().replace(/\s/g,"")}clearNewClinic(){this.clinicForm.reset(),this.selectedServices=[],this.selectedSchedules=[],this.services=["Confinement","Boarding","Grooming","Pet Supply","Home Service","Deworming","CBC","Blood Chemistry","PCR Test","Treatment","Vaccination","Surgery","Teeth Cleaning","Lab Tests","Ultrasound","Digital Xray"],this.schedules=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"]}static#e=this.\u0275fac=function(i){return new(i||a)(e.Y36(o.qu),e.Y36(m.so),e.Y36(P.T))};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-add-clinic"]],outputs:{clinicAdded:"clinicAdded"},decls:76,vars:17,consts:[[1,"outer-container"],[1,"form-container",3,"formGroup","ngSubmit"],["mat-dialog-title","",1,"add-title"],["mat-dialog-content","",1,"details-container"],["matInput","","formControlName","adName"],["matInput","","formControlName","adAddress"],["matInput","","formControlName","adNumber"],["matInput","","formControlName","adEmail"],["matInput","","formControlName","adGrmPrice"],["matInput","","formControlName","adLabPrice"],["matInput","","formControlName","adSrgPrice"],["type","time","matInput","","formControlName","adSTime","placeholder","HH:MM am/pm",3,"step"],["type","time","matInput","","formControlName","adETime","placeholder","HH:MM am/pm",3,"step"],["matInput","","formControlName","adLink"],[1,"add-clinic-btn"],["mat-raised-button","","type","submit","color","primary"],[1,"containers"],[1,"service-container"],[1,"form-container1",3,"formGroup","ngSubmit"],["matInput","","formControlName","adService",3,"formControl","matAutocomplete"],[3,"optionSelected"],["serviceAuto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[1,"box"],[3,"removed",4,"ngFor","ngForOf"],[1,"sched-container"],["matInput","","formControlName","adSchedule",3,"formControl","matAutocomplete"],["scheduleAuto","matAutocomplete"],[3,"value"],[3,"removed"],["matChipRemove",""]],template:function(i,n){if(1&i&&(e.TgZ(0,"div",0)(1,"form",1),e.NdJ("ngSubmit",function(){return n.addClinic()}),e.TgZ(2,"div")(3,"h1",2),e._uU(4,"Add Clinic"),e.qZA(),e.TgZ(5,"div",3)(6,"mat-form-field")(7,"mat-label"),e._uU(8,"Clinic Name"),e.qZA(),e._UZ(9,"input",4),e.qZA(),e.TgZ(10,"mat-form-field")(11,"mat-label"),e._uU(12,"Address"),e.qZA(),e._UZ(13,"input",5),e.qZA(),e.TgZ(14,"mat-form-field")(15,"mat-label"),e._uU(16,"Contact Number"),e.qZA(),e._UZ(17,"input",6),e.qZA(),e.TgZ(18,"mat-form-field")(19,"mat-label"),e._uU(20,"Email"),e.qZA(),e._UZ(21,"input",7),e.qZA(),e.TgZ(22,"mat-form-field")(23,"mat-label"),e._uU(24,"Starting Grooming Price"),e.qZA(),e._UZ(25,"input",8),e.qZA(),e.TgZ(26,"mat-form-field")(27,"mat-label"),e._uU(28,"Starting Service Price"),e.qZA(),e._UZ(29,"input",9),e.qZA(),e.TgZ(30,"mat-form-field")(31,"mat-label"),e._uU(32,"Starting Surgery Price"),e.qZA(),e._UZ(33,"input",10),e.qZA(),e.TgZ(34,"mat-form-field")(35,"mat-label"),e._uU(36,"Opening"),e.qZA(),e._UZ(37,"input",11),e.qZA(),e.TgZ(38,"mat-form-field")(39,"mat-label"),e._uU(40,"Closing"),e.qZA(),e._UZ(41,"input",12),e.qZA(),e.TgZ(42,"mat-form-field")(43,"mat-label"),e._uU(44,"Facebook/Website Link"),e.qZA(),e._UZ(45,"input",13),e.qZA(),e.TgZ(46,"div",14)(47,"button",15),e._uU(48,"Add Clinic"),e.qZA()()()()(),e.TgZ(49,"div",16)(50,"div",17)(51,"form",18),e.NdJ("ngSubmit",function(){return n.addClinic()}),e.TgZ(52,"mat-form-field")(53,"mat-label"),e._uU(54,"Search for Service"),e.qZA(),e._UZ(55,"input",19),e.TgZ(56,"mat-autocomplete",20,21),e.NdJ("optionSelected",function(c){return n.addService(c)}),e.YNc(58,U,2,2,"mat-option",22),e.ALo(59,"async"),e.qZA()()(),e.TgZ(60,"div",23)(61,"mat-chip-listbox"),e.YNc(62,D,4,1,"mat-chip",24),e.qZA()()(),e.TgZ(63,"div",25)(64,"form",18),e.NdJ("ngSubmit",function(){return n.addClinic()}),e.TgZ(65,"mat-form-field")(66,"mat-label"),e._uU(67,"Search for Schedule"),e.qZA(),e._UZ(68,"input",26),e.TgZ(69,"mat-autocomplete",20,27),e.NdJ("optionSelected",function(c){return n.addSchedule(c)}),e.YNc(71,I,2,2,"mat-option",22),e.ALo(72,"async"),e.qZA()()(),e.TgZ(73,"div",23)(74,"mat-chip-listbox"),e.YNc(75,N,4,1,"mat-chip",24),e.qZA()()()()()),2&i){const l=e.MAs(57),c=e.MAs(70);e.xp6(1),e.Q6J("formGroup",n.clinicForm),e.xp6(36),e.Q6J("step",900),e.xp6(4),e.Q6J("step",900),e.xp6(10),e.Q6J("formGroup",n.clinicForm),e.xp6(4),e.Q6J("formControl",n.serviceControl)("matAutocomplete",l),e.xp6(3),e.Q6J("ngForOf",e.lcZ(59,13,n.filteredServices)),e.xp6(4),e.Q6J("ngForOf",n.selectedServices),e.xp6(2),e.Q6J("formGroup",n.clinicForm),e.xp6(4),e.Q6J("formControl",n.scheduleControl)("matAutocomplete",c),e.xp6(3),e.Q6J("ngForOf",e.lcZ(72,15,n.filteredSchedules)),e.xp6(4),e.Q6J("ngForOf",n.selectedSchedules)}},dependencies:[C.sg,o._Y,o.Fj,o.JJ,o.JL,o.oH,o.sg,o.u,v.KE,v.hX,O.ey,b.Hw,M.Nt,x.lW,S.XC,S.ZL,m.uh,m.xY,u.HS,u.z2,u.qH,C.Ov],styles:[".add-title[_ngcontent-%COMP%]{margin-top:20px}.outer-container[_ngcontent-%COMP%]{display:flex}.form-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;flex-direction:column;width:30%}.form-container1[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;flex-direction:column;width:70%}.details-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.add-clinic-btn[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:0 0 30px}.containers[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:space-around}.service-container[_ngcontent-%COMP%], .healthcare-container[_ngcontent-%COMP%], .sched-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:center;margin-top:35px;padding:0 24px 9px}.container-title[_ngcontent-%COMP%]{display:flex;justify-content:center}.box[_ngcontent-%COMP%]{display:flex;width:300px;height:70%;border:1px solid #f5f5f5;background-color:#f5f5f5;border-radius:20px;box-sizing:border-box;margin:0 0 90px;flex-wrap:wrap;flex-direction:column}"]})}return a})()}}]);