"use strict";(self.webpackChunkKonektobet=self.webpackChunkKonektobet||[]).push([[5136],{5136:(Y,v,l)=>{l.r(v),l.d(v,{OnboardingModule:()=>B});var b=l(6814),Z=l(1896),g=l(5861),a=l(6223),P=l(3519),h=l.n(P),e=l(5879),U=l(7344),C=l(2296),f=l(1545),_=l(9157),A=l(2032),y=l(6385),T=l(3680),S=l(8525);function O(o,m){1&o&&e._uU(0,"Details")}function x(o,m){if(1&o&&(e.TgZ(0,"mat-option",48),e._uU(1),e.qZA()),2&o){const t=m.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function N(o,m){if(1&o&&(e.TgZ(0,"mat-option",48),e._uU(1),e.qZA()),2&o){const t=m.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function M(o,m){1&o&&e._uU(0,"Uploads")}function I(o,m){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(t.selectedBP.name)}}function k(o,m){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(t.selectedHS.name)}}function F(o,m){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(t.selectedVP.name)}}function E(o,m){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(t.selectedPA.name)}}function J(o,m){1&o&&e._uU(0,"Done")}const G=[{path:"",component:(()=>{class o{constructor(t,n,i){this.formBuilder=t,this.supabaseService=n,this.router=i,this.days=new a.NI(""),this.dayList=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],this.service=new a.NI(""),this.services=["Confinement","Boarding","Grooming","Pet Supply","Home Service","Deworming","CBC","Blood Chemistry","PCR Test","Treatment","Vaccination","Surgery","Teeth Cleaning","Lab Tests","Ultrasound","Digital Xray"],this.isEditable=!1,this.selectedBP=null,this.selectedHS=null,this.selectedVP=null,this.selectedPA=null,this.imageUrl=null}ngOnInit(){this.firstFormGroup=this.formBuilder.group({adName:["",a.kI.required],adAddress:["",a.kI.required],adNumber:["",a.kI.required],adEmail:["",a.kI.required],adLink:["",a.kI.required],adSTime:["",a.kI.required],adETime:["",a.kI.required],adGrmPrice:["",a.kI.required],adLabPrice:["",a.kI.required],adSrgPrice:["",a.kI.required],adSchedule:["",a.kI.required],adService:["",a.kI.required]}),this.secondFormGroup=this.formBuilder.group({businessPermit:["",a.kI.required],healthSafety:["",a.kI.required],vetPractice:["",a.kI.required],permApps:["",a.kI.required]})}loadAcceptedClinic(){var t=this;return(0,g.Z)(function*(){try{const n=t.supabaseService.getClinicAuthStateSnapshot();if(n){const{data:i,error:c}=yield t.supabaseService.getSupabase().from("clinic_users_tbl").select("*").eq("email",n.email);if(c)console.error("Error fetching user data:",c);else if(i&&i.length>0){const s=i[0].id,{data:r,error:p}=yield t.supabaseService.getSupabase().from("admin_clinic_tbl").select("*").eq("adUsers_id",s),{data:d,error:u}=yield t.supabaseService.getSupabase().from("clinic_tbl").select("*").eq("cUsers_id",s);!p&&r&&0===r.length||!u&&d&&0===d.length?(t.router.navigate(["/clinic/onboarding"]),console.log("Clinic data found:",d),console.log("Admin data found:",r)):(t.router.navigate(["/clinic/clinic-home"]),console.log("Clinic data found:",d),console.log("Admin data found:",r))}else console.error("No user data found for the logged-in user.")}else console.error("No logged-in user found.")}catch(n){console.error("Error:",n),h().fire({icon:"error",title:"Error",text:"An error occurred while loading the clinic. Please try again."})}})()}submitForm1(){var t=this;return(0,g.Z)(function*(){const n={...t.firstFormGroup.value};console.log(n)})()}submitForm2(){var t=this;return(0,g.Z)(function*(){const n={...t.secondFormGroup.value};console.log(n)})()}addClinic(){var t=this;return(0,g.Z)(function*(){try{const n=t.supabaseService.getClinicAuthStateSnapshot();if(n){const{data:i,error:c}=yield t.supabaseService.getSupabase().from("clinic_users_tbl").select("id").eq("email",n.email);if(c)console.error("Error fetching user data:",c);else if(i&&i.length>0){const s=parseInt(t.firstFormGroup.value.adSTime.split(":")[0]),r=t.firstFormGroup.value.adSTime.split(":")[1],p=parseInt(t.firstFormGroup.value.adETime.split(":")[0]),d=t.firstFormGroup.value.adETime.split(":")[1],u=`${t.formatHour(s)}:${r} ${s>=12?"pm":"am"} to ${t.formatHour(p)}:${d} ${p>=12?"pm":"am"}`;if(i[0]){const Q={...t.firstFormGroup.value,adUsers_id:i[0].id,adTime:u,adSchedule:t.dayList.join(", "),adService:t.services.join(", ")},{data:w,error:q}=yield t.supabaseService.getSupabase().from("admin_clinic_tbl").insert([Q]);q?(h().fire({icon:"error",title:"Error",text:"An error occurred while adding the clinic. Please try again."}),console.error("Error inserting clinic:",q)):(console.log("Clinic added successfully:",w),t.router.navigate(["/clinic/clinic-home"]),h().fire({icon:"success",title:"Onboarding Done!",text:"Kindly wait for the verification and approval of your clinic within 1 to 3 working days."}))}else console.error("No user data found for the logged-in user.")}}}catch(n){console.error("Error:",n),h().fire({icon:"error",title:"Error",text:"An error occurred while adding the clinic. Please try again."})}})()}addDocs(t){var n=this;return(0,g.Z)(function*(){if(t.target.files){n.file=t.target.files[0];const i=`upload_${n.file.name}`,{data:c,error:s}=yield n.supabaseService.getSupabase().storage.from("documents").upload(i,n.file,{cacheControl:"3600",upsert:!0});if(s)return void console.error("Error uploading docs:",s);console.log("Docs has been uploaded successfully",c)}})()}formatHour(t){return 0===t?"12":t>12?(t-12).toString():t.toString()}businessPermitSelected(t){var n=this;return(0,g.Z)(function*(){if(n.supabaseService.getClinicAuthStateSnapshot()){const s=n.firstFormGroup.value.adName,r=t.target.files[0];if(r){n.selectedBP=r;const p=`${s}_businessPermit`,{data:d,error:u}=yield n.supabaseService.getSupabase().storage.from("documents").upload(p,r,{cacheControl:"3600",upsert:!0});if(u)return void console.error("Error uploading docs:",u);console.log("Business Permit has been uploaded successfully",d)}}})()}healthSafetySelected(t){var n=this;return(0,g.Z)(function*(){if(n.supabaseService.getClinicAuthStateSnapshot()){const s=n.firstFormGroup.value.adName,r=t.target.files[0];if(r){n.selectedHS=r;const p=`${s}_healthSafety`,{data:d,error:u}=yield n.supabaseService.getSupabase().storage.from("documents").upload(p,r,{cacheControl:"3600",upsert:!0});if(u)return void console.error("Error uploading docs:",u);console.log("Health and Safety Cert has been uploaded successfully",d)}}})()}vetPracticeSelected(t){var n=this;return(0,g.Z)(function*(){if(n.supabaseService.getClinicAuthStateSnapshot()){const s=n.firstFormGroup.value.adName,r=t.target.files[0];if(r){n.selectedVP=r;const p=`${s}_vetPractice`,{data:d,error:u}=yield n.supabaseService.getSupabase().storage.from("documents").upload(p,r,{cacheControl:"3600",upsert:!0});if(u)return void console.error("Error uploading docs:",u);console.log("Vet Practice Cert has been uploaded successfully",d)}}})()}permissionApplicationsSelected(t){var n=this;return(0,g.Z)(function*(){if(n.supabaseService.getClinicAuthStateSnapshot()){const s=n.firstFormGroup.value.adName,r=t.target.files[0];if(r){n.selectedPA=r;const p=`${s}_permApps`,{data:d,error:u}=yield n.supabaseService.getSupabase().storage.from("documents").upload(p,r,{cacheControl:"3600",upsert:!0});if(u)return void console.error("Error uploading docs:",u);console.log("Permission Applications has been uploaded successfully",d)}}})()}previewImage(t){const n=new FileReader;n.readAsDataURL(t),n.onload=()=>{this.imageUrl=n.result}}static#e=this.\u0275fac=function(n){return new(n||o)(e.Y36(a.qu),e.Y36(U.T),e.Y36(Z.F0))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-onboarding"]],decls:148,vars:14,consts:[[1,"outer-container"],[1,"inner-container"],[1,"clinics"],["linear",""],["stepper",""],[3,"stepControl"],[3,"formGroup"],["matStepLabel",""],[1,"clinic-details"],[1,"col"],["appearance","outline"],["matInput","","formControlName","adName","required",""],["matInput","","formControlName","adAddress","required",""],["matInput","","formControlName","adNumber","required",""],["matInput","","formControlName","adEmail","required",""],["matInput","","formControlName","adLink","required",""],[1,"space"],[1,"clinic-availability"],["type","time","matInput","","formControlName","adSTime","placeholder","HH:MM am/pm","required","",3,"step"],["type","time","matInput","","formControlName","adETime","placeholder","HH:MM am/pm","required","",3,"step"],["formControlName","adSchedule",3,"multiple"],[3,"value",4,"ngFor","ngForOf"],[1,"clinic-offers"],["formControlName","adService",3,"multiple"],["matInput","","formControlName","adGrmPrice","required",""],["matInput","","formControlName","adLabPrice","required",""],["matInput","","formControlName","adSrgPrice","required",""],["mat-raised-button","","color","primary","matStepperNext","",3,"click"],[1,"uploadCerts"],["appearance","outline",1,"input-field"],["type","file","id","input-file","accept","image/*","formControlName","businessPermit","required","",2,"display","none",3,"change"],["inputBS",""],["mat-icon-button","","matSuffix","",3,"click"],["src","assets/inputUpload.png","alt",""],[4,"ngIf"],["type","file","id","input-file","accept","image/*","formControlName","healthSafety","required","",2,"display","none",3,"change"],["inputHS",""],["type","file","id","input-file","accept","image/*","formControlName","vetPractice","required","",2,"display","none",3,"change"],["inputVP",""],["type","file","id","input-file","accept","image/*","formControlName","permApps","required","",2,"display","none",3,"change"],["inputPA",""],[1,"btns"],["mat-raised-button","","color","primary","matStepperPrevious","",3,"click"],[1,"done-container"],[1,"text"],[1,"done"],["src","assets/highfive.svg","alt",""],["mat-raised-button","","color","primary","type","submit",3,"click"],[3,"value"]],template:function(n,i){if(1&n){const c=e.EpF();e.TgZ(0,"html")(1,"body")(2,"div",0)(3,"div",1)(4,"h1",2),e._uU(5,"Clinic Onboarding"),e.qZA(),e.TgZ(6,"mat-stepper",3,4)(8,"mat-step",5)(9,"form",6),e.YNc(10,O,1,0,"ng-template",7),e.TgZ(11,"div",8)(12,"h2"),e._uU(13,"Clinic Details"),e.qZA(),e.TgZ(14,"div",9)(15,"mat-form-field",10)(16,"mat-label"),e._uU(17,"Clinic Name"),e.qZA(),e._UZ(18,"input",11),e.qZA(),e.TgZ(19,"mat-form-field",10)(20,"mat-label"),e._uU(21,"Address"),e.qZA(),e._UZ(22,"input",12),e.qZA()(),e.TgZ(23,"div",9)(24,"mat-form-field",10)(25,"mat-label"),e._uU(26,"Phone Number"),e.qZA(),e._UZ(27,"input",13),e.qZA(),e.TgZ(28,"mat-form-field",10)(29,"mat-label"),e._uU(30,"Email Address"),e.qZA(),e._UZ(31,"input",14),e.qZA()(),e.TgZ(32,"mat-form-field",10)(33,"mat-label"),e._uU(34,"Facebook Link"),e.qZA(),e._UZ(35,"input",15),e.qZA(),e._UZ(36,"div"),e.qZA(),e._UZ(37,"mat-divider")(38,"div",16),e.TgZ(39,"div",17)(40,"h2"),e._uU(41,"Clinic Availability"),e.qZA(),e.TgZ(42,"div",9)(43,"mat-form-field",10)(44,"mat-label"),e._uU(45,"Opening Time"),e.qZA(),e._UZ(46,"input",18),e.qZA(),e.TgZ(47,"mat-form-field",10)(48,"mat-label"),e._uU(49,"Closing Time"),e.qZA(),e._UZ(50,"input",19),e.qZA()(),e.TgZ(51,"mat-form-field",10)(52,"mat-label"),e._uU(53,"Day Available"),e.qZA(),e.TgZ(54,"mat-select",20),e.YNc(55,x,2,2,"mat-option",21),e.qZA()()(),e._UZ(56,"mat-divider")(57,"div",16),e.TgZ(58,"div",22)(59,"h2"),e._uU(60,"Clinic Offers"),e.qZA(),e.TgZ(61,"div",9)(62,"mat-form-field",10)(63,"mat-label"),e._uU(64,"Services Offered"),e.qZA(),e.TgZ(65,"mat-select",23),e.YNc(66,N,2,2,"mat-option",21),e.qZA()(),e.TgZ(67,"mat-form-field",10)(68,"mat-label"),e._uU(69,"Grooming Price"),e.qZA(),e._UZ(70,"input",24),e.qZA()(),e.TgZ(71,"div",9)(72,"mat-form-field",10)(73,"mat-label"),e._uU(74,"Laboratory Price"),e.qZA(),e._UZ(75,"input",25),e.qZA(),e.TgZ(76,"mat-form-field",10)(77,"mat-label"),e._uU(78,"Surgery Price"),e.qZA(),e._UZ(79,"input",26),e.qZA()()(),e.TgZ(80,"div")(81,"button",27),e.NdJ("click",function(){return i.submitForm1()}),e._uU(82,"Next"),e.qZA()()()(),e.TgZ(83,"mat-step",5)(84,"form",6),e.YNc(85,M,1,0,"ng-template",7),e.TgZ(86,"h2"),e._uU(87,"Upload Documents"),e.qZA(),e.TgZ(88,"div",28)(89,"h3"),e._uU(90,"Business Permit"),e.qZA(),e.TgZ(91,"div",29)(92,"input",30,31),e.NdJ("change",function(r){return i.businessPermitSelected(r)}),e.qZA(),e.TgZ(94,"button",32),e.NdJ("click",function(){e.CHM(c);const r=e.MAs(93);return e.KtG(r.click())}),e._UZ(95,"img",33),e.qZA(),e.YNc(96,I,2,1,"span",34),e.qZA()(),e.TgZ(97,"div",28)(98,"h3"),e._uU(99,"Health and Safety Certifications"),e.qZA(),e.TgZ(100,"div",29)(101,"input",35,36),e.NdJ("change",function(r){return i.healthSafetySelected(r)}),e.qZA(),e.TgZ(103,"button",32),e.NdJ("click",function(){e.CHM(c);const r=e.MAs(102);return e.KtG(r.click())}),e._UZ(104,"img",33),e.qZA(),e.YNc(105,k,2,1,"span",34),e.qZA()(),e.TgZ(106,"div",28)(107,"h3"),e._uU(108,"Veterinary Practice Certifications"),e.qZA(),e.TgZ(109,"div",29)(110,"input",37,38),e.NdJ("change",function(r){return i.vetPracticeSelected(r)}),e.qZA(),e.TgZ(112,"button",32),e.NdJ("click",function(){e.CHM(c);const r=e.MAs(111);return e.KtG(r.click())}),e._UZ(113,"img",33),e.qZA(),e.YNc(114,F,2,1,"span",34),e.qZA()(),e.TgZ(115,"div",28)(116,"h3"),e._uU(117,"Permission Applications"),e.qZA(),e.TgZ(118,"div",29)(119,"input",39,40),e.NdJ("change",function(r){return i.permissionApplicationsSelected(r)}),e.qZA(),e.TgZ(121,"button",32),e.NdJ("click",function(){e.CHM(c);const r=e.MAs(120);return e.KtG(r.click())}),e._UZ(122,"img",33),e.qZA(),e.YNc(123,E,2,1,"span",34),e.qZA()(),e.TgZ(124,"div",41)(125,"button",42),e.NdJ("click",function(){e.CHM(c);const r=e.MAs(7);return e.KtG(r.previous())}),e._uU(126,"Back"),e.qZA(),e.TgZ(127,"button",27),e.NdJ("click",function(){return i.submitForm2()}),e._uU(128,"Next"),e.qZA()()()(),e.TgZ(129,"mat-step"),e.YNc(130,J,1,0,"ng-template",7),e.TgZ(131,"div",43)(132,"div",44)(133,"h1"),e._uU(134,"Welcome Aboard, Raniel!"),e.qZA(),e.TgZ(135,"h2"),e._uU(136,"Thank you for joining us. We're excited to have you"),e._UZ(137,"br"),e._uU(138," as part of our community."),e.qZA(),e.TgZ(139,"h3"),e._uU(140,"Your application are being reviewed. This process typically"),e._UZ(141,"br"),e._uU(142," takes 1 to 3 working days."),e.qZA()(),e.TgZ(143,"div",45),e._UZ(144,"img",46),e.qZA(),e.TgZ(145,"div",41)(146,"button",47),e.NdJ("click",function(){return i.addClinic()}),e._uU(147,"Finished"),e.qZA()()()()()()()()()}2&n&&(e.xp6(8),e.Q6J("stepControl",i.firstFormGroup),e.xp6(1),e.Q6J("formGroup",i.firstFormGroup),e.xp6(37),e.Q6J("step",900),e.xp6(4),e.Q6J("step",900),e.xp6(4),e.Q6J("multiple",!0),e.xp6(1),e.Q6J("ngForOf",i.dayList),e.xp6(10),e.Q6J("multiple",!0),e.xp6(1),e.Q6J("ngForOf",i.services),e.xp6(17),e.Q6J("stepControl",i.secondFormGroup),e.xp6(1),e.Q6J("formGroup",i.secondFormGroup),e.xp6(12),e.Q6J("ngIf",i.selectedBP),e.xp6(9),e.Q6J("ngIf",i.selectedHS),e.xp6(9),e.Q6J("ngIf",i.selectedVP),e.xp6(9),e.Q6J("ngIf",i.selectedPA))},dependencies:[b.sg,b.O5,C.lW,C.RK,f.C0,f.VY,f.Vq,f.Ic,f.fd,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.sg,a.u,_.KE,_.hX,_.R9,A.Nt,y.d,T.ey,S.gD],styles:["body[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:0;background-color:#fff}.outer-container[_ngcontent-%COMP%]{display:flex}.inner-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{border:3px solid #3f51b5;padding:30px;border-radius:10px}.clinics[_ngcontent-%COMP%]{text-align:center;font-size:30px;font-weight:700;margin-top:30px;margin-bottom:0}.col[_ngcontent-%COMP%]{display:flex;gap:20px}.title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-bottom:20px}.title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0}.upload-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#fff;margin-bottom:10px}.space[_ngcontent-%COMP%]{margin-bottom:10px}.file[_ngcontent-%COMP%]{display:flex;gap:10px;margin-left:60px;margin-bottom:20px;align-items:center}.file[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}.btns[_ngcontent-%COMP%]{display:flex;gap:20px;margin-top:20px}.uploadCerts[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{width:100%}.uploadCerts[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:500;margin:0}.uploadCerts[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px;height:24px;padding-right:20px}.uploadCerts[_ngcontent-%COMP%]   .input-field[_ngcontent-%COMP%]{border:1px solid black;border-radius:5px;display:flex;align-items:center;flex-direction:row-reverse;justify-content:space-between;padding:0 10px 0 15px}.uploadCerts[_ngcontent-%COMP%]   mat-label[_ngcontent-%COMP%]{outline:none;margin-top:-48px;font-size:13px;background-color:#fff;position:relative;padding:0 5px;margin-left:-5px}.done-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100%}.done-container[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column;text-align:center}.done-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-weight:700}.done-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:400px;height:auto}"]})}return o})()}];let D=(()=>{class o{static#e=this.\u0275fac=function(n){return new(n||o)};static#t=this.\u0275mod=e.oAB({type:o});static#n=this.\u0275inj=e.cJS({imports:[Z.Bz.forChild(G),Z.Bz]})}return o})();var H=l(617);let B=(()=>{class o{static#e=this.\u0275fac=function(n){return new(n||o)};static#t=this.\u0275mod=e.oAB({type:o});static#n=this.\u0275inj=e.cJS({imports:[b.ez,D,C.ot,f.T5,a.UX,a.u5,_.lN,A.c,y.t,H.Ps,T.Ng,S.LD]})}return o})()}}]);