"use strict";(self.webpackChunkKonektobet=self.webpackChunkKonektobet||[]).push([[1898],{1898:(S,p,n)=>{n.r(p),n.d(p,{PetProfileModule:()=>O});var d=n(6814),i=n(1896),f=n(5861),m=n(3304),e=n(5879),h=n(7700),P=n(7344),u=n(2296),c=n(5195);const v=function(r){return["/profiles/pet-details",r]};function x(r,Z){if(1&r&&(e.TgZ(0,"mat-card",7)(1,"div",8),e._UZ(2,"img",9),e.qZA(),e.TgZ(3,"mat-card-content")(4,"div",10)(5,"div",11)(6,"h1",12)(7,"strong"),e._uU(8),e.qZA()(),e.TgZ(9,"h3",13),e._uU(10),e.qZA()(),e.TgZ(11,"div",14)(12,"button",15),e._uU(13,"See more..."),e.qZA()()()()()),2&r){const o=Z.$implicit;e.xp6(2),e.Q6J("src",o.profile||"assets/defaultvax.png",e.LSH),e.xp6(6),e.Oqu(o.petName),e.xp6(2),e.Oqu(o.petBreed),e.xp6(2),e.Q6J("routerLink",e.VKq(4,v,o.id))}}const y=[{path:"",component:(()=>{class r{constructor(o,t,s,a){this.router=o,this.route=t,this.dialog=s,this.supabaseService=a,this.pets=[],this.profile=""}ngOnInit(){this.loadPets(),this.fetchPetProfilePictures()}addPet(){this.dialog.open(m.X,{width:"auto",height:"auto"})}goToPetDetails(){this.router.navigate(["/pet-details"])}loadPets(){var o=this;return(0,f.Z)(function*(){try{const t=o.supabaseService.getAuthStateSnapshot();if(t){const{data:s,error:a}=yield o.supabaseService.getSupabase().from("users_tbl").select("id").eq("email",t.email);if(a)console.error("Error fetching user data:",a);else if(s&&s.length>0){const l=s[0].id,{data:M,error:g}=yield o.supabaseService.getSupabase().from("pets_tbl").select("*").eq("pUsers_id",l);g?console.error("Error fetching pet data:",g):(o.pets=M||[],o.fetchPetProfilePictures())}else console.error("No user data found for the logged-in user.")}else console.error("No logged-in user found.")}catch(t){console.error("Error:",t)}})()}fetchPetProfilePictures(){var o=this;return(0,f.Z)(function*(){for(const t of o.pets){const s=`${t.petName}_${t.pUsers_id}_petProfile`;try{const{data:a,error:l}=yield o.supabaseService.getSupabase().storage.from("petProfile").download(s);console.log(s),l?(console.error("Error fetching profile picture:",l),t.profile="assets/defaultvax.png"):a?t.profile=URL.createObjectURL(a):(console.error("Profile picture not found:",s),t.profile="assets/defaultvax.png")}catch(a){console.error("Error fetching profile picture:",a),t.profile="assets/defaultvax.png"}}})()}static#e=this.\u0275fac=function(t){return new(t||r)(e.Y36(i.F0),e.Y36(i.gz),e.Y36(h.uw),e.Y36(P.T))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-pet-profile"]],decls:11,vars:1,consts:[[1,"outer-pet-container"],[1,"pets"],[1,"btn"],["mat-raised-button","","color","primary",3,"click"],[1,"inner-pet-container"],[1,"pet-card"],["class","example-card",4,"ngFor","ngForOf"],[1,"example-card"],[1,"img-container"],["mat-card-image","","alt","Photo of a pet",3,"src"],[1,"pet-content"],[1,"pet-details"],[1,"pet-name"],[1,"pet-breed"],[1,"see-more"],["mat-raised-button","","color","primary",3,"routerLink"]],template:function(t,s){1&t&&(e.TgZ(0,"html")(1,"body")(2,"div",0)(3,"h1",1),e._uU(4,"Pets"),e.qZA(),e.TgZ(5,"div",2)(6,"button",3),e.NdJ("click",function(){return s.addPet()}),e._uU(7,"Add Pet"),e.qZA()(),e.TgZ(8,"div",4)(9,"div",5),e.YNc(10,x,14,6,"mat-card",6),e.qZA()()()()()),2&t&&(e.xp6(10),e.Q6J("ngForOf",s.pets))},dependencies:[d.sg,i.rH,u.lW,c.a8,c.dn,c.G2],styles:["body[_ngcontent-%COMP%]{background-color:#fafafa;height:100vh;margin:0}.pets[_ngcontent-%COMP%]{text-align:center;font-size:30px;font-weight:700;margin-top:30px}.btn[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin:20px}.example-card[_ngcontent-%COMP%]{max-width:400px}.example-header-image[_ngcontent-%COMP%]{background-image:url(https://material.angular.io/assets/img/examples/shiba1.jpg);background-size:cover}.pet-card[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-evenly}.pet-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.pet-name[_ngcontent-%COMP%]{margin:20px 0 0}.see-more[_ngcontent-%COMP%]{display:flex;align-items:center}.img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:400px;height:240px;background-size:contain}.btns[_ngcontent-%COMP%]{display:flex;margin-right:-30px}"]})}return r})()}];let b=(()=>{class r{static#e=this.\u0275fac=function(t){return new(t||r)};static#t=this.\u0275mod=e.oAB({type:r});static#o=this.\u0275inj=e.cJS({imports:[i.Bz.forChild(y),i.Bz]})}return r})();var C=n(617);let O=(()=>{class r{static#e=this.\u0275fac=function(t){return new(t||r)};static#t=this.\u0275mod=e.oAB({type:r});static#o=this.\u0275inj=e.cJS({imports:[d.ez,b,C.Ps,u.ot,c.QW]})}return r})()}}]);