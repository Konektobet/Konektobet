"use strict";(self.webpackChunkKonektobet=self.webpackChunkKonektobet||[]).push([[8592],{8056:(U,x,r)=>{r.d(x,{c:()=>w});var m=r(1896),u=r(7630),o=r(5879),l=r(7344),t=r(7700),f=r(9850),C=r(6814),h=r(5195),_=r(617);function O(p,P){1&p&&(o.TgZ(0,"div",13)(1,"mat-icon"),o._uU(2,"arrow_forward_ios"),o.qZA(),o.TgZ(3,"label")(4,"strong"),o._uU(5,"See more"),o.qZA()()())}const M=function(p){return["/admin-cdetails",p]};function A(p,P){if(1&p){const c=o.EpF();o.TgZ(0,"a",5)(1,"mat-card",6),o.NdJ("mouseenter",function(){o.CHM(c);const n=o.oxw();return o.KtG(n.onMouseEnter())})("mouseleave",function(){o.CHM(c);const n=o.oxw();return o.KtG(n.onMouseLeave())}),o.TgZ(2,"mat-card-content")(3,"div",7),o._UZ(4,"img",8)(5,"div",9),o.qZA(),o.YNc(6,O,6,0,"div",10),o.TgZ(7,"div",11)(8,"div",12)(9,"h2"),o._uU(10),o.qZA(),o.TgZ(11,"h2"),o._uU(12),o.qZA()()()()()()}if(2&p){const c=P.$implicit,a=o.oxw();o.Q6J("routerLink",o.VKq(5,M,c.id)),o.xp6(4),o.Q6J("src",c.logo||"assets/logo.png",o.LSH),o.xp6(2),o.Q6J("ngIf",a.isHovered),o.xp6(4),o.Oqu(c.adName),o.xp6(2),o.Oqu(c.adAddress)}}const T=[{path:"",component:(()=>{class p{constructor(c,a,n,e,i){this.supabaseService=c,this.dialog=a,this.cdr=n,this.initialRecommendService=e,this.router=i,this.clinics=[],this.clinicsFound=!1,this.isHovered=!1}ngOnInit(){this.loadClinics(),this.initialRecommendService.matchedClinics$.subscribe(c=>{this.dialog.openDialogs.some(n=>n.componentInstance instanceof u.H&&n.componentInstance.addedToFavorites)||(this.clinics=c.map(n=>({...n,similarity:void 0})),this.clinicsFound=c.length>0,this.cdr.detectChanges())})}onMouseEnter(){this.isHovered=!0}onMouseLeave(){this.isHovered=!1}loadClinics(){this.supabaseService.getSupabase().from("admin_clinic_tbl").select("*").then(({data:c,error:a})=>{a?console.error("Error fetching clinics:",a):this.clinics=c})}popSeeMoreDetails(c){this.router.navigate(["/new-details",c.id])}static#t=this.\u0275fac=function(a){return new(a||p)(o.Y36(l.T),o.Y36(t.uw),o.Y36(o.sBO),o.Y36(f.h),o.Y36(m.F0))};static#n=this.\u0275cmp=o.Xpm({type:p,selectors:[["app-admin"]],decls:7,vars:1,consts:[[1,"outer-clinic-container"],[1,"clinics"],[1,"inner-clinic-container"],[1,"clinic-card-container"],["style","text-decoration: none;",3,"routerLink",4,"ngFor","ngForOf"],[2,"text-decoration","none",3,"routerLink"],[1,"clinic-card",2,"background-image","url('assets/bg.png')",3,"mouseenter","mouseleave"],[1,"clinic-logo"],["alt","Profile Image",3,"src"],[1,"clinic-txt"],["class","see-more1",4,"ngIf"],[1,"bot-part-container"],[1,"see-more"],[1,"see-more1"]],template:function(a,n){1&a&&(o.TgZ(0,"body")(1,"div",0)(2,"h1",1),o._uU(3,"Pending Clinics"),o.qZA(),o.TgZ(4,"div",2)(5,"div",3),o.YNc(6,A,13,7,"a",4),o.qZA()()()()),2&a&&(o.xp6(6),o.Q6J("ngForOf",n.clinics))},dependencies:[C.sg,C.O5,m.rH,h.a8,h.dn,_.Hw],styles:["body[_ngcontent-%COMP%]{background-color:#fafafa;height:93vh;margin:0}.clinics[_ngcontent-%COMP%]{text-align:center;font-size:30px;font-weight:700;margin-top:30px}.inner-clinic-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.clinic-card-container[_ngcontent-%COMP%]{width:100%;display:flex;flex-wrap:wrap;justify-content:space-evenly;align-items:center;margin:3% 5% 0}.clinic-card[_ngcontent-%COMP%]{width:400px;height:210px;margin-bottom:30px;overflow:absolute;border-top-left-radius:10px;border-top-right-radius:10px}.clinic-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:0;display:flex;width:auto;flex-wrap:nowrap;align-items:baseline;flex-direction:column}.clinic-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:auto;display:flex;align-items:center;justify-content:flex-start;padding:20px}.clinic-logo[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column;flex-wrap:wrap;width:100%}.clinic-txt[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:flex-start;flex-direction:column;flex-wrap:wrap;color:#fff;text-align:center}.clinic-txt[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{width:100%;font-size:1rem}.clinic-txt[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1rem;width:100%}@media screen and (max-width: 769px){.clinic-cards[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;width:350px}.clinic-card[_ngcontent-%COMP%]{width:350px;height:150px;margin-bottom:100px;overflow:absolute;border-top-left-radius:10px;border-top-right-radius:10px}.clinic-txt[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:16px}.clinic-txt[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:15px}}.see-more[_ngcontent-%COMP%]{width:100%;height:auto;display:flex;justify-content:center;overflow:relative;color:#fff;flex-direction:column}.see-more[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{width:100%;font-size:1rem;display:flex;justify-content:center;align-items:center;margin:0}.see-more1[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:24px;color:#000}.see-more1[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;background-color:#fffc;opacity:0;transition:opacity .3s ease}.see-more1[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{cursor:pointer;margin-bottom:8px;color:#000}.clinic-card[_ngcontent-%COMP%]:hover   .see-more1[_ngcontent-%COMP%]{opacity:1}.see-more[_ngcontent-%COMP%]   mat-raised-button[_ngcontent-%COMP%]{order:1;width:auto}.bot-part-container[_ngcontent-%COMP%]{height:70px;width:100%;display:flex;align-items:center;justify-content:row;background-color:#fff;border-top-left-radius:10px;border-top-right-radius:10px;overflow:relative;box-shadow:2px 2px 10px #00000013;background-color:#3f51b5}"]})}return p})()}];let w=(()=>{class p{static#t=this.\u0275fac=function(a){return new(a||p)};static#n=this.\u0275mod=o.oAB({type:p});static#e=this.\u0275inj=o.cJS({imports:[m.Bz.forChild(T),m.Bz]})}return p})()},1653:(U,x,r)=>{r.d(x,{v:()=>P});var m=r(5861),u=r(7700),o=r(3519),l=r.n(o),t=r(5879),f=r(7344),C=r(1896),h=r(6814),_=r(2296),O=r(617);function M(c,a){if(1&c&&(t.TgZ(0,"div")(1,"div",14)(2,"mat-icon"),t._uU(3,"pets"),t.qZA(),t.TgZ(4,"h1"),t._uU(5),t.qZA()(),t.TgZ(6,"div",14)(7,"mat-icon"),t._uU(8,"date_range"),t.qZA(),t.TgZ(9,"h2"),t._uU(10),t.qZA()(),t.TgZ(11,"div",14)(12,"mat-icon"),t._uU(13,"wc"),t.qZA(),t.TgZ(14,"h2"),t._uU(15),t.qZA()(),t.TgZ(16,"div",14)(17,"mat-icon"),t._uU(18,"layers"),t.qZA(),t.TgZ(19,"h2"),t._uU(20),t.qZA()()()),2&c){const n=t.oxw(2);t.xp6(5),t.Oqu(null==n.petDetails?null:n.petDetails.petName),t.xp6(5),t.hij("",null==n.petDetails?null:n.petDetails.petAge," year/s old"),t.xp6(5),t.Oqu(null==n.petDetails?null:n.petDetails.petSex),t.xp6(5),t.Oqu(null==n.petDetails?null:n.petDetails.petBreed)}}function A(c,a){if(1&c&&(t.TgZ(0,"div",11)(1,"h2"),t._uU(2),t.qZA(),t.TgZ(3,"div",12)(4,"div",13)(5,"div",14)(6,"h1"),t._uU(7),t.qZA()(),t.TgZ(8,"div",14)(9,"mat-icon"),t._uU(10,"person"),t.qZA(),t.TgZ(11,"h2"),t._uU(12),t.qZA()(),t.TgZ(13,"div",14)(14,"mat-icon"),t._uU(15,"sentiment_satisfied_alt"),t.qZA(),t.TgZ(16,"h2"),t._uU(17),t.qZA()(),t.TgZ(18,"div",14)(19,"mat-icon"),t._uU(20,"schedule"),t.qZA(),t.TgZ(21,"h1"),t._uU(22),t.qZA()(),t.YNc(23,M,21,4,"div",15),t.TgZ(24,"div",14)(25,"mat-icon"),t._uU(26,"today"),t.qZA(),t.TgZ(27,"h2"),t._uU(28),t.qZA()()()()()),2&c){const n=t.oxw();t.xp6(2),t.Oqu(n.clinic.cName),t.xp6(5),t.Oqu(null==n.clinic?null:n.clinic.cName),t.xp6(5),t.AsE("",null==n.clinic?null:n.clinic.firstname," ",null==n.clinic?null:n.clinic.lastname,""),t.xp6(5),t.Oqu(null==n.clinic?null:n.clinic.aService),t.xp6(5),t.Oqu(null==n.clinic?null:n.clinic.aTime),t.xp6(1),t.Q6J("ngIf",n.petDetails),t.xp6(5),t.Oqu(null==n.clinic?null:n.clinic.status)}}function b(c,a){if(1&c){const n=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){t.CHM(n);const i=t.oxw(2);return t.KtG(i.acceptAppointment())}),t._uU(1,"Accept"),t.qZA()}}function T(c,a){if(1&c){const n=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(n);const i=t.oxw(2);return t.KtG(i.rejectAppointment())}),t._uU(1,"Reject"),t.qZA()}}function w(c,a){if(1&c&&(t.TgZ(0,"div",14),t.YNc(1,b,2,0,"button",16),t.YNc(2,T,2,0,"button",17),t.qZA()),2&c){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",!n.isAppointmentAcceptedOrRejected()),t.xp6(1),t.Q6J("ngIf",!n.isAppointmentAcceptedOrRejected())}}function p(c,a){if(1&c){const n=t.EpF();t.TgZ(0,"div",14)(1,"button",20),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.concludeAppointment())}),t._uU(2,"Concluded"),t.qZA()()}if(2&c){const n=t.oxw();t.xp6(1),t.Q6J("disabled",n.isConcluded())}}let P=(()=>{class c{constructor(n,e,i,s){this.dialogRef=n,this.data=e,this.supabaseService=i,this.router=s,this.fetchClinicDetails(e.clinic)}ngOnInit(){}onClose(){this.dialogRef.close()}fetchClinicDetails(n){var e=this;return(0,m.Z)(function*(){try{const{data:i,error:s}=yield e.supabaseService.getSupabase().from("appointment_tbl").select("*").eq("id",n).single();if(s)console.error("Error fetching clinic details:",s);else{e.clinic=i;const{data:d,error:g}=yield e.supabaseService.getSupabase().from("pets_tbl").select("*").eq("id",e.clinic.aPet_id).single();g?console.error("Error fetching pet details:",g):e.petDetails=d}}catch(i){console.error("Error:",i)}})()}rejectAppointment(){var n=this;return(0,m.Z)(function*(){if((yield l().fire({icon:"warning",title:"Reject Appointment",text:"Are you sure you want to reject this appointment?",showCancelButton:!0,confirmButtonColor:"#ff4081",cancelButtonColor:"#6c757d",confirmButtonText:"Reject",cancelButtonText:"Cancel"})).isConfirmed)try{yield n.supabaseService.getSupabase().from("appointment_tbl").update({status:"Your appointment has been Rejected"}).eq("id",n.clinic.id),l().fire({icon:"success",title:"Appointment Rejected",text:"The appointment has been rejected!",showConfirmButton:!1,timer:1500}),window.location.reload(),n.router.navigateByUrl("clinic/clinic-find")}catch(i){console.error("Error rejecting appointment:",i),l().fire({icon:"error",title:"Oops...",text:"An error occurred while rejecting the appointment. Please try again later."})}})()}acceptAppointment(){var n=this;return(0,m.Z)(function*(){if((yield l().fire({icon:"warning",title:"Accept Appointment",text:"Are you sure you want to accept this appointment?",showCancelButton:!0,confirmButtonColor:"#3f51b5",cancelButtonColor:"#6c757d",confirmButtonText:"Accept",cancelButtonText:"Cancel"})).isConfirmed)try{yield n.supabaseService.getSupabase().from("appointment_tbl").update({status:"Your Appointment has been Approved"}).eq("id",n.clinic.id),l().fire({icon:"success",title:"Appointment Accepted",text:"The appointment has been accepted!",showConfirmButton:!1,timer:1500}),window.location.reload(),n.router.navigateByUrl("clinic/clinic-find")}catch(i){console.error("Error accepting appointment:",i),l().fire({icon:"error",title:"Oops...",text:"An error occurred while accepting the appointment. Please try again later."})}})()}concludeAppointment(){var n=this;return(0,m.Z)(function*(){if((yield l().fire({icon:"warning",title:"Conclude Appointment",text:"Are you sure you want to conclude this appointment?",showCancelButton:!0,confirmButtonColor:"#28a745",cancelButtonColor:"#6c757d",confirmButtonText:"Conclude",cancelButtonText:"Cancel"})).isConfirmed)try{yield n.supabaseService.getSupabase().from("appointment_tbl").update({status:"Appointment is Concluded"}).eq("id",n.clinic.id),l().fire({icon:"success",title:"Appointment Concluded",text:"The appointment has been concluded!",showConfirmButton:!1,timer:1500}),window.location.reload(),n.router.navigateByUrl("clinic/clinic-find")}catch(i){console.error("Error concluding appointment:",i),l().fire({icon:"error",title:"Oops...",text:"An error occurred while concluding the appointment. Please try again later."})}})()}isAppointmentAcceptedOrRejected(){return this.clinic&&("Your Appointment has been Approved"===this.clinic.status||"Your appointment has been Rejected"===this.clinic.status)}isAppointmentApproved(){return this.clinic&&"Your Appointment has been Approved"===this.clinic.status}isConcluded(){return this.clinic&&"Appointment is Concluded"===this.clinic.status}static#t=this.\u0275fac=function(e){return new(e||c)(t.Y36(u.so),t.Y36(u.WI),t.Y36(f.T),t.Y36(C.F0))};static#n=this.\u0275cmp=t.Xpm({type:c,selectors:[["app-update-appointment"]],decls:15,vars:3,consts:[[1,"appointment-update-container"],[1,"title"],["mat-dialog-title",""],["mat-icon-button","",3,"click"],["mat-dialog-content","",1,"appointment-update-details"],[1,"details-container"],[1,"details-logo-container"],["src","assets/logo.png","alt","logo.png"],["class","details-txt-container",4,"ngIf"],[1,"appointment-update-btn-container"],["class","icons",4,"ngIf"],[1,"details-txt-container"],[1,"chips"],[1,"chip-container"],[1,"icons"],[4,"ngIf"],["mat-raised-button","","class","accept-btn",3,"click",4,"ngIf"],["mat-raised-button","","class","reject-btn",3,"click",4,"ngIf"],["mat-raised-button","",1,"accept-btn",3,"click"],["mat-raised-button","",1,"reject-btn",3,"click"],["mat-raised-button","",1,"conclude-btn",3,"disabled","click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),t._uU(3,"Update Appointment"),t.qZA(),t.TgZ(4,"button",3),t.NdJ("click",function(){return i.onClose()}),t.TgZ(5,"mat-icon"),t._uU(6,"close"),t.qZA()()(),t.TgZ(7,"div",4)(8,"div",5)(9,"div",6),t._UZ(10,"img",7),t.qZA(),t.YNc(11,A,29,8,"div",8),t.qZA()(),t.TgZ(12,"div",9),t.YNc(13,w,3,2,"div",10),t.YNc(14,p,3,1,"div",10),t.qZA()()),2&e&&(t.xp6(11),t.Q6J("ngIf",i.clinic),t.xp6(2),t.Q6J("ngIf",!i.isAppointmentAcceptedOrRejected()),t.xp6(1),t.Q6J("ngIf",i.isAppointmentApproved()))},dependencies:[h.O5,u.uh,u.xY,_.lW,_.RK,O.Hw],styles:[".appointment-update-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.appointment-update-container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin:20px}.appointment-update-container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0}.appointment-update-container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{margin-left:10px;cursor:pointer;font-size:1.5em;border-radius:50%;width:40px;height:40px;display:flex;justify-content:center;align-items:center;background-color:#ddd}.appointment-update-container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{width:auto;min-width:130px;max-width:500px}.appointment-update-container[_ngcontent-%COMP%]   .details-txt-container[_ngcontent-%COMP%]{width:60%}.appointment-update-container[_ngcontent-%COMP%]   .details-txt-container[_ngcontent-%COMP%]   .dropdown-container[_ngcontent-%COMP%]{margin-bottom:20px}.appointment-update-container[_ngcontent-%COMP%]   .details-txt-container[_ngcontent-%COMP%]   .dropdown-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-right:10px}.appointment-update-container[_ngcontent-%COMP%]   .details-txt-container[_ngcontent-%COMP%]   .dropdown-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:8px;border:1px solid #ccc;border-radius:4px;cursor:pointer}@media screen and (max-width: 600px){.appointment-update-container[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]{width:100%}.appointment-update-container[_ngcontent-%COMP%]   .details-logo-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;margin-right:0}.appointment-update-container[_ngcontent-%COMP%]   .details-txt-container[_ngcontent-%COMP%]{width:90%;margin-top:20px}}.details-logo-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:150px;height:auto}.details-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;justify-content:center;flex-direction:column}.appointment-update-details[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;flex-wrap:wrap}.appointment-update-btn-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:20px}.appointment-update-btn-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-bottom:20px;width:200px}.chips[_ngcontent-%COMP%]{display:flex}.chip-container[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{color:#fff!important;--mdc-chip-label-text-color: #ffff}.chip-container[_ngcontent-%COMP%]   .pink[_ngcontent-%COMP%]{background-color:#ff4081}.chip-container[_ngcontent-%COMP%]   .blue[_ngcontent-%COMP%]{background-color:#3f51b5}.chip-container[_ngcontent-%COMP%]   .orange[_ngcontent-%COMP%]{background-color:#ff9800}.chip-container[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{width:auto;min-width:130px;max-width:500px}@media screen and (max-width: 769px){.title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px}}.icons[_ngcontent-%COMP%]{display:flex;margin-top:20px}.icons[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-left:10px}.icons[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin:3px}"]})}return c})()},5790:(U,x,r)=>{r.d(x,{t:()=>c});var m=r(5861),u=r(7700),o=r(3519),l=r.n(o),t=r(5879),f=r(1896),C=r(7344),h=r(6814),_=r(6223),O=r(2296),M=r(2557),A=r(617);const b=function(a,n){return{selected:a,blue:n}};function T(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"mat-chip",17),t.NdJ("click",function(){const d=t.CHM(e).$implicit,g=t.oxw(2);return t.KtG(g.toggleSelectService(d.trim()))}),t._uU(1),t.qZA()}if(2&a){const e=n.$implicit,i=t.oxw(2);t.Q6J("ngClass",t.WLB(2,b,i.selectedServices.includes(e.trim()),i.selectedServices.includes(e.trim()))),t.xp6(1),t.hij(" ",e.trim()," ")}}function w(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"mat-chip",17),t.NdJ("click",function(){const d=t.CHM(e).$implicit,g=t.oxw(2);return t.KtG(g.toggleSelectSchedule(d.trim()))}),t._uU(1),t.qZA()}if(2&a){const e=n.$implicit,i=t.oxw(2);t.Q6J("ngClass",t.WLB(2,b,i.selectedSchedules.includes(e.trim()),i.selectedSchedules.includes(e.trim()))),t.xp6(1),t.hij(" ",e.trim()," ")}}function p(a,n){if(1&a&&(t.TgZ(0,"option",18),t._uU(1),t.qZA()),2&a){const e=n.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function P(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"div",11)(1,"h2"),t._uU(2),t.qZA(),t.TgZ(3,"div",12)(4,"div",13)(5,"label"),t._uU(6,"Select Service:"),t.qZA(),t.TgZ(7,"mat-chip-listbox"),t.YNc(8,T,2,5,"mat-chip",14),t.qZA()(),t.TgZ(9,"div",13)(10,"label"),t._uU(11,"Select Schedule:"),t.qZA(),t.TgZ(12,"mat-chip-listbox"),t.YNc(13,w,2,5,"mat-chip",14),t.qZA()()(),t.TgZ(14,"p"),t._uU(15),t.ALo(16,"date"),t.qZA(),t.TgZ(17,"div",12)(18,"div",13)(19,"label"),t._uU(20,"Select Time Slot:"),t.qZA(),t._UZ(21,"br"),t.TgZ(22,"select",15),t.NdJ("ngModelChange",function(s){t.CHM(e);const d=t.oxw();return t.KtG(d.selectedTimeSlot=s)}),t.YNc(23,p,2,2,"option",16),t.qZA()()()()}if(2&a){const e=t.oxw();t.xp6(2),t.Oqu(e.clinic.cName),t.xp6(6),t.Q6J("ngForOf",e.clinic.cService.split(",")),t.xp6(5),t.Q6J("ngForOf",e.clinic.cSchedule.split(",")),t.xp6(2),t.hij("Appointment Date: ",t.lcZ(16,6,e.appointmentDate),""),t.xp6(7),t.Q6J("ngModel",e.selectedTimeSlot),t.xp6(1),t.Q6J("ngForOf",e.timeSlots)}}let c=(()=>{class a{constructor(e,i,s,d){this.router=e,this.supabaseService=i,this.dialogRef=s,this.data=d,this.selectedServices=[],this.selectedSchedules=[],this.isFormValid=!1,this.appointments=[],this.timeSlots=[],this.selectedTimeSlot="",this.fetchClinicDetails(d.appointmentId)}onClose(){this.dialogRef.close()}fetchClinicDetails(e){var i=this;return(0,m.Z)(function*(){try{const{data:s,error:d}=yield i.supabaseService.getSupabase().from("appointment_tbl").select("*").eq("id",e).single();if(d)console.error("Error fetching appointment details:",d);else if(s){s.aService&&(i.selectedServices=s.aService.split(",").map(v=>v.trim())),s.aSchedule&&(i.selectedSchedules=s.aSchedule.split(",").map(v=>v.trim()));const g=s.aClinic_id,{data:y,error:Z}=yield i.supabaseService.getSupabase().from("clinic_tbl").select("*").eq("id",g).single();Z?console.error("Error fetching clinic details:",Z):y?(console.log("Fetched clinic data:",y),i.clinic=y,i.appointmentDate=new Date(s.aDate),i.generateTimeSlots()):console.error("No clinic data found for the appointment ID:",e)}else console.error("No appointment data found for the ID:",e)}catch(s){console.error("Error:",s)}})()}generateTimeSlots(){const e=this.clinic.cSTime,i=this.clinic.cETime,[s,d]=e.split(":").map(Number),[g,y]=i.split(":").map(Number),Z=new Date;Z.setHours(s,d,0,0);const v=new Date;v.setHours(g,y,0,0);let E=new Date(Z);for(;E<=v;){const D=E.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});this.timeSlots.push(D),E.setHours(E.getHours()+1)}const S=new Date(this.appointmentDate);this.selectedTimeSlot=S.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}onUpdateAppointment(){l().fire({title:"Are you sure?",text:"You are about to update the appointment.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, update it!"}).then(e=>{e.isConfirmed&&this.updateAppointmentInDatabase()})}updateAppointmentInDatabase(){var e=this;return(0,m.Z)(function*(){try{const i={aService:e.selectedServices.join(", "),aSchedule:e.selectedSchedules.join(", "),aTime:e.selectedTimeSlot},{error:s}=yield e.supabaseService.getSupabase().from("appointment_tbl").update(i).eq("id",e.data.appointmentId);s?(console.error("Error updating appointment:",s),l().fire({icon:"error",title:"Oops...",text:"Failed to update the appointment. Please try again later."})):(l().fire({icon:"success",title:"Appointment Updated",text:"The appointment has been successfully updated."}),e.dialogRef.close(),e.fetchAppointments())}catch(i){console.error("Error:",i),l().fire({icon:"error",title:"Oops...",text:"An unexpected error occurred. Please try again later."})}})()}fetchAppointments(){var e=this;return(0,m.Z)(function*(){try{const{data:i,error:s}=yield e.supabaseService.getSupabase().from("appointment_tbl").select("*");s?console.error("Error fetching appointments:",s):e.appointments=i||[]}catch(i){console.error("Error:",i)}})()}toggleSelectService(e){const i=this.selectedServices.indexOf(e);-1!==i?this.selectedServices.splice(i,1):this.selectedServices.push(e),this.updateFormValidity()}toggleSelectSchedule(e){const i=this.selectedSchedules.indexOf(e);-1!==i?this.selectedSchedules.splice(i,1):this.selectedSchedules.push(e),this.updateFormValidity()}updateFormValidity(){this.isFormValid=this.selectedServices.length>0&&""!==this.selectedTimeSlot}static#t=this.\u0275fac=function(i){return new(i||a)(t.Y36(f.F0),t.Y36(C.T),t.Y36(u.so),t.Y36(u.WI))};static#n=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-appointment-update"]],decls:15,vars:2,consts:[[1,"appointment-update-container"],[1,"title"],["mat-dialog-title",""],["mat-icon-button","",3,"click"],["mat-dialog-content","",1,"appointment-update-details"],[1,"details-container"],[1,"details-logo-container"],["src","assets/logo.png","alt","logo.png"],["class","details-txt-container",4,"ngIf"],[1,"appointment-update-btn-container"],["mat-raised-button","","color","primary",1,"update-appointment-btn",3,"disabled","click"],[1,"details-txt-container"],[1,"chips"],[1,"chip-container"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"ngClass","click"],[3,"value"]],template:function(i,s){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),t._uU(3,"Update Appointment"),t.qZA(),t.TgZ(4,"button",3),t.NdJ("click",function(){return s.onClose()}),t.TgZ(5,"mat-icon"),t._uU(6,"close"),t.qZA()()(),t.TgZ(7,"div",4)(8,"div",5)(9,"div",6),t._UZ(10,"img",7),t.qZA(),t.YNc(11,P,24,8,"div",8),t.qZA()(),t.TgZ(12,"div",9)(13,"button",10),t.NdJ("click",function(){return s.onUpdateAppointment()}),t._uU(14," Update Appointment "),t.qZA()()()),2&i&&(t.xp6(11),t.Q6J("ngIf",s.clinic),t.xp6(2),t.Q6J("disabled",!s.isFormValid))},dependencies:[h.mk,h.sg,h.O5,_.YN,_.Kr,_.EJ,_.JJ,_.On,O.lW,O.RK,M.HS,M.z2,A.Hw,h.uU],styles:[".appointment-update-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.appointment-update-container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin:20px}.appointment-update-container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0}.appointment-update-container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{margin-left:10px;cursor:pointer;font-size:1.5em;border-radius:50%;width:40px;height:40px;display:flex;justify-content:center;align-items:center;background-color:#ddd}.appointment-update-container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{width:auto;min-width:130px;max-width:500px}.appointment-update-container[_ngcontent-%COMP%]   .details-txt-container[_ngcontent-%COMP%]{width:60%}.appointment-update-container[_ngcontent-%COMP%]   .details-txt-container[_ngcontent-%COMP%]   .dropdown-container[_ngcontent-%COMP%]{margin-bottom:20px}.appointment-update-container[_ngcontent-%COMP%]   .details-txt-container[_ngcontent-%COMP%]   .dropdown-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-right:10px}.appointment-update-container[_ngcontent-%COMP%]   .details-txt-container[_ngcontent-%COMP%]   .dropdown-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:8px;border:1px solid #ccc;border-radius:4px;cursor:pointer}@media screen and (max-width: 600px){.appointment-update-container[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]{width:100%}.appointment-update-container[_ngcontent-%COMP%]   .details-logo-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;margin-right:0}.appointment-update-container[_ngcontent-%COMP%]   .details-txt-container[_ngcontent-%COMP%]{width:90%;margin-top:20px}}.details-logo-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:150px;height:auto}.details-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;justify-content:center;flex-direction:column}.appointment-update-details[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;flex-wrap:wrap}.appointment-update-btn-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:20px}.appointment-update-btn-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-bottom:20px;width:200px}.chips[_ngcontent-%COMP%]{display:flex}.chip-container[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{color:#fff!important;--mdc-chip-label-text-color: #ffff}.chip-container[_ngcontent-%COMP%]   .pink[_ngcontent-%COMP%]{background-color:#ff4081}.chip-container[_ngcontent-%COMP%]   .blue[_ngcontent-%COMP%]{background-color:#3f51b5}.chip-container[_ngcontent-%COMP%]   .orange[_ngcontent-%COMP%]{background-color:#ff9800}.chip-container[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{width:auto;min-width:130px;max-width:500px}@media screen and (max-width: 769px){.title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px}}"]})}return a})()},3363:(U,x,r)=>{r.d(x,{e:()=>o});var m=r(5619),u=r(5879);let o=(()=>{class l{hasLoggedInBefore(){return"true"===localStorage.getItem(this.hasLoggedInBeforeKey)}markAsLoggedIn(){localStorage.setItem(this.hasLoggedInBeforeKey,"true")}login(){return new Promise(f=>{this.markAsLoggedIn(),this.loginSuccessSubject.next(!0),f(!0)})}getLoginSuccessObservable(){return this.loginSuccessSubject.asObservable()}constructor(){this.hasLoggedInBeforeKey="hasLoggedInBefore",this.loginSuccessSubject=new m.X(!1)}static#t=this.\u0275fac=function(C){return new(C||l)};static#n=this.\u0275prov=u.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"})}return l})()}}]);